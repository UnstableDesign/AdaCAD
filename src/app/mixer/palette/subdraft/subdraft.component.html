<div id="con-{{draft.id}}" class="subdraft-container" [class.is_preview] = "is_preview"
	cdkDrag
	[style.z-index] = "zndx"
	[class.drawing] = "disable_drag && !is_preview"
	[class.no-pointer] = "disable_drag"
	[cdkDragDisabled] = "disable_drag"
	[cdkDragFreeDragPosition]="bounds.topleft"
	[cdkDragData]="scale"
	(cdkDragMoved)="dragMove($event)"
	(cdkDragEnded)="dragEnd($event)"
	(cdkDragStarted)="dragStart($event)">



  	<div class="subdraft-contents" [class.active-selection] = has_active_selection>

		
		<canvas id="{{id}}">  
		</canvas>

		<ng-container *ngIf="set_connectable">
			<button matTooltip = "click here to use this draft as input"
			class="button is-small is-primary"
			[class.is-active]="active_connection_order > 0"
			(click) = "connectionClicked(id)"
			>
			<i class="fas fa-chevron-down"></i>
			<ng-container *ngIf="active_connection_order > 0">{{active_connection_order}}</ng-container>
		</button>
		</ng-container>

	</div>

	<div class="subdraft-details" [class.hide]="set_connectable"> 
		<div class ="align-top">
		<button 
		matTooltip= "Inks"
		class="button is-small is-primary fas fa-tint"
		[matMenuTriggerFor]="filters"
		xPosition="after">
		</button>

		<mat-menu #filters="matMenu">
			<ng-container *ngFor="let i of inks.getInks()">
			<button 
			  mat-menu-item
			  [matTooltip]=i.dx
			  [name]=i.viewValue 
			  [class.is-active]=i.selected
			  (click)="inkActionChange(i.value)">
			  {{i.viewValue}}
			  </button> 
			  </ng-container>  
		

		</mat-menu>
		<ng-container *ngIf="parent_id === -1">
			<button 
			matTooltip= "Actions"
			class="button is-small is-primary fas fa-magic"
			[style.color]="button_color" 
			[matMenuTriggerFor]="actions">
			</button>
			
			<mat-menu #actions="matMenu">
			<ng-container *ngFor="let action of design_actions">
				<button [matTooltip]=action.viewValue 
				mat-menu-item
				[name]=action.value 
				(click)="designActionChange(action.value)">
				<mat-icon><i class="{{action.icon}}"></i></mat-icon> 
				{{action.viewValue}}
				</button>    
			</ng-container>
			</mat-menu>


			<button 
			matTooltip= "Fill Black Cells With..."
			class="button is-small is-primary fas fa-fill"
			[style.color]="button_color" 
			[matMenuTriggerFor]="fills">
			</button>
			
			<mat-menu #fills="matMenu">
				<ng-container *ngFor="let pattern of patterns">
					<ng-container *ngIf="pattern.favorite">
						<button [matTooltip]=pattern.name 
						mat-menu-item
						[name]=pattern.name 
						(click)="fill(pattern.id)">{{pattern.name }}
						</button>  
					</ng-container>  
				</ng-container>
			</mat-menu>
		
		</ng-container>

		<button 
		matTooltip= "Duplilcate"
		class="button is-small is-primary fa fa-clone"
		[style.color]="button_color" 
		[name]="delete"
		(click)="designActionChange('duplicate')">
		</button>
		
		</div>
		
		<div class="align-bottom">
		<button 
		matTooltip= "Delete"
		class="button is-small is-primary fas fa-times"
		[style.color]="button_color" 
		[name]="delete"
		(click)="designActionChange('delete')">
		</button>
		
	</div>
	
	
   </div>
</div>
	

