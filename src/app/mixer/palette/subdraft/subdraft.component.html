
<div id="con-{{draft.id}}" class="subdraft-container" [class.is_preview] = "is_preview"
	cdkDrag
	[style.z-index] = "zndx"
	[class.drawing] = "disable_drag && !is_preview"
	[class.no-pointer] = "disable_drag"
	[cdkDragDisabled] = "disable_drag"
	[cdkDragFreeDragPosition]="bounds.topleft"
	(cdkDragMoved)="dragMove($event)"
	(cdkDragEnded)="dragEnd($event)"
	(cdkDragStarted)="dragStart($event)">


	<div id="scale-{{draft.id}}" class="subdraft-container">


  	<div class="subdraft-contents" [class.active-selection] = has_active_selection>

		
		<canvas id="{{id}}" class="maindraft">  
		</canvas>

		<div class="bottom-opts">
		
		<ng-container *ngIf="set_connectable">
			<button matTooltip = "click here to use this draft as input"
			class="button is-small is-primary"
			[class.is-active]="active_connection_order > 0"
			(click) = "connectionClicked(id)"
			>
			<i class="fas fa-chevron-down"></i>
			<ng-container *ngIf="active_connection_order > 0">{{active_connection_order}}</ng-container>
			</button>
		</ng-container>

		<!-- <span>  {{id}} // {{draft.warps}} x {{draft.wefts}}</span> -->
		<span>{{draft.warps}} x {{draft.wefts}} {{disable_drag}} {{set_connectable}}</span>
		
		
		
	 </div>
	</div>

	<div class="subdraft-details" [class.hide]="set_connectable"> 
		<div class ="align-top">
		
		<!-- <ng-container *ngIf="parent_id === -1"> -->

	  	<button
		class="button is-small is-primary fas fa-expand-alt"
		matTooltip ="edit this draft"
		(click)="finetune()">
	   </button>

	

		<button 
		matTooltip= "Duplilcate"
		class="button is-small is-primary fa fa-clone"
		[style.color]="button_color" 
		[name]="delete"
		(click)="designActionChange('duplicate')">
		</button>
		
		<button
		[matMenuTriggerFor]="downloadDropdown"
		class="button is-small is-primary fas fa-download"
		 matTooltip ="download this draft">
		</button>

		

		  <mat-menu #downloadDropdown mat-raised-button>
			<a class="print-link" #printLink (click)="saveAsPrint($event)" mat-menu-item>as Printable Image</a>
			<a #bmpLink (click)="saveAsBmp($event)" mat-menu-item> as Bitmap</a>
			<a #adaLink (click)="saveAsAda($event)" mat-menu-item> as AdaCAD file</a>
			<a #wifLink (click)="saveAsWif($event)" mat-menu-item> as Wif file</a>
		  </mat-menu>
		
		</div>
		<div class="align-bottom">
			<button 
			matTooltip= "Delete"
			class="button is-small is-primary fas fa-times"
			[style.color]="button_color" 
			[name]="delete"
			(click)="designActionChange('delete')">
			</button>
		</div>


	
	
   </div>

   <canvas #bitmapImage hidden></canvas>
	
</div>
</div>
	

