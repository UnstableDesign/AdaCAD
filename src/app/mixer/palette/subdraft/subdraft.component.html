
<div 
*ngIf="tree.getDraft(id) !== null" 
id="con-{{id}}" 
class="subdraft-container" 
[class.is_preview] = "is_preview"
	cdkDrag
	(mousedown)="mousedown($event)"
	 (click)="toggleMultiSelection($event)"
	[style.z-index] = "zndx"
	[class.drawing] = "disable_drag && !is_preview"
	[class.no-pointer] = "disable_drag"
	[cdkDragDisabled] = "disable_drag"
	[cdkDragFreeDragPosition]="bounds.topleft"
	(cdkDragMoved)="dragMove($event)"
	(cdkDragEnded)="dragEnd($event)"
	(cdkDragStarted)="dragStart($event)">


	<div id="scale-{{id}}" class="subdraft-container">

		<div  class="subdraft-contents">
			<canvas id="{{id}}" class="maindraft" [class.hidden] = '!draft_visible'>  
			</canvas>
		</div>

		<div class="datarow">
		
			<div class='dims_and_name'>
				<div class="defined_name">
					<input matInput  [(ngModel)]="ud_name" 
					[placeholder]="tree.getDraft(id).gen_name"  
					(focusout)="nameFocusOut($event)"
					(change)="updateName()">
				 </div>
				<div class="dims">{{warps()}} x {{wefts()}} </div>

			</div>
			

			<div class="bottom-opts">


				<div class="subdraft-details"> 

					<button mat-icon-button
					[matMenuTriggerFor]="subdraftOptions"
					class="is-small fa-solid fa-ellipsis"
					matTooltip ="View Options">
					</button>

					<mat-menu #subdraftOptions>
						
					<button mat-icon-button
					class="is-small fas fa-expand-alt"
					matTooltip ="View Draft Details"
					(click)="finetune()">
					</button>
			
					<button mat-icon-button *ngIf='parent_id !== -1'
					matTooltip= "Show/Hide Draft"
					class="fas"
					[class.fa-eye-slash] = '!draft_visible'
					[class.fa-eye] = 'draft_visible'
					(click)="showhide()">
					</button>
			
			
					<button mat-icon-button
					matTooltip= "Duplilcate"
					class="fa fa-clone"
					[style.color]="button_color" 
					[name]="duplicate"
					(click)="designActionChange('duplicate')">
					</button>
					
					<button mat-icon-button
					class="fas fa-download"
					(click)="saveAsBmp()"
					matTooltip ="Download as Bitmap">

					</button>
					<button mat-icon-button
					(click)="saveAsPrint()"
					class="fa-solid fa-file-image"
					matTooltip ="Download as Printable Image">
					</button>
			
			
			
				
					<button mat-icon-button *ngIf='parent_id === -1'
					matTooltip= "Delete"
					class="fas fa-times"
					[name]="delete"
					(click)="designActionChange('delete')">
					</button>

					
				</mat-menu>

		

					</div>
					
			

		

			
					

		
		</div>




		</div>

		<div class="outletrow">
			<button
			id = "{{id}}-out" 
			matTooltip = "click here to use this draft as input"
			class="button is-small output outlet"
			(click) = "connectionStarted(id)"
			>
			<i class="fas fa-chevron-down"></i>
			</button>

		</div>



		

		
		

		





   <canvas #bitmapImage hidden></canvas>

</div>
	

