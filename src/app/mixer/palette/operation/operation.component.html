<div class="operation-container"
cdkDrag
[style.z-index] = "zndx"
[style.width.px] = "bounds.width"
[cdkDragDisabled] = "disable_drag"
[cdkDragFreeDragPosition]="bounds.topleft"
(cdkDragMoved)="dragMove($event)"
(cdkDragEnded)="dragEnd($event)"
(cdkDragStarted)="dragStart($event)"
>

<div id='scale-{{id}}' class="operation-container">

<div class="top-row">
    <div class="inputs">
    

    <ng-container *ngIf = "
    dm.isSelected('operation', 'design_modes') && tree.canAcceptConnections(id)"> 
        <button 
            class="button is-small is-primary is-active"
            (click)="inputSelected($event, ndx)">
            <i class="fas fa-chevron-right"></i>
        </button>
     </ng-container> 



    <ng-container *ngIf = "!dm.isSelected('operation', 'design_modes') &&
    tree.getInputs(id).length > 0"> 

        <button *ngFor="let input of tree.getNonCxnInputs(id)"
            matTooltip = "click to remove this connection"
            class="button is-small is-primary is-active"
            (click)="removeConnectionTo(input)">
            <i class="fas fa-link"></i>
            {{input}}
        </button>
     </ng-container> 
    </div>


    <div class="operation-details">
        <!-- <div class="name">{{op.name}} // {{id}}</div> -->
        <div class="name">{{op.name}}</div>
        <button 
        class="help"
        (click)="openHelpDialog()">
        <i class="fas fa-question"></i>
    </button> 
    </div>


    <button 
    matTooltip= "Duplilcate"
    class="button is-small is-primary fa fa-clone"
    (click)="duplicate('duplicate')">
    </button>
    

    <button 
    class="button is-small is-primary"
    (click)="delete()">
    <i class="fas fa-times"></i>
    </button>




</div>
<div class="params">

    <ng-container *ngFor="let param of op.params; let i = index">
        <div class="param-row">

        <div class="param-name">{{param.name}}</div>

        <div class="param-slider">
            <mat-slider 
            thumbLabel
            tickInterval="1"
            [formControl]="op_inputs[i]"
            [matTooltip]=param.dx
            [min]=param.min
            [max]=param.max
            step="1" 
            value="op_inputs[i].value"
            (change)= "onParamChange(i, op_inputs[i].value)">
        </mat-slider>
        </div>


         <div class='param-label'>
            <input 
            [formControl]="op_inputs[i]"
            [matTooltip]=param.dx
            type = "number"
            [name]=param.name
            [min]=param.min
            [max]=param.max
            step = 1
            value = op_inputs[i].value
            (change)= "onParamChange(i, op_inputs[i].value)"
          >
  
            <!-- <label class="example-value-label">{{op_inputs[i].value}}</label> -->
        </div>
        <!-- <input 
          [formControl]="op_inputs[i]"
          [matTooltip]=param.dx
          type = "number"
          [name]=param.name
          [min]=param.min
          [max]=param.max
          step = 1
          required = true
          (change)= onParamChange();
        > -->
    </div>
    </ng-container>
    </div>
<!-- <div class="outputs"></div> -->
</div>
</div>
