<app-topbar 
[drawer] = "drawer"
[loomtypes] = "loomtypes"
[timeline] = "timeline"
[density_units] = "density_units"
[undoItem]="undoItem" 
[redoItem]="redoItem"
[filename]="filename"
source="mixer"
[draftelement]="draftelement"
  (onUndo)="undo();" 
  (onRedo)="redo();"
  (onLoadNewFile)="loadNewFile($event);"
  (onSave)="onSave($event);">
</app-topbar>

<mat-drawer-container #container class="mat-drawer-container" cdkScrollable>
  
  <mat-drawer #drawer class="example-sidenav" mode="side" position="end" opened>  

      <div class ="design-container">
       
        <mat-accordion multi>

        <app-mixerview 
          zoom = "5"
          (onZoomChange) ="renderChange($event);"
        >


        </app-mixerview>

        <app-mixerdesign #design_tool
        [view_mode] = "render?.current_view"
        (onDesignModeChange)="designModeChanged($event);"
        (onInkChange)="inkChanged($event)">
        </app-mixerdesign> 

        <!-- <app-mixerpatterns 
        [patterns]="default_patterns"
        [selection] = "selection"
        (onPatternChange)="updatePatterns($event);"
        (onCreatePattern)="createPattern($event);"
        (onRemovePattern)="removePattern($event);"
        (onFill) = "fillEvent($event)">
        >
       </app-mixerpatterns> -->
 
       <app-flow
       (onOperationAdded) = "operationAdded($event)"
       (onImport) = "importNewFile($event)">
      </app-flow>
    

       <app-tree>
      </app-tree>

        <!-- <app-materials 
          [material_types]="material_types"
          [shuttles]="draft?.shuttles"
          (onColorChange)="shuttleColorChange()" 
          (onThicknessChange) ="thicknessChange($event)"
          (onCreateShuttle) ="createShuttle($event)"
        >

        </app-materials> -->

       
<!-- 
        <app-systems
         [weft_systems]="draft?.weft_systems"
         [warp_systems]="draft?.warp_systems"
         [weft_systems_pattern]="draft?.rowSystemPattern"
         [warp_systems_pattern]="draft?.colSystemPattern"
         [shuttles]="draft?.shuttles"
         [warp_shuttles_pattern]="draft?.colShuttlePattern"
         [weft_shuttles_pattern]="draft?.rowShuttlePattern"
         (onUpdateWarpSystems) = "updateWarpSystems($event)"
         (onUpdateWeftSystems) = "updateWeftSystems($event)"
         (onUpdateWarpShuttles) = "updateWarpShuttles($event)"
         (onUpdateWeftShuttles) = "updateWeftShuttles($event)"
        >
       </app-systems> -->


        <!-- <app-loom 
          [epi] = "draft?.epi"
          [warps] = "draft?.warps"
          [wefts] = "draft?.wefts"
          [frames] = "draft?.loom.min_frames"
          [treadles] = "draft?.loom.min_treadles"
          [loomtypes] = "loomtypes"
          [loomtype] = "draft?.loom.type"
          [density_units] = "density_units"
          [units] = "draft?.units"
          [width] = "draft?.width"
          (onWarpNumChange) = "warpNumChange($event)"
          (onWeftNumChange) = "weftNumChange($event)"
          (onEpiNumChange) = "epiChange($event)"
          (onUnitChange) = "unitChange($event)"
          (onThicknessChange) = "thicknessChange($event)"
          (onLoomTypeChange) = "loomChange($event)"
          (onFrameChange) = "frameChange($event)"
          (onTreadleChange) = "treadleChange($event)"
          >
        </app-loom> -->

        <app-notes
         [notes] = "notes"
         (onChange) = "notesChanged($event)"
         >
        </app-notes>


    </mat-accordion>

    </div>

  </mat-drawer>

  <app-palette #palette  id="scrollable-container"
  [patterns] = "default_patterns"
  (onDesignModeChange)="designModeChanged($event)" >
  </app-palette>



</mat-drawer-container>
