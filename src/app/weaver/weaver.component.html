<!-- <mat-drawer-container  style="background: #3d3d3d;" #container class="mat-drawer-container" cdkScrollable>
  
  <mat-drawer #drawer class="example-sidenav" mode="top" position="start" opened>   -->

      <div class ="design-container">
       
        <!-- <app-tab
        (onGenerativeModeChange)="onGenerativeModeChange($event)"
        (onDraftSelected)="loadGeneratedDraft($event)"
        ></app-tab>  -->

        <app-sidebar #sidebar
        source="weaver"
        (onDesignModeChange)='designModeChange($event)'
        (onZoomChange) ="renderChange($event);"
        (onViewChange) ="viewChange($event);"
        (onViewFront) ="renderChange($event);"
        (onHideWeftSystem)="hideWeftSystem($event);"
        (onShowWeftSystem)="showWeftSystem($event);"
        (onHideWarpSystem)="hideWarpSystem($event);"
        (onShowWarpSystem)="showWarpSystem($event);"
        (onGlobalLoomChange)="globalLoomChange($event)"
        (onLocalLoomNeedsRedraw)="redrawLoomAndDraft()"
        (onUpdateWarpSystems) = "updateWarpSystems($event)"
        (onUpdateWeftSystems) = "updateWeftSystems($event)"
        (onUpdateWarpShuttles) = "updateWarpShuttles($event)"
        (onUpdateWeftShuttles) = "updateWeftShuttles($event)"
        ></app-sidebar>


   
    <!-- <div class="generative-options" *ngIf="weaveRef.selected==false">
      <h1>testing</h1>
      <button matTooltip="start making changes" 
      [name]='changesFromGenerative'
      class="button material is-small is-primary fas fa-square"
      >
    </button>
    </div> -->
  <!-- </mat-drawer> -->

    <app-draftviewer 
    [id]="id"
    source = "weaver"
    (onNewSelection) = "updateSelection($event)">
    </app-draftviewer>

    <div class="detail_data" *ngIf="id !== -1">


    <mat-tab-group mat-stretch-tabs="false" mat-align-tabs="start">
      <mat-tab label="Draft">
        <form #envt="ngForm" novalidate>

        <mat-form-field>

        <mat-label>Draft</mat-label>
        <mat-select (selectionChange) ="loomChange(envt)" [(value)]="loom_settings.type" [(ngModel)]="loom_settings.type" name="loomtype">
          <mat-option *ngFor="let loomtype of loomtypes" [value]="loomtype.value">
            {{loomtype.viewValue}}
          </mat-option>
        </mat-select>
        </mat-form-field>

         
        <mat-form-field>
          <input matInput name="warps" 
          [readonly]="warp_locked" 
          [(ngModel)]="warps" 
          type="number" 
          min="2" 
          placeholder="Warp Ends" 
          (change)="warpChange(envt)"
          (blur)="warpChange(envt)"> 
          
       
        </mat-form-field>

        <mat-form-field>
          <input matInput name="wefts" 
          [(ngModel)]="wefts" 
          type="number" 
          min="2" 
          placeholder="Weft Pics" 
          (change)="weftchange(envt)"
          (blur)="weftChange(envt)"> 
       
        </mat-form-field>

        <mat-form-field>
          <mat-label>Density Units</mat-label>            
          <mat-select [(value)]="units" [(ngModel)]="loom_settings.units" name="units" (selectionChange) ="unitChange(envt)">
            <mat-option *ngFor="let unit of density_units" [value]="unit.value">
              {{unit.viewValue}}
            </mat-option>
          </mat-select>
          </mat-form-field>

          <mat-form-field>
          <mat-label>Density</mat-label>    
          <input matInput  
          name="epi" 
          [(ngModel)]="loom_settings.epi" 
          type="number" 
          min= "0" 
          (change)="epiChange(envt)"
          (blur)="epiChange(envt)">  
  
          <ng-container *ngIf="loom_settings.units === 'cm'">
            <span matSuffix>ends / 10cm</span>
          </ng-container>
          <ng-container *ngIf="loom_settings.units == 'in'">
           <span matSuffix>epi</span> 
          </ng-container>
                </mat-form-field>



        <mat-form-field>
          <input matInput 
          name="width" 
          [(ngModel)]="width" 
          step="0.125" 
          type="number" 
          min= "0.25" 
          max ="60" 
          placeholder="Width" 
          (change)="widthChange(envt)"
          (blur)="widthChange(envt)"> 

          <ng-container *ngIf="loom_settings.units === 'in'">
            <span matSuffix>inches</span> 
          </ng-container>
  
           <ng-container *ngIf="loom_settings.units === 'cm'">
            <span matSuffix>cm</span> 
         </ng-container>
  
        </mat-form-field>


  
          <mat-form-field>
            <mat-label >Number of Frames</mat-label>    
            <input matInput 
            name="frames" 
            [disabled]="loom_settings.type == 'jacquard'"
            [(ngModel)]="frames"  
            step="1" 
            type="number" 
            min= "2" 
            max ="1000" 
            (change)="updateMinFrames(envt)" 
            (blur)="updateMinFrames(envt)"> 
             <span matSuffix>frames</span> 
           </mat-form-field>
    
    
          <mat-form-field>
            <mat-label>Number of Treadles</mat-label>      
            <input matInput 
            name="treadles" 
            [disabled]="loom_settings.type == 'jacquard'"
            [(ngModel)]="treadles" 
            step="1" 
            type="number" 
            min= "2" 
            max ="1000" 
            (change)="updateMinTreadles(envt)"
            (blur)="updateMinTreadles(envt)"
            > 
             <span matSuffix>treadles</span> 
           </mat-form-field>
  
           <!-- <mat-slide-toggle [(ngModel)] = 'global_loom.show_errors' name="show_errors">Label Drafts that Require More Frames or Treadles</mat-slide-toggle> -->
  
  


       </form>
  

        <div>
          <mat-label>Editing Mode: </mat-label>
          <mat-slide-toggle
          [disabled]="loom_settings.type == 'jacquard'"
          (click)="swapEditingStyle()">
          </mat-slide-toggle>
          <div><mat-label>{{dm.getSelectedDesignMode('drawdown_editing_style').viewValue}}</mat-label></div>
          </div>
        
        
        </mat-tab>

      <mat-tab label="View"></mat-tab>
            
      <mat-tab label="Cross Section Viewer">Reveal the cross section of the current selection</mat-tab>

      <mat-tab label="Data">   
         <div class="weave_stats">
      
        </div> 
  </mat-tab>
    </mat-tab-group> 
   </div>

   </div>
<!-- </mat-drawer-container> -->
