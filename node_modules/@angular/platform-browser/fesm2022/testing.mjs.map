{"version":3,"file":"testing.mjs","sources":["../../../../../darwin_arm64-fastbuild-ST-199a4f3c4e20/bin/packages/platform-browser/testing/src/dom_test_component_renderer.ts","../../../../../darwin_arm64-fastbuild-ST-199a4f3c4e20/bin/packages/platform-browser/testing/src/browser.ts"],"sourcesContent":["/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.dev/license\n */\n\nimport {DOCUMENT, ɵgetDOM as getDOM} from '@angular/common';\nimport {Inject, Injectable} from '@angular/core';\nimport {TestComponentRenderer} from '@angular/core/testing';\n\n/**\n * A DOM based implementation of the TestComponentRenderer.\n */\n@Injectable()\nexport class DOMTestComponentRenderer extends TestComponentRenderer {\n  constructor(@Inject(DOCUMENT) private _doc: any) {\n    super();\n  }\n\n  override insertRootElement(rootElId: string, tagName = 'div') {\n    this.removeAllRootElementsImpl();\n    const rootElement = getDOM().getDefaultDocument().createElement(tagName);\n    rootElement.setAttribute('id', rootElId);\n    this._doc.body.appendChild(rootElement);\n  }\n\n  override removeAllRootElements() {\n    // Check whether the `DOCUMENT` instance retrieved from DI contains\n    // the necessary function to complete the cleanup. In tests that don't\n    // interact with DOM, the `DOCUMENT` might be mocked and some functions\n    // might be missing. For such tests, DOM cleanup is not required and\n    // we skip the logic if there are missing functions.\n    if (typeof this._doc.querySelectorAll === 'function') {\n      this.removeAllRootElementsImpl();\n    }\n  }\n\n  private removeAllRootElementsImpl() {\n    const oldRoots = this._doc.querySelectorAll('[id^=root]');\n    for (let i = 0; i < oldRoots.length; i++) {\n      getDOM().remove(oldRoots[i]);\n    }\n  }\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.dev/license\n */\nimport {ɵprovideFakePlatformNavigation} from '@angular/common/testing';\nimport {APP_ID, createPlatformFactory, NgModule, StaticProvider, PlatformRef} from '@angular/core';\nimport {TestComponentRenderer} from '@angular/core/testing';\nimport {BrowserModule, platformBrowser} from '../../index';\nimport {DOMTestComponentRenderer} from './dom_test_component_renderer';\n\n/**\n * Platform for testing\n *\n * @publicApi\n */\nexport const platformBrowserTesting: (extraProviders?: StaticProvider[]) => PlatformRef =\n  createPlatformFactory(platformBrowser, 'browserTesting');\n\n/**\n * NgModule for testing.\n *\n * @publicApi\n */\n@NgModule({\n  exports: [BrowserModule],\n  providers: [\n    {provide: APP_ID, useValue: 'a'},\n    ɵprovideFakePlatformNavigation(),\n    {provide: TestComponentRenderer, useClass: DOMTestComponentRenderer},\n  ],\n})\nexport class BrowserTestingModule {}\n"],"names":["DOMTestComponentRenderer","TestComponentRenderer","_doc","constructor","insertRootElement","rootElId","tagName","removeAllRootElementsImpl","rootElement","getDOM","getDefaultDocument","createElement","setAttribute","body","appendChild","removeAllRootElements","querySelectorAll","oldRoots","i","length","remove","ɵfac","i0","ɵɵngDeclareFactory","minVersion","version","ngImport","type","DOCUMENT","target","ɵɵFactoryTarget","Injectable","decorators","Inject","platformBrowserTesting","createPlatformFactory","platformBrowser","BrowserTestingModule","deps","NgModule","ɵmod","ɵɵngDeclareNgModule","BrowserModule","ɵinj","ɵɵngDeclareInjector","providers","provide","APP_ID","useValue","ɵprovideFakePlatformNavigation","useClass","imports","args","exports"],"mappings":"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"}