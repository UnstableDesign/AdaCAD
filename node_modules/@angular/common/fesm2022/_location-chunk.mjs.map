{"version":3,"file":"_location-chunk.mjs","sources":["../../../../../darwin_arm64-fastbuild-ST-199a4f3c4e20/bin/packages/common/src/dom_adapter.ts","../../../../../darwin_arm64-fastbuild-ST-199a4f3c4e20/bin/packages/common/src/location/platform_location.ts","../../../../../darwin_arm64-fastbuild-ST-199a4f3c4e20/bin/packages/common/src/location/util.ts","../../../../../darwin_arm64-fastbuild-ST-199a4f3c4e20/bin/packages/common/src/location/location_strategy.ts","../../../../../darwin_arm64-fastbuild-ST-199a4f3c4e20/bin/packages/common/src/location/location.ts"],"sourcesContent":["/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.dev/license\n */\n\nlet _DOM: DomAdapter = null!;\n\nexport function getDOM(): DomAdapter {\n  return _DOM;\n}\n\nexport function setRootDomAdapter(adapter: DomAdapter) {\n  _DOM ??= adapter;\n}\n\n/**\n * Provides DOM operations in an environment-agnostic way.\n *\n * @security Tread carefully! Interacting with the DOM directly is dangerous and\n * can introduce XSS risks.\n */\nexport abstract class DomAdapter {\n  // Needs Domino-friendly test utility\n  abstract dispatchEvent(el: any, evt: any): any;\n  abstract readonly supportsDOMEvents: boolean;\n\n  // Used by Meta\n  abstract remove(el: any): void;\n  abstract createElement(tagName: any, doc?: any): HTMLElement;\n  abstract createHtmlDocument(): Document;\n  abstract getDefaultDocument(): Document;\n\n  // Used by By.css\n  abstract isElementNode(node: any): boolean;\n\n  // Used by Testability\n  abstract isShadowRoot(node: any): boolean;\n\n  // Used by KeyEventsPlugin\n  abstract onAndCancel(el: any, evt: any, listener: any, options?: any): Function;\n\n  // Used by PlatformLocation and ServerEventManagerPlugin\n  abstract getGlobalEventTarget(doc: Document, target: string): any;\n\n  // Used by PlatformLocation\n  abstract getBaseHref(doc: Document): string | null;\n  abstract resetBaseElement(): void;\n\n  // TODO: remove dependency in DefaultValueAccessor\n  abstract getUserAgent(): string;\n\n  // Used in the legacy @angular/http package which has some usage in g3.\n  abstract getCookie(name: string): string | null;\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.dev/license\n */\n\nimport {inject, Injectable, InjectionToken, DOCUMENT} from '@angular/core';\n\nimport {getDOM} from '../dom_adapter';\n\n/**\n * This class should not be used directly by an application developer. Instead, use\n * {@link Location}.\n *\n * `PlatformLocation` encapsulates all calls to DOM APIs, which allows the Router to be\n * platform-agnostic.\n * This means that we can have different implementation of `PlatformLocation` for the different\n * platforms that Angular supports. For example, `@angular/platform-browser` provides an\n * implementation specific to the browser environment, while `@angular/platform-server` provides\n * one suitable for use with server-side rendering.\n *\n * The `PlatformLocation` class is used directly by all implementations of {@link LocationStrategy}\n * when they need to interact with the DOM APIs like pushState, popState, etc.\n *\n * {@link LocationStrategy} in turn is used by the {@link Location} service which is used directly\n * by the {@link /api/router/Router Router} in order to navigate between routes. Since all interactions between\n * {@link /api/router/Router Router} /\n * {@link Location} / {@link LocationStrategy} and DOM APIs flow through the `PlatformLocation`\n * class, they are all platform-agnostic.\n *\n * @publicApi\n */\n@Injectable({providedIn: 'platform', useFactory: () => inject(BrowserPlatformLocation)})\nexport abstract class PlatformLocation {\n  abstract getBaseHrefFromDOM(): string;\n  abstract getState(): unknown;\n  /**\n   * Returns a function that, when executed, removes the `popstate` event handler.\n   */\n  abstract onPopState(fn: LocationChangeListener): VoidFunction;\n  /**\n   * Returns a function that, when executed, removes the `hashchange` event handler.\n   */\n  abstract onHashChange(fn: LocationChangeListener): VoidFunction;\n\n  abstract get href(): string;\n  abstract get protocol(): string;\n  abstract get hostname(): string;\n  abstract get port(): string;\n  abstract get pathname(): string;\n  abstract get search(): string;\n  abstract get hash(): string;\n\n  abstract replaceState(state: any, title: string, url: string): void;\n\n  abstract pushState(state: any, title: string, url: string): void;\n\n  abstract forward(): void;\n\n  abstract back(): void;\n\n  historyGo?(relativePosition: number): void {\n    throw new Error(ngDevMode ? 'Not implemented' : '');\n  }\n}\n\n/**\n * @description\n * Indicates when a location is initialized.\n *\n * @publicApi\n */\nexport const LOCATION_INITIALIZED = new InjectionToken<Promise<any>>(\n  typeof ngDevMode !== undefined && ngDevMode ? 'Location Initialized' : '',\n);\n\n/**\n * @description\n * A serializable version of the event from `onPopState` or `onHashChange`\n *\n * @publicApi\n */\nexport interface LocationChangeEvent {\n  type: string;\n  state: any;\n}\n\n/**\n * @publicApi\n */\nexport interface LocationChangeListener {\n  (event: LocationChangeEvent): any;\n}\n\n/**\n * `PlatformLocation` encapsulates all of the direct calls to platform APIs.\n * This class should not be used directly by an application developer. Instead, use\n * {@link Location}.\n *\n * @publicApi\n */\n@Injectable({\n  providedIn: 'platform',\n  useFactory: () => new BrowserPlatformLocation(),\n})\nexport class BrowserPlatformLocation extends PlatformLocation {\n  private _location: Location;\n  private _history: History;\n  private _doc = inject(DOCUMENT);\n\n  constructor() {\n    super();\n    this._location = window.location;\n    this._history = window.history;\n  }\n\n  override getBaseHrefFromDOM(): string {\n    return getDOM().getBaseHref(this._doc)!;\n  }\n\n  override onPopState(fn: LocationChangeListener): VoidFunction {\n    const window = getDOM().getGlobalEventTarget(this._doc, 'window');\n    window.addEventListener('popstate', fn, false);\n    return () => window.removeEventListener('popstate', fn);\n  }\n\n  override onHashChange(fn: LocationChangeListener): VoidFunction {\n    const window = getDOM().getGlobalEventTarget(this._doc, 'window');\n    window.addEventListener('hashchange', fn, false);\n    return () => window.removeEventListener('hashchange', fn);\n  }\n\n  override get href(): string {\n    return this._location.href;\n  }\n  override get protocol(): string {\n    return this._location.protocol;\n  }\n  override get hostname(): string {\n    return this._location.hostname;\n  }\n  override get port(): string {\n    return this._location.port;\n  }\n  override get pathname(): string {\n    return this._location.pathname;\n  }\n  override get search(): string {\n    return this._location.search;\n  }\n  override get hash(): string {\n    return this._location.hash;\n  }\n  override set pathname(newPath: string) {\n    this._location.pathname = newPath;\n  }\n\n  override pushState(state: any, title: string, url: string): void {\n    this._history.pushState(state, title, url);\n  }\n\n  override replaceState(state: any, title: string, url: string): void {\n    this._history.replaceState(state, title, url);\n  }\n\n  override forward(): void {\n    this._history.forward();\n  }\n\n  override back(): void {\n    this._history.back();\n  }\n\n  override historyGo(relativePosition: number = 0): void {\n    this._history.go(relativePosition);\n  }\n\n  override getState(): unknown {\n    return this._history.state;\n  }\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.dev/license\n */\n\n/**\n * Joins two parts of a URL with a slash if needed.\n *\n * @param start  URL string\n * @param end    URL string\n *\n *\n * @returns The joined URL string.\n */\nexport function joinWithSlash(start: string, end: string) {\n  // If `start` is an empty string, return `end` as the result.\n  if (!start) return end;\n  // If `end` is an empty string, return `start` as the result.\n  if (!end) return start;\n  // If `start` ends with a slash, remove the leading slash from `end`.\n  if (start.endsWith('/')) {\n    return end.startsWith('/') ? start + end.slice(1) : start + end;\n  }\n  // If `start` doesn't end with a slash, add one if `end` doesn't start with a slash.\n  return end.startsWith('/') ? start + end : `${start}/${end}`;\n}\n\n/**\n * Removes a trailing slash from a URL string if needed.\n * Looks for the first occurrence of either `#`, `?`, or the end of the\n * line as `/` characters and removes the trailing slash if one exists.\n *\n * @param url URL string.\n *\n * @returns The URL string, modified if needed.\n */\nexport function stripTrailingSlash(url: string): string {\n  // Find the index of the first occurrence of `#`, `?`, or the end of the string.\n  // This marks the start of the query string, fragment, or the end of the URL path.\n  const pathEndIdx = url.search(/#|\\?|$/);\n  // Check if the character before `pathEndIdx` is a trailing slash.\n  // If it is, remove the trailing slash and return the modified URL.\n  // Otherwise, return the URL as is.\n  return url[pathEndIdx - 1] === '/' ? url.slice(0, pathEndIdx - 1) + url.slice(pathEndIdx) : url;\n}\n\n/**\n * Normalizes URL parameters by prepending with `?` if needed.\n *\n * @param  params String of URL parameters.\n *\n * @returns The normalized URL parameters string.\n */\nexport function normalizeQueryParams(params: string): string {\n  return params && params[0] !== '?' ? `?${params}` : params;\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.dev/license\n */\n\nimport {\n  DOCUMENT,\n  Inject,\n  inject,\n  Injectable,\n  InjectionToken,\n  OnDestroy,\n  Optional,\n} from '@angular/core';\n\nimport {LocationChangeListener, PlatformLocation} from './platform_location';\nimport {joinWithSlash, normalizeQueryParams} from './util';\n\n/**\n * Enables the `Location` service to read route state from the browser's URL.\n * Angular provides two strategies:\n * `HashLocationStrategy` and `PathLocationStrategy`.\n *\n * Applications should use the `Router` or `Location` services to\n * interact with application route state.\n *\n * For instance, `HashLocationStrategy` produces URLs like\n * <code class=\"no-auto-link\">http://example.com/#/foo</code>,\n * and `PathLocationStrategy` produces\n * <code class=\"no-auto-link\">http://example.com/foo</code> as an equivalent URL.\n *\n * See these two classes for more.\n *\n * @publicApi\n */\n@Injectable({providedIn: 'root', useFactory: () => inject(PathLocationStrategy)})\nexport abstract class LocationStrategy {\n  abstract path(includeHash?: boolean): string;\n  abstract prepareExternalUrl(internal: string): string;\n  abstract getState(): unknown;\n  abstract pushState(state: any, title: string, url: string, queryParams: string): void;\n  abstract replaceState(state: any, title: string, url: string, queryParams: string): void;\n  abstract forward(): void;\n  abstract back(): void;\n  historyGo?(relativePosition: number): void {\n    throw new Error(ngDevMode ? 'Not implemented' : '');\n  }\n  abstract onPopState(fn: LocationChangeListener): void;\n  abstract getBaseHref(): string;\n}\n\n/**\n * A predefined DI token for the base href\n * to be used with the `PathLocationStrategy`.\n * The base href is the URL prefix that should be preserved when generating\n * and recognizing URLs.\n *\n * @usageNotes\n *\n * The following example shows how to use this token to configure the root app injector\n * with a base href value, so that the DI framework can supply the dependency anywhere in the app.\n *\n * ```ts\n * import {NgModule} from '@angular/core';\n * import {APP_BASE_HREF} from '@angular/common';\n *\n * @NgModule({\n *   providers: [{provide: APP_BASE_HREF, useValue: '/my/app'}]\n * })\n * class AppModule {}\n * ```\n *\n * @publicApi\n */\nexport const APP_BASE_HREF = new InjectionToken<string>(\n  typeof ngDevMode !== undefined && ngDevMode ? 'appBaseHref' : '',\n);\n\n/**\n * @description\n * A {@link LocationStrategy} used to configure the {@link Location} service to\n * represent its state in the\n * [path](https://en.wikipedia.org/wiki/Uniform_Resource_Locator#Syntax) of the\n * browser's URL.\n *\n * If you're using `PathLocationStrategy`, you may provide a {@link APP_BASE_HREF}\n * or add a `<base href>` element to the document to override the default.\n *\n * For instance, if you provide an `APP_BASE_HREF` of `'/my/app/'` and call\n * `location.go('/foo')`, the browser's URL will become\n * `example.com/my/app/foo`. To ensure all relative URIs resolve correctly,\n * the `<base href>` and/or `APP_BASE_HREF` should end with a `/`.\n *\n * Similarly, if you add `<base href='/my/app/'/>` to the document and call\n * `location.go('/foo')`, the browser's URL will become\n * `example.com/my/app/foo`.\n *\n * Note that when using `PathLocationStrategy`, neither the query nor\n * the fragment in the `<base href>` will be preserved, as outlined\n * by the [RFC](https://tools.ietf.org/html/rfc3986#section-5.2.2).\n *\n * @usageNotes\n *\n * ### Example\n *\n * {@example common/location/ts/path_location_component.ts region='LocationComponent'}\n *\n * @publicApi\n */\n@Injectable({providedIn: 'root'})\nexport class PathLocationStrategy extends LocationStrategy implements OnDestroy {\n  private _baseHref: string;\n  private _removeListenerFns: (() => void)[] = [];\n\n  constructor(\n    private _platformLocation: PlatformLocation,\n    @Optional() @Inject(APP_BASE_HREF) href?: string,\n  ) {\n    super();\n\n    this._baseHref =\n      href ??\n      this._platformLocation.getBaseHrefFromDOM() ??\n      inject(DOCUMENT).location?.origin ??\n      '';\n  }\n\n  /** @docs-private */\n  ngOnDestroy(): void {\n    while (this._removeListenerFns.length) {\n      this._removeListenerFns.pop()!();\n    }\n  }\n\n  override onPopState(fn: LocationChangeListener): void {\n    this._removeListenerFns.push(\n      this._platformLocation.onPopState(fn),\n      this._platformLocation.onHashChange(fn),\n    );\n  }\n\n  override getBaseHref(): string {\n    return this._baseHref;\n  }\n\n  override prepareExternalUrl(internal: string): string {\n    return joinWithSlash(this._baseHref, internal);\n  }\n\n  override path(includeHash: boolean = false): string {\n    const pathname =\n      this._platformLocation.pathname + normalizeQueryParams(this._platformLocation.search);\n    const hash = this._platformLocation.hash;\n    return hash && includeHash ? `${pathname}${hash}` : pathname;\n  }\n\n  override pushState(state: any, title: string, url: string, queryParams: string) {\n    const externalUrl = this.prepareExternalUrl(url + normalizeQueryParams(queryParams));\n    this._platformLocation.pushState(state, title, externalUrl);\n  }\n\n  override replaceState(state: any, title: string, url: string, queryParams: string) {\n    const externalUrl = this.prepareExternalUrl(url + normalizeQueryParams(queryParams));\n    this._platformLocation.replaceState(state, title, externalUrl);\n  }\n\n  override forward(): void {\n    this._platformLocation.forward();\n  }\n\n  override back(): void {\n    this._platformLocation.back();\n  }\n\n  override getState(): unknown {\n    return this._platformLocation.getState();\n  }\n\n  override historyGo(relativePosition: number = 0): void {\n    this._platformLocation.historyGo?.(relativePosition);\n  }\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.dev/license\n */\n\nimport {Injectable, OnDestroy, ɵɵinject} from '@angular/core';\nimport {Subject, SubscriptionLike} from 'rxjs';\n\nimport {LocationStrategy} from './location_strategy';\nimport {joinWithSlash, normalizeQueryParams, stripTrailingSlash} from './util';\n\n/** @publicApi */\nexport interface PopStateEvent {\n  pop?: boolean;\n  state?: any;\n  type?: string;\n  url?: string;\n}\n\n/**\n * @description\n *\n * A service that applications can use to interact with a browser's URL.\n *\n * Depending on the `LocationStrategy` used, `Location` persists\n * to the URL's path or the URL's hash segment.\n *\n * @usageNotes\n *\n * It's better to use the `Router.navigate()` service to trigger route changes. Use\n * `Location` only if you need to interact with or create normalized URLs outside of\n * routing.\n *\n * `Location` is responsible for normalizing the URL against the application's base href.\n * A normalized URL is absolute from the URL host, includes the application's base href, and has no\n * trailing slash:\n * - `/my/app/user/123` is normalized\n * - `my/app/user/123` **is not** normalized\n * - `/my/app/user/123/` **is not** normalized\n *\n * ### Example\n *\n * {@example common/location/ts/path_location_component.ts region='LocationComponent'}\n *\n * @publicApi\n */\n@Injectable({\n  providedIn: 'root',\n  // See #23917\n  useFactory: createLocation,\n})\nexport class Location implements OnDestroy {\n  /** @internal */\n  _subject = new Subject<PopStateEvent>();\n  /** @internal */\n  _basePath: string;\n  /** @internal */\n  _locationStrategy: LocationStrategy;\n  /** @internal */\n  _urlChangeListeners: ((url: string, state: unknown) => void)[] = [];\n  /** @internal */\n  _urlChangeSubscription: SubscriptionLike | null = null;\n\n  constructor(locationStrategy: LocationStrategy) {\n    this._locationStrategy = locationStrategy;\n    const baseHref = this._locationStrategy.getBaseHref();\n    // Note: This class's interaction with base HREF does not fully follow the rules\n    // outlined in the spec https://www.freesoft.org/CIE/RFC/1808/18.htm.\n    // Instead of trying to fix individual bugs with more and more code, we should\n    // investigate using the URL constructor and providing the base as a second\n    // argument.\n    // https://developer.mozilla.org/en-US/docs/Web/API/URL/URL#parameters\n    this._basePath = _stripOrigin(stripTrailingSlash(_stripIndexHtml(baseHref)));\n    this._locationStrategy.onPopState((ev) => {\n      this._subject.next({\n        'url': this.path(true),\n        'pop': true,\n        'state': ev.state,\n        'type': ev.type,\n      });\n    });\n  }\n\n  /** @docs-private */\n  ngOnDestroy(): void {\n    this._urlChangeSubscription?.unsubscribe();\n    this._urlChangeListeners = [];\n  }\n\n  /**\n   * Normalizes the URL path for this location.\n   *\n   * @param includeHash True to include an anchor fragment in the path.\n   *\n   * @returns The normalized URL path.\n   */\n  // TODO: vsavkin. Remove the boolean flag and always include hash once the deprecated router is\n  // removed.\n  path(includeHash: boolean = false): string {\n    return this.normalize(this._locationStrategy.path(includeHash));\n  }\n\n  /**\n   * Reports the current state of the location history.\n   * @returns The current value of the `history.state` object.\n   */\n  getState(): unknown {\n    return this._locationStrategy.getState();\n  }\n\n  /**\n   * Normalizes the given path and compares to the current normalized path.\n   *\n   * @param path The given URL path.\n   * @param query Query parameters.\n   *\n   * @returns True if the given URL path is equal to the current normalized path, false\n   * otherwise.\n   */\n  isCurrentPathEqualTo(path: string, query: string = ''): boolean {\n    return this.path() == this.normalize(path + normalizeQueryParams(query));\n  }\n\n  /**\n   * Normalizes a URL path by stripping any trailing slashes.\n   *\n   * @param url String representing a URL.\n   *\n   * @returns The normalized URL string.\n   */\n  normalize(url: string): string {\n    return Location.stripTrailingSlash(_stripBasePath(this._basePath, _stripIndexHtml(url)));\n  }\n\n  /**\n   * Normalizes an external URL path.\n   * If the given URL doesn't begin with a leading slash (`'/'`), adds one\n   * before normalizing. Adds a hash if `HashLocationStrategy` is\n   * in use, or the `APP_BASE_HREF` if the `PathLocationStrategy` is in use.\n   *\n   * @param url String representing a URL.\n   *\n   * @returns  A normalized platform-specific URL.\n   */\n  prepareExternalUrl(url: string): string {\n    if (url && url[0] !== '/') {\n      url = '/' + url;\n    }\n    return this._locationStrategy.prepareExternalUrl(url);\n  }\n\n  // TODO: rename this method to pushState\n  /**\n   * Changes the browser's URL to a normalized version of a given URL, and pushes a\n   * new item onto the platform's history.\n   *\n   * @param path  URL path to normalize.\n   * @param query Query parameters.\n   * @param state Location history state.\n   *\n   */\n  go(path: string, query: string = '', state: any = null): void {\n    this._locationStrategy.pushState(state, '', path, query);\n    this._notifyUrlChangeListeners(\n      this.prepareExternalUrl(path + normalizeQueryParams(query)),\n      state,\n    );\n  }\n\n  /**\n   * Changes the browser's URL to a normalized version of the given URL, and replaces\n   * the top item on the platform's history stack.\n   *\n   * @param path  URL path to normalize.\n   * @param query Query parameters.\n   * @param state Location history state.\n   */\n  replaceState(path: string, query: string = '', state: any = null): void {\n    this._locationStrategy.replaceState(state, '', path, query);\n    this._notifyUrlChangeListeners(\n      this.prepareExternalUrl(path + normalizeQueryParams(query)),\n      state,\n    );\n  }\n\n  /**\n   * Navigates forward in the platform's history.\n   */\n  forward(): void {\n    this._locationStrategy.forward();\n  }\n\n  /**\n   * Navigates back in the platform's history.\n   */\n  back(): void {\n    this._locationStrategy.back();\n  }\n\n  /**\n   * Navigate to a specific page from session history, identified by its relative position to the\n   * current page.\n   *\n   * @param relativePosition  Position of the target page in the history relative to the current\n   *     page.\n   * A negative value moves backwards, a positive value moves forwards, e.g. `location.historyGo(2)`\n   * moves forward two pages and `location.historyGo(-2)` moves back two pages. When we try to go\n   * beyond what's stored in the history session, we stay in the current page. Same behaviour occurs\n   * when `relativePosition` equals 0.\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/History_API#Moving_to_a_specific_point_in_history\n   */\n  historyGo(relativePosition: number = 0): void {\n    this._locationStrategy.historyGo?.(relativePosition);\n  }\n\n  /**\n   * Registers a URL change listener. Use to catch updates performed by the Angular\n   * framework that are not detectible through \"popstate\" or \"hashchange\" events.\n   *\n   * @param fn The change handler function, which take a URL and a location history state.\n   * @returns A function that, when executed, unregisters a URL change listener.\n   */\n  onUrlChange(fn: (url: string, state: unknown) => void): VoidFunction {\n    this._urlChangeListeners.push(fn);\n\n    this._urlChangeSubscription ??= this.subscribe((v) => {\n      this._notifyUrlChangeListeners(v.url, v.state);\n    });\n\n    return () => {\n      const fnIndex = this._urlChangeListeners.indexOf(fn);\n      this._urlChangeListeners.splice(fnIndex, 1);\n\n      if (this._urlChangeListeners.length === 0) {\n        this._urlChangeSubscription?.unsubscribe();\n        this._urlChangeSubscription = null;\n      }\n    };\n  }\n\n  /** @internal */\n  _notifyUrlChangeListeners(url: string = '', state: unknown) {\n    this._urlChangeListeners.forEach((fn) => fn(url, state));\n  }\n\n  /**\n   * Subscribes to the platform's `popState` events.\n   *\n   * Note: `Location.go()` does not trigger the `popState` event in the browser. Use\n   * `Location.onUrlChange()` to subscribe to URL changes instead.\n   *\n   * @param value Event that is triggered when the state history changes.\n   * @param exception The exception to throw.\n   *\n   * @see [onpopstate](https://developer.mozilla.org/en-US/docs/Web/API/WindowEventHandlers/onpopstate)\n   *\n   * @returns Subscribed events.\n   */\n  subscribe(\n    onNext: (value: PopStateEvent) => void,\n    onThrow?: ((exception: any) => void) | null,\n    onReturn?: (() => void) | null,\n  ): SubscriptionLike {\n    return this._subject.subscribe({\n      next: onNext,\n      error: onThrow ?? undefined,\n      complete: onReturn ?? undefined,\n    });\n  }\n\n  /**\n   * Normalizes URL parameters by prepending with `?` if needed.\n   *\n   * @param  params String of URL parameters.\n   *\n   * @returns The normalized URL parameters string.\n   */\n  public static normalizeQueryParams: (params: string) => string = normalizeQueryParams;\n\n  /**\n   * Joins two parts of a URL with a slash if needed.\n   *\n   * @param start  URL string\n   * @param end    URL string\n   *\n   *\n   * @returns The joined URL string.\n   */\n  public static joinWithSlash: (start: string, end: string) => string = joinWithSlash;\n\n  /**\n   * Removes a trailing slash from a URL string if needed.\n   * Looks for the first occurrence of either `#`, `?`, or the end of the\n   * line as `/` characters and removes the trailing slash if one exists.\n   *\n   * @param url URL string.\n   *\n   * @returns The URL string, modified if needed.\n   */\n  public static stripTrailingSlash: (url: string) => string = stripTrailingSlash;\n}\n\nexport function createLocation() {\n  return new Location(ɵɵinject(LocationStrategy as any));\n}\n\nfunction _stripBasePath(basePath: string, url: string): string {\n  if (!basePath || !url.startsWith(basePath)) {\n    return url;\n  }\n  const strippedUrl = url.substring(basePath.length);\n  if (strippedUrl === '' || ['/', ';', '?', '#'].includes(strippedUrl[0])) {\n    return strippedUrl;\n  }\n  return url;\n}\n\nfunction _stripIndexHtml(url: string): string {\n  return url.replace(/\\/index.html$/, '');\n}\n\nfunction _stripOrigin(baseHref: string): string {\n  // DO NOT REFACTOR! Previously, this check looked like this:\n  // `/^(https?:)?\\/\\//.test(baseHref)`, but that resulted in\n  // syntactically incorrect code after Closure Compiler minification.\n  // This was likely caused by a bug in Closure Compiler, but\n  // for now, the check is rewritten to use `new RegExp` instead.\n  const isAbsoluteUrl = new RegExp('^(https?:)?//').test(baseHref);\n  if (isAbsoluteUrl) {\n    const [, pathname] = baseHref.split(/\\/\\/[^\\/]+/);\n    return pathname;\n  }\n  return baseHref;\n}\n"],"names":["_DOM","getDOM","setRootDomAdapter","adapter","DomAdapter","PlatformLocation","historyGo","relativePosition","Error","ngDevMode","deps","target","i0","ɵɵFactoryTarget","Injectable","providedIn","useFactory","inject","BrowserPlatformLocation","decorators","args","LOCATION_INITIALIZED","InjectionToken","undefined","_location","_history","_doc","DOCUMENT","constructor","window","location","history","getBaseHrefFromDOM","getBaseHref","onPopState","fn","getGlobalEventTarget","addEventListener","removeEventListener","onHashChange","href","protocol","hostname","port","pathname","search","hash","newPath","pushState","state","title","url","replaceState","forward","back","go","getState","joinWithSlash","start","end","endsWith","startsWith","slice","stripTrailingSlash","pathEndIdx","normalizeQueryParams","params","LocationStrategy","PathLocationStrategy","APP_BASE_HREF","_platformLocation","_baseHref","_removeListenerFns","origin","ngOnDestroy","length","pop","push","prepareExternalUrl","internal","path","includeHash","queryParams","externalUrl","ɵfac","ɵɵngDeclareFactory","minVersion","version","ngImport","type","optional","ɵprov","ɵɵngDeclareInjectable","Optional","Inject","Location","_subject","Subject","_basePath","_locationStrategy","_urlChangeListeners","_urlChangeSubscription","locationStrategy","baseHref","_stripOrigin","_stripIndexHtml","ev","next","unsubscribe","normalize","isCurrentPathEqualTo","query","_stripBasePath","_notifyUrlChangeListeners","onUrlChange","subscribe","v","fnIndex","indexOf","splice","forEach","onNext","onThrow","onReturn","error","complete","token","i1","createLocation","ɵɵinject","basePath","strippedUrl","substring","includes","replace","isAbsoluteUrl","RegExp","test","split"],"mappings":"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"}