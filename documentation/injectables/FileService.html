<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>adacad documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	   <link rel="stylesheet" href="../styles/style.css">
        <link rel="stylesheet" href="../styles/dark.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top d-block d-sm-none">
            <a href="../" class="navbar-brand">adacad documentation</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content injectable">
                   <div class="content-data">








<ol class="breadcrumb">
  <li class="breadcrumb-item">Injectables</li>
  <li class="breadcrumb-item" >FileService</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="nav-item">
            <a href="#info" 
                class="nav-link"
                class="nav-link active"
                role="tab" id="info-tab" data-bs-toggle="tab" data-link="info">Info</a>
        </li>
        <li class="nav-item">
            <a href="#source" 
                class="nav-link"
                
                role="tab" id="source-tab" data-bs-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/app/core/provider/file.service.ts</code>
        </p>


            <p class="comment">
                <h3>Description</h3>
            </p>
            <p class="comment">
                <p>this service handles the processing of data from an uplaoded file.
It is called from the InitModal when the user uploads data.
The principle sholud be that you can load any .ada file into
mixer or weaver, no matter what.</p>

            </p>



            <section data-compodoc="block-index">
    <h3 id="index">Index</h3>
    <table class="table table-sm table-bordered index-table">
        <tbody>
                <tr>
                    <td class="col-md-4">
                        <h6><b>Properties</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                <a href="#loader" >loader</a>
                            </li>
                            <li>
                                <a href="#saver" >saver</a>
                            </li>
                            <li>
                                <a href="#status" >status</a>
                            </li>
                        </ul>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <h6><b>Methods</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                <a href="#clearAll" >clearAll</a>
                            </li>
                        </ul>
                    </td>
                </tr>





        </tbody>
    </table>
</section>

            <section data-compodoc="block-constructor">
    <h3 id="constructor">Constructor</h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
<code>constructor(tree: <a href="../injectables/TreeService.html" target="_self">TreeService</a>, ns: <a href="../injectables/NotesService.html" target="_self">NotesService</a>, ms: <a href="../injectables/MaterialsService.html" target="_self">MaterialsService</a>, ss: <a href="../injectables/SystemsService.html" target="_self">SystemsService</a>, vs: <a href="../injectables/VersionService.html" target="_self">VersionService</a>, ws: <a href="../injectables/WorkspaceService.html" target="_self">WorkspaceService</a>, files: <a href="../injectables/FilesystemService.html" target="_self">FilesystemService</a>)</code>
                    </td>
                </tr>
                        <tr>
                            <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="32" class="link-to-prism">src/app/core/provider/file.service.ts:32</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                            <div>
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>tree</td>
                                                  
                                                        <td>
                                                                        <code><a href="../injectables/TreeService.html" target="_self" >TreeService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>ns</td>
                                                  
                                                        <td>
                                                                        <code><a href="../injectables/NotesService.html" target="_self" >NotesService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>ms</td>
                                                  
                                                        <td>
                                                                        <code><a href="../injectables/MaterialsService.html" target="_self" >MaterialsService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>ss</td>
                                                  
                                                        <td>
                                                                        <code><a href="../injectables/SystemsService.html" target="_self" >SystemsService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>vs</td>
                                                  
                                                        <td>
                                                                        <code><a href="../injectables/VersionService.html" target="_self" >VersionService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>ws</td>
                                                  
                                                        <td>
                                                                        <code><a href="../injectables/WorkspaceService.html" target="_self" >WorkspaceService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>files</td>
                                                  
                                                        <td>
                                                                        <code><a href="../injectables/FilesystemService.html" target="_self" >FilesystemService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                    </td>
                </tr>
            </tbody>
        </table>
</section>

            <section data-compodoc="block-methods">
    
    <h3 id="methods">
        Methods
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="clearAll"></a>
                    <span class="name">
                        <span ><b>clearAll</b></span>
                        <a href="#clearAll"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>clearAll()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="832"
                            class="link-to-prism">src/app/core/provider/file.service.ts:832</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</section>
            <section data-compodoc="block-properties">
    
    <h3 id="inputs">
        Properties
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="loader"></a>
                    <span class="name">
                        <span ><b>loader</b></span>
                        <a href="#loader"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="../interfaces/Fileloader.html" target="_self" >Fileloader</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>null</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="31" class="link-to-prism">src/app/core/provider/file.service.ts:31</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="saver"></a>
                    <span class="name">
                        <span ><b>saver</b></span>
                        <a href="#saver"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="../interfaces/FileSaver.html" target="_self" >FileSaver</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>null</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="32" class="link-to-prism">src/app/core/provider/file.service.ts:32</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="status"></a>
                    <span class="name">
                        <span ><b>status</b></span>
                        <a href="#status"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="../interfaces/StatusMessage.html" target="_self" >Array&lt;StatusMessage&gt;</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>[]</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="30" class="link-to-prism">src/app/core/provider/file.service.ts:30</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
</section>

    </div>


    <div class="tab-pane fade  tab-source-code" id="source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import { Injectable } from &#x27;@angular/core&#x27;;
import { Draft, DraftNodeProxy, Fileloader, FileObj, FileSaver, LoadResponse, Loom, LoomSettings, OpComponentProxy, SaveObj, StatusMessage } from &#x27;../model/datatypes&#x27;;
import { initDraftWithParams, loadDraftFromFile } from &#x27;../model/drafts&#x27;;
import { getLoomUtilByType, loadLoomFromFile } from &#x27;../model/looms&#x27;;
import utilInstance from &#x27;../model/util&#x27;;
import { FilesystemService } from &#x27;./filesystem.service&#x27;;
import { MaterialsService } from &#x27;./materials.service&#x27;;
import { NotesService } from &#x27;./notes.service&#x27;;
import { SystemsService } from &#x27;./systems.service&#x27;;
import { TreeService } from &#x27;./tree.service&#x27;;
import { VersionService } from &#x27;./version.service&#x27;;
import { WorkspaceService } from &#x27;./workspace.service&#x27;;




/**
 * this service handles the processing of data from an uplaoded file. 
 * It is called from the InitModal when the user uploads data. 
 * The principle sholud be that you can load any .ada file into 
 * mixer or weaver, no matter what. 
 */

@Injectable({
  providedIn: &#x27;root&#x27;
})
export class FileService {


  status: Array&lt;StatusMessage&gt; &#x3D; [];
  loader: Fileloader &#x3D; null;
  saver: FileSaver &#x3D; null;

  constructor(
    private tree: TreeService, 
    private ns: NotesService,
    private ms: MaterialsService,
    private ss: SystemsService,
    private vs: VersionService,
    private ws: WorkspaceService,
    private files: FilesystemService) { 
  
  this.status &#x3D; [
    {id: 0, message: &#x27;success&#x27;, success: true},
    {id: 1, message: &#x27;incompatable type&#x27;, success: false}
  ];


  /**
   * file loader loads files of different types, 
   * for .adaFiles, it gets the data listed in SaveObj and begins to process it
   */
  const dloader: Fileloader &#x3D; {

     ada: async (filename: string, id: number, desc: string, data: any) : Promise&lt;LoadResponse&gt; &#x3D;&gt; {
      if(desc &#x3D;&#x3D;&#x3D; undefined) desc &#x3D; &quot;&quot;
      if(filename &#x3D;&#x3D; undefined) filename &#x3D; &#x27;draft&#x27; 
      if(id &#x3D;&#x3D;&#x3D; -1) id &#x3D; this.files.generateFileId();
      
      let draft_nodes: Array&lt;DraftNodeProxy&gt; &#x3D; [];
      //let looms: Array&lt;Loom&gt; &#x3D; [];
      let ops: Array&lt;OpComponentProxy&gt; &#x3D; [];
      let version &#x3D; &quot;0.0.0&quot;;
      if(id &#x3D;&#x3D;&#x3D; -1) id &#x3D; this.files.generateFileId();

      
      this.clearAll();

      if(data &#x3D;&#x3D; undefined) return Promise.reject(&quot; there is no data&quot;)

      if(data.version !&#x3D;&#x3D; undefined) version &#x3D; data.version;

      if(data.workspace !&#x3D;&#x3D; undefined){
        this.ws.loadWorkspace(data.workspace);
      }else{
        this.ws.initDefaultWorkspace();
      }

      if(data.shuttles !&#x3D;&#x3D; undefined){
        this.ms.overloadShuttles(data.shuttles);

      }else{
        if(data.materials !&#x3D;&#x3D; undefined){
          this.ms.overloadShuttles(data.materials); 
        }
      }

      const flips_required &#x3D; utilInstance.getFlips(3, this.ws.selected_origin_option);

      const loom_elements &#x3D; []
      const loom_fns &#x3D; []
      const draft_elements &#x3D; [];
      const draft_fns &#x3D; [];

      if(!utilInstance.sameOrNewerVersion(version, &#x27;3.4.9&#x27;)){
        data.nodes.forEach(node &#x3D;&gt; {
          if(node.bounds !&#x3D;&#x3D; undefined) node.topleft &#x3D; node.bounds.topleft;
        })
      }

      if(utilInstance.sameOrNewerVersion(version, &#x27;3.4.5&#x27;)){
        draft_nodes &#x3D; data.draft_nodes;

        if(draft_nodes &#x3D;&#x3D; undefined) draft_nodes &#x3D; [];

        if(draft_nodes !&#x3D;&#x3D; undefined){
          draft_nodes.forEach(el &#x3D;&gt; {
            if(el.draft !&#x3D;&#x3D; null &amp;&amp; el.draft !&#x3D;&#x3D; undefined){
              draft_fns.push(loadDraftFromFile(el.draft, flips_required, version));
              draft_elements.push(el);
            }

            if(el.loom !&#x3D;&#x3D; null &amp;&amp; el.loom !&#x3D;&#x3D; undefined){
              loom_fns.push(loadLoomFromFile(el.loom, flips_required, version));
              loom_elements.push(el);
            }
        
          });
       }
        
      }else{

        //handle old file types that didn&#x27;t separate out drafts
        if(data.drafts &#x3D;&#x3D;&#x3D; undefined) data.drafts &#x3D; [data];
      

        data.nodes
        .filter(el &#x3D;&gt; el.type &#x3D;&#x3D;&#x3D; &#x27;draft&#x27;)
        .forEach(async node &#x3D;&gt; {
          const loom &#x3D; data.looms.find(loom &#x3D;&gt; loom.draft_id &#x3D;&#x3D;&#x3D; node.node_id);
          const draft &#x3D; data.drafts.find(draft &#x3D;&gt; draft.id &#x3D;&#x3D;&#x3D; node.node_id);

          const dn: DraftNodeProxy &#x3D; {
            node_id: (node &#x3D;&#x3D;&#x3D; undefined) ? -1 : node.node_id,
            draft_id: node.node_id,
            draft_name: node.draft_name,
            draft:draft,
            draft_visible: (node &#x3D;&#x3D;&#x3D; undefined) ? true : node.draft_visible,
            loom:null,
            loom_settings: (loom &#x3D;&#x3D;&#x3D; undefined) 
              ? {type: this.ws.type, epi: this.ws.epi, units: this.ws.units, frames: this.ws.min_frames, treadles: this.ws.min_treadles } 
              : {type: loom.type, epi: loom.epi, units: loom.units, frames: loom.min_frames, treadles: loom.min_treadles},
            render_colors: (node &#x3D;&#x3D;&#x3D; undefined || node.render_colors &#x3D;&#x3D;&#x3D; undefined) ? true : node.render_colors,
          }

          draft_nodes.push(dn);

          if(draft !&#x3D;&#x3D; null &amp;&amp; draft !&#x3D;&#x3D; undefined){
            draft_fns.push(loadDraftFromFile(draft, flips_required, version));
            draft_elements.push(dn);
          }

          if(loom !&#x3D;&#x3D; null &amp;&amp; loom !&#x3D;&#x3D; undefined){
            loom_fns.push(loadLoomFromFile(loom, flips_required, version));
            loom_elements.push(dn);
          }


        });

        //in previous versions drafts and looms were loaded separately
      }

      return Promise.all(draft_fns)
      .then( res &#x3D;&gt; {

          for(let i &#x3D; 0; i &lt; draft_elements.length; i++){
            draft_elements[i].draft &#x3D; res[i];
          }

      return Promise.all(loom_fns)
      })
      .then(res &#x3D;&gt; {

        for(let i &#x3D; 0; i &lt; loom_elements.length; i++){
          draft_elements[i].loom &#x3D; res[i];
        }
        
        draft_nodes
        .filter(el &#x3D;&gt; el.draft !&#x3D;&#x3D; null)
        .forEach(el &#x3D;&gt; {
          //scan the systems and add any that need to be added
          if(el.draft !&#x3D;&#x3D; null &amp;&amp; el.draft !&#x3D;&#x3D; undefined &amp;&amp; el.draft.rowSystemMapping !&#x3D;&#x3D; undefined){
            el.draft.rowSystemMapping.forEach(el &#x3D;&gt; {
              if(this.ss.getWeftSystem(el) &#x3D;&#x3D;&#x3D; undefined) this.ss.addWeftSystemFromId(el);
            });
          }  
  
          //scan the systems and add any that need to be added
          if(el.draft !&#x3D;&#x3D; null &amp;&amp; el.draft !&#x3D;&#x3D; undefined &amp;&amp; el.draft.colSystemMapping !&#x3D;&#x3D; undefined){
            el.draft.colSystemMapping.forEach(el &#x3D;&gt; {
              if(this.ss.getWarpSystem(el) &#x3D;&#x3D;&#x3D; undefined) this.ss.addWarpSystemFromId(el);
            });
          }  
        })
      
    
        if(data.ops !&#x3D;&#x3D; undefined){
          ops &#x3D; data.ops.map(data &#x3D;&gt; {
            const op: OpComponentProxy &#x3D; {
              node_id: data.node_id,
              name: data.name,
              params: data.params,
              inlets: (data.inlets &#x3D;&#x3D;&#x3D; undefined) ? [0] : data.inlets 
            }
            return op;
          });
        }
        
          const envt: FileObj &#x3D; {
            version: data.version,
            workspace: data.workspace,
            filename: filename,
            nodes: (data.nodes &#x3D;&#x3D;&#x3D; undefined) ? [] : data.nodes,
            treenodes: (data.tree &#x3D;&#x3D;&#x3D; undefined) ? [] : data.tree,
            draft_nodes: draft_nodes,
            notes: (data.notes &#x3D;&#x3D;&#x3D; undefined) ? [] : data.notes,
            ops: ops,
            scale: (data.scale &#x3D;&#x3D;&#x3D; undefined) ? 5 : data.scale,
          }
    
          return Promise.resolve({data: envt, name: filename, desc: desc, status: 0, id:id }); 
  
        }
      )



    

    }, 

    paste: async (data: any) : Promise&lt;LoadResponse&gt; &#x3D;&gt; {
      
      let draft_nodes: Array&lt;DraftNodeProxy&gt; &#x3D; [];
      let ops: Array&lt;OpComponentProxy&gt; &#x3D; [];
      let version &#x3D; &quot;0.0.0&quot;;
      
      // this.clearAll();

     

      if(data.shuttles !&#x3D;&#x3D; undefined){
       //handle shuttles here
      }

      const flips_required &#x3D; utilInstance.getFlips(this.ws.selected_origin_option, 3);

    
      const loom_elements &#x3D; []
      const loom_fns &#x3D; []
      const draft_elements &#x3D; [];
      const draft_fns &#x3D; [];

      draft_nodes &#x3D; data.draft_nodes;

      draft_nodes.forEach(el &#x3D;&gt; {
        if(el.draft !&#x3D;&#x3D; null &amp;&amp; el.draft !&#x3D;&#x3D; undefined){
          draft_fns.push(loadDraftFromFile(el.draft, flips_required, version));
          draft_elements.push(el);
        }

        if(el.loom !&#x3D;&#x3D; null &amp;&amp; el.loom !&#x3D;&#x3D; undefined){
          loom_fns.push(loadLoomFromFile(el.loom, flips_required, version));
          loom_elements.push(el);
        }
      });

      return Promise.all(draft_fns)
      .then( res &#x3D;&gt; {

          for(let i &#x3D; 0; i &lt; draft_elements.length; i++){
            draft_elements[i].draft &#x3D; res[i];
          }

      return Promise.all(loom_fns)
      })
      .then(res &#x3D;&gt; {

        for(let i &#x3D; 0; i &lt; loom_elements.length; i++){
          draft_elements[i].loom &#x3D; res[i];
        }
        
        draft_nodes
        .filter(el &#x3D;&gt; el.draft !&#x3D;&#x3D; null)
        .forEach(el &#x3D;&gt; {
          //scan the systems and add any that need to be added
          if(el.draft !&#x3D;&#x3D; null &amp;&amp; el.draft !&#x3D;&#x3D; undefined &amp;&amp; el.draft.rowSystemMapping !&#x3D;&#x3D; undefined){
            el.draft.rowSystemMapping.forEach(el &#x3D;&gt; {
              if(this.ss.getWeftSystem(el) &#x3D;&#x3D;&#x3D; undefined) this.ss.addWeftSystemFromId(el);
            });
          }  
  
          //scan the systems and add any that need to be added
          if(el.draft !&#x3D;&#x3D; null &amp;&amp; el.draft !&#x3D;&#x3D; undefined &amp;&amp; el.draft.colSystemMapping !&#x3D;&#x3D; undefined){
            el.draft.colSystemMapping.forEach(el &#x3D;&gt; {
              if(this.ss.getWarpSystem(el) &#x3D;&#x3D;&#x3D; undefined) this.ss.addWarpSystemFromId(el);
            });
          }  
        })
      
    
        if(data.ops !&#x3D;&#x3D; undefined){
          ops &#x3D; data.ops.map(data &#x3D;&gt; {
            const op: OpComponentProxy &#x3D; {
              node_id: data.node_id,
              name: data.name,
              params: data.params,
              inlets: (data.inlets &#x3D;&#x3D;&#x3D; undefined) ? [0] : data.inlets 
            }
            return op;
          });
        }
        
          const envt: FileObj &#x3D; {
            version: &#x27;0.0.0&#x27;,
            workspace: null,
            filename: &#x27;paste&#x27;,
            nodes: (data.nodes &#x3D;&#x3D;&#x3D; undefined) ? [] : data.nodes,
            treenodes: (data.tree &#x3D;&#x3D;&#x3D; undefined) ? [] : data.tree,
            draft_nodes: draft_nodes,
            notes:  [],
            ops: ops,
            scale: 5,
          }
    
          return Promise.resolve({data: envt, name: &#x27;paste&#x27;, desc: &#x27;a file represeting copied information&#x27;, status: 0, id:-1 }); 
  
        }
      )



    

    }, 

    // wif: async (filename: string, data: any) : Promise&lt;LoadResponse&gt; &#x3D;&gt; {
    //   this.clearAll();


    //   let drafts: Array&lt;Draft&gt; &#x3D; [];
    //   let looms: Array&lt;Loom&gt; &#x3D; [];
    //   let version &#x3D; &#x27;0.0.0&#x27;;
     
    //   var stringWithoutMetadata &#x3D; utilInstance.getSubstringAfter(&quot;CONTENTS&quot;, data);
    //   const warps:number &#x3D; utilInstance.getInt(&quot;Threads&quot;,utilInstance.getSubstringAfter(&quot;WARP]&quot;,stringWithoutMetadata));
    //   const wefts:number &#x3D; utilInstance.getInt(&quot;Threads&quot;,utilInstance.getSubstringAfter(&quot;WEFT]&quot;,stringWithoutMetadata));
    //   const pattern: Array&lt;Array&lt;Cell&gt;&gt; &#x3D; [];
      
    //   this.ns.resetNotes(); 

    //   for (var i &#x3D; 0; i &lt; wefts; i++) {
    //     pattern.push([]);
    //     for (var j &#x3D; 0; j &lt; warps; j++) {
    //       pattern[i].push(new Cell(null));
    //       pattern[i][j].setHeddle(false);
    //     }
    //   }

    //   const draft &#x3D; initDraft();
    //   draft.drawdown &#x3D; generateDrawdownWithPattern(pattern, warps, wefts);
    //   drafts.push(draft);
    //   draft.gen_name &#x3D; data.name;

    // let frames &#x3D; utilInstance.getInt(&quot;Shafts&quot;, data);
    // let treadles &#x3D; utilInstance.getInt(&quot;Treadles&quot;, data);
    
    // const loom:Loom &#x3D; new Loom(draft, &#x27;frame&#x27;, frames, treadles);
    // looms.push(loom);

    // // draft.loom.tieup &#x3D; []

    // // for (var i &#x3D; 0; i &lt; frames; i++) {
    // //   draft.loom.tieup.push([]);
    // //   for (var j &#x3D; 0; j &lt; treadles; j++) {
    // //     draft.loom.tieup[i].push(false);
    // //   }
    // // }

    // if (utilInstance.getBool(&quot;TREADLING&quot;, stringWithoutMetadata)) {
    //   var treadling &#x3D; utilInstance.getTreadling(stringWithoutMetadata, draft);
    //   loom.overloadTreadling(treadling, version, pattern.length);
    // }
    // if (utilInstance.getBool(&quot;THREADING&quot;, stringWithoutMetadata)) {
    //   var threading &#x3D; utilInstance.getThreading(stringWithoutMetadata, draft);
    //   loom.overloadThreading(threading);
    // }
    // if (utilInstance.getBool(&quot;TIEUP&quot;, data)) {
    //   var tieups &#x3D; utilInstance.getTieups(stringWithoutMetadata, draft);
    //   loom.overloadTieup(tieups);

    // }
    // if (utilInstance.getBool(&quot;COLOR TABLE&quot;,data)) {
    //   if (utilInstance.getString(&quot;Form&quot;, data) &#x3D;&#x3D;&#x3D; &quot;RGB&quot;) {
    //     let color_table: Array&lt;Shuttle&gt;  &#x3D; utilInstance.getColorTable(data);
    //     var shuttles &#x3D; color_table;

    //     /** TODO: Update this to add, not overwrite, shuttles */
    //     this.ms.overloadShuttles(shuttles);
    //     draft.overloadRowShuttleMapping(utilInstance.getRowToShuttleMapping(data, draft));
    //     draft.overloadColShuttleMapping(utilInstance.getColToShuttleMapping(data, draft));
    //   }
    // }

    // draft.recalculateDraft(tieups, treadling, threading);


    // const proxies &#x3D; this.tree.getNewDraftProxies(draft, []);

    
    // const f: FileObj &#x3D; {
    //   version: &#x27;na&#x27;,
    //   filename: filename,
    //   drafts: drafts,
    //   looms: looms,
    //   nodes: [proxies.node], 
    //   treenodes: [proxies.treenode],
    //   ops: [],
    //   scale: 5
    // }


    // return Promise.resolve({data: f ,status: 0});
    // },
    /**
     * takes in a jpg, creates as many drafts as there are unique colors in the image. 
     * @param data 
     * @returns 
     */
    // jpg: async (filename: string, data: any) : Promise&lt;LoadResponse&gt; &#x3D;&gt; {
    //   this.clearAll();

    //   let drafts: Array&lt;Draft&gt; &#x3D; [];
    //   let looms: Array&lt;Loom&gt; &#x3D; [];
    //   this.ns.resetNotes(); 

    //   let e &#x3D; data;
    //   const warps &#x3D; e.width;
    //   const wefts &#x3D; e.height;
  
    //   var img &#x3D; e.data;

    //   let hex_string: string &#x3D; &quot;&quot;;
    //   const img_as_hex: Array&lt;string&gt; &#x3D; [];
    //   img.forEach((el, ndx) &#x3D;&gt; {
    //     hex_string &#x3D; hex_string + el.toString(16);
    //     if(ndx % 4 &#x3D;&#x3D;&#x3D; 3){
    //       img_as_hex.push(hex_string);
    //       hex_string &#x3D; &quot;&quot;;
    //     }

    //   });


    //   //the color table is a unique list of all the colors in this image
    //   const seen: Array&lt;string&gt; &#x3D; [];
    //   const color_table: Array&lt;string&gt; &#x3D; img_as_hex.filter((el, ndx) &#x3D;&gt; {
    //     if(seen.find(seen &#x3D;&gt; seen &#x3D;&#x3D;&#x3D; el) &#x3D;&#x3D;&#x3D; undefined){
    //       seen.push(el);
    //       return true;
    //     }
    //   });
    //   console.log(&quot;color table&quot;, color_table);


    //   //create a draft for each color table
    //   color_table.forEach(color &#x3D;&gt; {
    //     const draft &#x3D; initDraft();
    //     draft.drawdown &#x3D; generateDrawdownWithPattern([[new Cell(false)]], warps, wefts);
    //     console.log(draft);
    //     img_as_hex.forEach((el, ndx)&#x3D;&gt;{
    //       const r: number &#x3D; Math.floor(ndx/warps);
    //       const c: number &#x3D; ndx % warps;
    //       if(el &#x3D;&#x3D;&#x3D; color) draft.drawdown[r][c].setHeddleUp();
    //       else draft.drawdown[r][c].unsetHeddle();
    //     });
    //     drafts.push(draft);
    //     const loom:Loom &#x3D; new Loom(draft, &#x27;jacquard&#x27;, 8, 10);
    //     looms.push(loom);
    //   })



  
    //   // for (var i&#x3D;0; i&lt; e.height; i++) {
    //   //   pattern.push([]);
    //   //   for (var j&#x3D;0; j&lt; e.width; j++) {
    //   //     var idx &#x3D; (i * 4 * warps) + (j * 4);
    //   //     var threshold &#x3D; (img[idx] + img[idx+1] + img[idx+2]);
    //   //     var alpha &#x3D; img[idx + 3];
  
    //   //     if (threshold &lt; 750 &amp;&amp; alpha !&#x3D; 0) {
    //   //       pattern[i].push(new Cell(true));
    //   //     } else {
    //   //       pattern[i].push(new Cell(false));
    //   //     }
    //   //   }
    //   // }
  
    //   // const draft: Draft &#x3D; new Draft({warps: warps, wefts: wefts, pattern: pattern});
    //   // drafts.push(draft);
      
    //   // //create a blank loom to accompany this
    //   // const loom:Loom &#x3D; new Loom(draft, 8, 10);
    //   // loom.overloadType(&#x27;jacquard&#x27;);
    //   // looms.push(loom);


    //   const f: FileObj &#x3D; {
    //     filename: filename,
    //     version: &#x27;na&#x27;,
    //     drafts: drafts,
    //     looms: looms,
    //     nodes: [], 
    //     treenodes: [],
    //     ops: [],
    //     scale: 5
    //   }
  
    //   return Promise.resolve({data: f ,status: 0});  
    // },
    // bmp: async (filename: string, data: any) : Promise&lt;LoadResponse&gt; &#x3D;&gt; {
    //   this.clearAll();

    //   let drafts: Array&lt;Draft&gt; &#x3D; [];
    //   let looms: Array&lt;Loom&gt; &#x3D; [];

    //   let e &#x3D; data;
    //   const warps &#x3D; e.width;
    //   const wefts &#x3D; e.height;
  
    //   var img &#x3D; e.data;
    //   var pattern &#x3D; [];
  
    //   for (var i&#x3D;0; i&lt; e.height; i++) {
    //     pattern.push([]);
    //     for (var j&#x3D;0; j&lt; e.width; j++) {
    //       var idx &#x3D; (i * 4 * warps) + (j * 4);
    //       var threshold &#x3D; (img[idx] + img[idx+1] + img[idx+2]);
    //       var alpha &#x3D; img[idx + 3];
  
    //       if (threshold &lt; 750 &amp;&amp; alpha !&#x3D; 0) {
    //         pattern[i].push(new Cell(true));
    //       } else {
    //         pattern[i].push(new Cell(false));
    //       }
    //     }
    //   }
  
    //   const draft: Draft &#x3D; new Draft({warps: warps, wefts: wefts, pattern: pattern});
    //   drafts&#x3D; [ draft];
      
    //   //create a blank loom to accompany this
    //   const loom:Loom &#x3D; new Loom(draft, &#x27;jacquard&#x27;, 8, 10);
    //   looms.push(loom);

    //   const proxies &#x3D; this.tree.getNewDraftProxies(draft, []);

    
    //   const f: FileObj &#x3D; {
    //     filename: filename,
    //     version: &#x27;na&#x27;,
    //     drafts: drafts,
    //     looms: looms,
    //     nodes: [proxies.node], 
    //     treenodes: [proxies.treenode],
    //     ops: [],
    //     scale: 5
    //   }
  
    //   return Promise.resolve({data: f ,status: 0});  
    // },
    form: async (f:any):Promise&lt;LoadResponse&gt; &#x3D;&gt;{
      this.clearAll();

      let drafts: Array&lt;Draft&gt; &#x3D; [];
      let looms: Array&lt;Loom&gt; &#x3D; [];

      var warps &#x3D; 20;
      if(f.value.warps !&#x3D;&#x3D; undefined) warps &#x3D; f.value.warps;


      var wefts &#x3D; 20;
      if(f.value.wefts !&#x3D;&#x3D; undefined) wefts &#x3D; f.value.wefts;

      const draft: Draft &#x3D; initDraftWithParams({warps: warps, wefts: wefts});

      var frame_num &#x3D; (f.value.frame_num &#x3D;&#x3D;&#x3D; undefined) ? 8 : f.value.frame_num;
      var treadle_num &#x3D; (f.value.treadle_num &#x3D;&#x3D;&#x3D; undefined) ? 10 : f.value.treadle_num;
      var loomtype &#x3D; (f.value.loomtype &#x3D;&#x3D;&#x3D; undefined) ? &#x27;frame&#x27; : f.value.loomtype;
      var frame_num &#x3D; (f.value.frame_num &#x3D;&#x3D;&#x3D; undefined) ? 2 : f.value.frame_num;
      var treadle_num &#x3D; (f.value.treadle_num &#x3D;&#x3D;&#x3D; undefined) ? 2 : f.value.treadle_num;
      if(f.value.loomtype &#x3D;&#x3D; &#x27;direct&#x27;) treadle_num &#x3D; frame_num;
      var epi &#x3D; (f.value.epi &#x3D;&#x3D;&#x3D; undefined) ? 10 : f.value.epi;
      var units &#x3D; (f.value.units &#x3D;&#x3D;&#x3D; undefined || ! f.value.units) ? &quot;in&quot; : f.value.units;
      


      const loom_settings: LoomSettings &#x3D; {
        type: loomtype,
        epi: epi, 
        units: units,
        frames: frame_num,
        treadles: treadle_num
      }

      this.ws.inferData([loom_settings]);
      

      const loomutils &#x3D; getLoomUtilByType(loomtype);
      return loomutils.computeLoomFromDrawdown(draft.drawdown, loom_settings, 0).then(loom &#x3D;&gt; {
        looms.push(loom);
        const proxies &#x3D; this.tree.getNewDraftProxies(draft, []);
        draft.id  &#x3D; proxies.node.node_id;
        proxies.draft_node.draft &#x3D; draft;
        proxies.draft_node.draft_id &#x3D; draft.id;
        proxies.draft_node.loom &#x3D; loom;
        proxies.draft_node.loom_settings &#x3D; loom_settings;



        
        const envt: FileObj &#x3D; {
          version: this.vs.currentVersion(),
          workspace: this.ws.exportWorkspace(),
          filename: &quot;adacad mixer&quot;,
          nodes: [proxies.node], 
          treenodes: [proxies.treenode],
          draft_nodes: [proxies.draft_node],
          notes: [],
          ops: [],
          scale: 5
        }
    
        return Promise.resolve({data: envt, name: &quot;new draft&quot;, desc: &quot;created via form&quot;, status: 0, id: this.files.generateFileId()});

      });

  

      


    }
  }

  // interface FileSaver{
  //   ada: (drafts: Array&lt;Draft&gt;, looms: Array&lt;Loom&gt;, pattern: Array&lt;Pattern&gt;, palette:PaletteComponent) &#x3D;&gt; void,
  //   wif: (drafts: Array&lt;Draft&gt;, looms: Array&lt;Loom&gt;) &#x3D;&gt; void,
  //   bmp: (drafts: Array&lt;Draft&gt;) &#x3D;&gt; LoadResponse,
  //   jpg: (drafts: Array&lt;Draft&gt;, looms: Array&lt;Loom&gt;, pattern: Array&lt;Pattern&gt;, palette:PaletteComponent) &#x3D;&gt; void
  // }
  

  const dsaver: FileSaver &#x3D; {

    copy:  async (include: Array&lt;number&gt;, current_scale: number) : Promise&lt;SaveObj&gt; &#x3D;&gt; {
    
      const out: SaveObj &#x3D; {
        type: &#x27;partial&#x27;,
        version: this.vs.currentVersion(),
        workspace: null,
        nodes: this.tree.exportNodesForSaving(current_scale),
        tree: this.tree.exportTreeForSaving(),
        draft_nodes: await this.tree.exportDraftNodeProxiesForSaving(),
        ops: this.tree.exportOpMetaForSaving(),
        notes: [],
        materials: this.ms.exportForSaving(),
        scale: 5
      }

      //now filter out things that aren&#x27;t relevant
      out.nodes &#x3D; out.nodes.filter(node &#x3D;&gt; include.find(el &#x3D;&gt; el &#x3D;&#x3D; node.node_id) !&#x3D;&#x3D; undefined);
      out.nodes.forEach(node &#x3D;&gt; {node.topleft &#x3D; {x: node.topleft.x + 50, y: node.topleft.y+50}});
      out.tree &#x3D; out.tree.filter(tn &#x3D;&gt; include.find(el &#x3D;&gt; el &#x3D;&#x3D; tn.node) !&#x3D;&#x3D; undefined);
      out.draft_nodes &#x3D; out.draft_nodes.filter(dn &#x3D;&gt;  include.find(el &#x3D;&gt; el &#x3D;&#x3D; dn.node_id) !&#x3D;&#x3D; undefined);
      out.ops &#x3D; out.ops.filter(op &#x3D;&gt; include.find(el &#x3D;&gt; el &#x3D;&#x3D; op.node_id) !&#x3D;&#x3D; undefined)


      return Promise.resolve(out);

    },
    
    ada:  async (type: string, for_timeline: boolean, current_scale: number) : Promise&lt;{json: string, file: SaveObj}&gt; &#x3D;&gt; {
           
      const out: SaveObj &#x3D; {
        version: this.vs.currentVersion(),
        workspace: this.ws.exportWorkspace(),
        type: type,
        nodes: this.tree.exportNodesForSaving(current_scale),
        tree: this.tree.exportTreeForSaving(),
        draft_nodes: await this.tree.exportDraftNodeProxiesForSaving(),
        ops: this.tree.exportOpMetaForSaving(),
        notes: this.ns.exportForSaving(),
        materials: this.ms.exportForSaving(),
        scale: current_scale
      }

      //update this to return the object and see how it writes
      var theJSON &#x3D; JSON.stringify(out);
      return Promise.resolve({json: theJSON, file: out});


    },
   // wif: async (draft: Draft, loom: Loom) : Promise&lt;string&gt; &#x3D;&gt; {
      // const shuttles: Array&lt;Shuttle&gt; &#x3D; this.ms.getShuttles();
      //   //will need to import the obj for draft2wif.ts and then use it and pass this.weave for fileContents
      // var fileContents &#x3D; &quot;[WIF]\nVersion&#x3D;1.1\nDate&#x3D;November 6, 2020\nDevelopers&#x3D;Unstable Design Lab at the University of Colorado Boulder\nSource Program&#x3D;AdaCAD\nSource Version&#x3D;3.0\n[CONTENTS]&quot;;
      // var fileType &#x3D; &quot;text/plain&quot;;

      // fileContents +&#x3D; &quot;\nCOLOR PALETTE&#x3D;yes\nWEAVING&#x3D;yes\nWARP&#x3D;yes\nWEFT&#x3D;yes\nTIEUP&#x3D;yes\nCOLOR TABLE&#x3D;yes\nTHREADING&#x3D;yes\nWARP COLORS&#x3D;yes\nTREADLING&#x3D;yes\nWEFT COLORS&#x3D;yes\n&quot;;
      
      // fileContents +&#x3D; &quot;[COLOR PALETTE]\n&quot;;
      // fileContents +&#x3D; &quot;Entries&#x3D;&quot; + (shuttles.length).toString() +&quot;\n&quot;;
      // fileContents +&#x3D; &quot;Form&#x3D;RGB\nRange&#x3D;0,255\n&quot;;

      // fileContents +&#x3D; &quot;[WEAVING]\nShafts&#x3D;&quot;;
      // fileContents +&#x3D; loom.min_frames.toString();
      // fileContents +&#x3D; &quot;\nTreadles&#x3D;&quot;;
      // fileContents +&#x3D; loom.min_treadles.toString();
      // fileContents +&#x3D; &quot;\nRising Shed&#x3D;yes\n&quot;;
      // fileContents +&#x3D; &quot;[WARP]\nThreads&#x3D;&quot;;
      // fileContents +&#x3D; draft.warps.toString();
      
      // var warpColors &#x3D; [];
      // for (var i &#x3D; 0; i &lt; draft.colShuttleMapping.length; i++) {
      //   if (!warpColors.includes(draft.colShuttleMapping[i])) {
      //     warpColors.push(draft.colShuttleMapping[i]);
      //   }
      // }
      // fileContents +&#x3D; &quot;\nColors&#x3D;&quot; + warpColors.length.toString();

      // fileContents +&#x3D; &quot;\n[WEFT]\nThreads&#x3D;&quot;;
      // fileContents +&#x3D; draft.wefts.toString();
      // var weftColors &#x3D; [];
      // for (var i &#x3D; 0; i &lt; draft.colShuttleMapping.length; i++) {
      //   if (!weftColors.includes(draft.colShuttleMapping[i])) {
      //     weftColors.push(draft.colShuttleMapping[i]);
      //   }
      // }
      // fileContents +&#x3D; &quot;\nColors&#x3D;&quot; + weftColors.length.toString();

      // fileContents +&#x3D; &quot;\n[TIEUP]\n&quot;;

      // var treadles &#x3D; [];
      // for (var i &#x3D;0; i &lt; loom.tieup.length;i++) {
      //   for (var j &#x3D; 0; j &lt; loom.tieup[i].length;j++) {
      //     if (loom.tieup[i][j] &amp;&amp; !treadles.includes(j)) {
      //       treadles.push(j);
      //     }
      //   }
      // }
      // for (var i &#x3D;0; i &lt; treadles.length; i++) {
      //   fileContents +&#x3D; (treadles[i]+1).toString() + &quot;&#x3D;&quot;;
      //   var lineMarked &#x3D; false;
      //   for (var j &#x3D; 0; j &lt; loom.tieup.length; j++){
      //     if (loom.tieup[j][treadles[i]]) { 
      //       if (lineMarked) {
      //         fileContents +&#x3D; &quot;,&quot;;
      //       }
      //       fileContents +&#x3D; (j+1).toString();
      //       lineMarked&#x3D;true;
      //     }
      //   }
      //   fileContents +&#x3D; &quot;\n&quot;;
      // }

      // fileContents+&#x3D; &quot;[COLOR TABLE]\n&quot;;
      // //Reference: https://css-tricks.com/converting-color-spaces-in-javascript/ for conversion for hex to RGB
      // var counter &#x3D; 1;
      // for (var i &#x3D; 0; i &lt; shuttles.length; i++) {
      //   fileContents+&#x3D; (counter).toString();
      //   counter &#x3D; counter + 1;
      //   fileContents+&#x3D; &quot;&#x3D;&quot;;
      //   var hex &#x3D; shuttles[i].color;
      //   if (hex.length &#x3D;&#x3D; 7) {
      //     var r &#x3D; &quot;0x&quot; + hex[1] + hex[2];
      //     var g &#x3D; &quot;0x&quot; + hex[3] + hex[4];
      //     var b &#x3D; &quot;0x&quot; + hex[5] + hex[6];

      //     fileContents +&#x3D; (+r).toString() + &quot;,&quot; + (+g).toString() + &quot;,&quot; + (+b).toString() + &quot;\n&quot;;
      //   }
      // }
      
      // fileContents +&#x3D; &quot;[THREADING]\n&quot;;
      // for (var i&#x3D;0; i &lt;loom.threading.length; i++) {
      //   var frame &#x3D; loom.threading[i];
      //   if (frame !&#x3D; -1) {
      //     fileContents +&#x3D; (loom.threading.length-i).toString() + &quot;&#x3D;&quot; + (frame+1).toString() + &quot;\n&quot;;
      //   }
      // }

      // fileContents +&#x3D; &quot;[WARP COLORS]\n&quot;;
      // for (var i &#x3D; 0; i &lt; draft.colShuttleMapping.length; i++) {
      //   fileContents +&#x3D; (i+1).toString() + &quot;&#x3D;&quot; + (draft.colShuttleMapping[(draft.colShuttleMapping.length)-(i+1)]+1).toString() + &quot;\n&quot;;
      // }

      // //THIS WILL ONLY WORK WTIH FRAME LOOM DRAFT STYLE
      // fileContents +&#x3D; &quot;[TREADLING]\n&quot;;
      // for (var i &#x3D; 0; i &lt; loom.treadling.length; i++) {
      //   if (loom.treadling[i].length !&#x3D; 0 &amp;&amp; loom.treadling[i][0] !&#x3D; -1){
      //     fileContents +&#x3D; (i+1).toString() + &quot;&#x3D;&quot; + (loom.treadling[i][0]+1).toString() + &quot;\n&quot;;
      //   }
      // }

      // fileContents +&#x3D; &quot;[WEFT COLORS]\n&quot;;
      // for (var i &#x3D; 0; i &lt; draft.rowShuttleMapping.length; i++) { // will likely have to change the way I import too
      //   fileContents +&#x3D; (i+1).toString() + &quot;&#x3D;&quot; + (draft.rowShuttleMapping[i]+1).toString() + &quot;\n&quot;;
      // }

   //   const href:string &#x3D; &quot;data:&quot; + fileType +&quot;;base64,&quot; + btoa(fileContents);
   //   return Promise.resolve(href);
   // },
    bmp: async (canvas:HTMLCanvasElement) : Promise&lt;string&gt; &#x3D;&gt; {
      return Promise.resolve(canvas.toDataURL(&quot;image/jpg&quot;));

    },
    jpg: async (canvas:HTMLCanvasElement) : Promise&lt;string&gt; &#x3D;&gt; {
      return Promise.resolve(canvas.toDataURL(&quot;image/jpg&quot;));
    }
  }


  this.loader &#x3D; dloader;
  this.saver &#x3D; dsaver;
  


  }

  clearAll(){
    console.log(&quot;Clearing all in FS&quot;)
    this.tree.clear();
    this.ms.reset();
    this.ss.reset(),
    this.ns.clear();

  }




}
</code></pre>
    </div>

</div>













                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

          <label class="dark-mode-switch">
               <input type="checkbox">
               <span class="slider">
                    <svg class="slider-icon" viewBox="0 0 24 24" fill="none" height="20" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" width="20" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"></path>
                    </svg>
               </span>
          </label>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'injectable';
            var COMPODOC_CURRENT_PAGE_URL = 'FileService.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>

       <script src="../js/menu-wc.js" defer></script>
       <script nomodule src="../js/menu-wc_es5.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
