<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>adacad documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	    <link rel="stylesheet" href="../styles/style.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="../" class="navbar-brand">adacad documentation</a>
            <button type="button" class="btn btn-default btn-menu fa fa-bars" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
            <div id="book-search-input" role="search">
                <input type="text" placeholder="Type to search">
            </div>
            <nav>
            
                <ul class="list">
            
                    <li class="title">
                        <a href="../">adacad documentation</a>
                    </li>
            
                    <li class="divider"></li>
            
            
                    <li class="chapter">
                        <a data-type="chapter-link" href="../"><span class="fa fa-home"></span>Getting started</a>
                        <ul class="links">
                                <li class="link">
                                    <a href="../" ><span class="fa fa-file-text-o"></span>README</a>
                                </li>
                                <li class="link">
                                    <a 
                                        
                                         href="../overview.html" 
                                         href="../overview.html" 
                                        >
                                        <span class="fa fa-th"></span>Overview
                                    </a>
                                </li>
                        </ul>
                    </li>
            
                    <li class="chapter">
                        <a data-type="chapter-link" href="./modules.html" >
                            <span class="fa fa-archive"></span>
                            <span>Modules</span>
                            <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                    data-target="#xs-modules-links"
                            ></span>
                        </a>
                        <ul class="links collapse in"
                                id="xs-modules-links"
                            >
                                <li class="link">
                                    <a href="../modules/AppModule.html" >AppModule</a>
                                </li>
                                <li class="link">
                                    <a href="../modules/AppRoutingModule.html" >AppRoutingModule</a>
                                </li>
                                <li class="link">
                                    <a href="../modules/CoreModule.html" >CoreModule</a>
                                </li>
                                <li class="link">
                                    <a href="../modules/DraftDetailModule.html" >DraftDetailModule</a>
                                </li>
                                <li class="link">
                                    <a href="../modules/MixerModule.html" >MixerModule</a>
                                </li>
                        </ul>
                    </li>
            
                    <li class="chapter">
                        <div class="simple">
                            <span class="fa fa-cogs"></span>
                            <span>Components</span>
                            <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                    data-target="#xs-components-links"
                                ></span>
                        </div>
                        <ul class="links collapse in"
                                id="xs-components-links"
                            >
                                <li class="link">
                                    <a href="../components/AboutModal.html" >AboutModal</a>
                                </li>
                                <li class="link">
                                    <a href="../components/ActionsComponent.html" >ActionsComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/AppComponent.html" >AppComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/BlankdraftModal.html" >BlankdraftModal</a>
                                </li>
                                <li class="link">
                                    <a href="../components/ConnectionComponent.html" >ConnectionComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/CrosssectionComponent.html" >CrosssectionComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/DesignComponent.html" >DesignComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/DraftDetailComponent.html" >DraftDetailComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/DraftviewerComponent.html" >DraftviewerComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/ExamplesComponent.html" >ExamplesComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/FilebrowserComponent.html" >FilebrowserComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/ImageComponent.html" >ImageComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/InitModal.html" >InitModal</a>
                                </li>
                                <li class="link">
                                    <a href="../components/InletComponent.html" >InletComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/LoadfileComponent.html" >LoadfileComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/LoginComponent.html" >LoginComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/LoomModal.html" >LoomModal</a>
                                </li>
                                <li class="link">
                                    <a href="../components/MaterialModal.html" >MaterialModal</a>
                                </li>
                                <li class="link">
                                    <a href="../components/MaterialsComponent.html" >MaterialsComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/MixerComponent.html" >MixerComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/MixerViewComponent.html" >MixerViewComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/NoteComponent.html" >NoteComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/OpHelpModal.html" >OpHelpModal</a>
                                </li>
                                <li class="link">
                                    <a href="../components/OperationComponent.html" >OperationComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/OpsComponent.html" >OpsComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/PaletteComponent.html" >PaletteComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/ParameterComponent.html" >ParameterComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/ProfileComponent.html" >ProfileComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/QuickopComponent.html" >QuickopComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/SelectionComponent.html" >SelectionComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/SidebarComponent.html" >SidebarComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/SignupComponent.html" >SignupComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/SimulationComponent.html" >SimulationComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/SnackbarComponent.html" >SnackbarComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/SubdraftComponent.html" >SubdraftComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/SystemsComponent.html" >SystemsComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/TopbarComponent.html" >TopbarComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/UploadFormComponent.html" >UploadFormComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/WeaverViewComponent.html" >WeaverViewComponent</a>
                                </li>
                        </ul>
                    </li>
            
                    <li class="chapter">
                        <div class="simple">
                            <span class="fa fa-code"></span>
                            <span>Directives</span>
                            <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                    data-target="#xs-directives-links"
                                ></span>
                        </div>
                        <ul class="links collapse in"
                                id="xs-directives-links"
                            >
                                <li class="link">
                                    <a href="../directives/KeycodesDirective.html" >KeycodesDirective</a>
                                </li>
                                <li class="link">
                                    <a href="../directives/MarqueeComponent.html" >MarqueeComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../directives/SelectionComponent.html" >SelectionComponent</a>
                                </li>
                        </ul>
                    </li>
            
                    <li class="chapter">
                        <div class="simple">
                            <span class="fa fa-file-code-o"></span>
                            <span>Classes</span>
                            <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                    data-target="#xs-classes-links"
                                ></span>
                        </div>
                        <ul class="links collapse in"
                                id="xs-classes-links"
                            >
                                <li class="link">
                                    <a href="../classes/AdaCADWeaverPage.html" >AdaCADWeaverPage</a>
                                </li>
                                <li class="link">
                                    <a href="../classes/MyErrorStateMatcher.html" >MyErrorStateMatcher</a>
                                </li>
                                <li class="link">
                                    <a href="../classes/Selection.html" >Selection</a>
                                </li>
                                <li class="link">
                                    <a href="../classes/Util.html" >Util</a>
                                </li>
                        </ul>
                    </li>
            
                    <li class="chapter">
                        <a data-type="chapter-link" href="../routes.html" ><span class="fa fa-code-fork"></span>Routes</a>
                    </li>
            
                    <li class="chapter">
                        <div class="simple">
                            <span class="fa fa-long-arrow-down"></span>
                            <span>Injectables</span>
                            <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                    data-target="#xs-injectables-links"
                                ></span>
                        </div>
                        <ul class="links collapse in"
                                id="xs-injectables-links"
                            >
                                <li class="link">
                                    <a href="../injectables/AuthService.html" >AuthService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/CollectionService.html" >CollectionService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/DesignmodesService.html" >DesignmodesService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/ExampleserviceService.html" >ExampleserviceService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/FabricssimService.html" >FabricssimService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/FileService.html"  class="active" >FileService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/FilesystemService.html" >FilesystemService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/ImageService.html" >ImageService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/InkService.html" >InkService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/LayersService.html" >LayersService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/MaterialsService.html" >MaterialsService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/MultiselectService.html" >MultiselectService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/NotesService.html" >NotesService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/OperationDescriptionsService.html" >OperationDescriptionsService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/OperationService.html" >OperationService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/PatternfinderService.html" >PatternfinderService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/RenderService.html" >RenderService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/SimulationService.html" >SimulationService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/StateService.html" >StateService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/SystemsService.html" >SystemsService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/TreeService.html" >TreeService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/UploadService.html" >UploadService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/VaeService.html" >VaeService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/VersionService.html" >VersionService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/ViewportService.html" >ViewportService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/WorkspaceService.html" >WorkspaceService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/ZoomService.html" >ZoomService</a>
                                </li>
                        </ul>
                    </li>
            
                    <li class="chapter">
                        <div class="simple">
                            <span class="fa fa-info"></span>
                            <span>Interfaces</span>
                            <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                    data-target="#xs-interfaces-links"
                                ></span>
                        </div>
                        <ul class="links collapse in"
                                id="xs-interfaces-links"
                            >
                                <li class="link">
                                    <a href="../interfaces/AnalyzedImage.html" >AnalyzedImage</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/Bounds.html" >Bounds</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/Cell.html" >Cell</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/ComboNode.html" >ComboNode</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/ComboTree.html" >ComboTree</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/DensityUnits.html" >DensityUnits</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/DesignActions.html" >DesignActions</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/DesignMode.html" >DesignMode</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/Draft.html" >Draft</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/DraftMap.html" >DraftMap</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/DraftNodeProxy.html" >DraftNodeProxy</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/FileObj.html" >FileObj</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/FileSaver.html" >FileSaver</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/Fileloader.html" >Fileloader</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/HistoryState.html" >HistoryState</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/IOTuple.html" >IOTuple</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/Ink.html" >Ink</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/Interlacement.html" >Interlacement</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/InterlacementVal.html" >InterlacementVal</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/Item.html" >Item</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/LoadResponse.html" >LoadResponse</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/LoomTypes.html" >LoomTypes</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/Material.html" >Material</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/MaterialMap.html" >MaterialMap</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/MaterialTypes.html" >MaterialTypes</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/Model.html" >Model</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/NodeComponentProxy.html" >NodeComponentProxy</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/Note.html" >Note</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/OpComponentProxy.html" >OpComponentProxy</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/OpInput.html" >OpInput</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/OpParamVal.html" >OpParamVal</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/OperationClassification.html" >OperationClassification</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/Point.html" >Point</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/SaveObj.html" >SaveObj</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/StartOptions.html" >StartOptions</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/StatusMessage.html" >StatusMessage</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/System.html" >System</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/TreeNode.html" >TreeNode</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/TreeNodeProxy.html" >TreeNodeProxy</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/Upload.html" >Upload</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/ViewModes.html" >ViewModes</a>
                                </li>
                        </ul>
                    </li>
            
            
                    <li class="chapter">
                        <a data-type="chapter-link" href="../miscellaneous.html" ><span class="fa fa-cubes"></span>Miscellaneous</a>
                    </li>
            
                    <li class="chapter">
                        <a data-type="chapter-link" href="../coverage.html" ><span class="fa fa-tasks"></span>Documentation coverage</a>
                    </li>
            
                    <li class="divider"></li>
                    <li class="copyright">
                            Documentation generated using <a href="https://compodoc.github.io/compodoc/" target="_blank">
                                        <img src="..//images/compodoc-vectorise.svg" class="img-responsive">
                            </a>
                    </li>
            
                </ul>
            
            </nav>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <nav>
                   
                       <ul class="list">
                   
                           <li class="title">
                               <a href="../">adacad documentation</a>
                           </li>
                   
                           <li class="divider"></li>
                   
                               <div id="book-search-input" role="search">
                                   <input type="text" placeholder="Type to search">
                               </div>
                   
                           <li class="chapter">
                               <a data-type="chapter-link" href="../"><span class="fa fa-home"></span>Getting started</a>
                               <ul class="links">
                                       <li class="link">
                                           <a href="../" ><span class="fa fa-file-text-o"></span>README</a>
                                       </li>
                                       <li class="link">
                                           <a 
                                               
                                                href="../overview.html" 
                                                href="../overview.html" 
                                               >
                                               <span class="fa fa-th"></span>Overview
                                           </a>
                                       </li>
                               </ul>
                           </li>
                   
                           <li class="chapter">
                               <a data-type="chapter-link" href="./modules.html" >
                                   <span class="fa fa-archive"></span>
                                   <span>Modules</span>
                                   <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                           data-target="#modules-links"
                                   ></span>
                               </a>
                               <ul class="links collapse in"
                                       id="modules-links"
                   >
                                       <li class="link">
                                           <a href="../modules/AppModule.html" >AppModule</a>
                                       </li>
                                       <li class="link">
                                           <a href="../modules/AppRoutingModule.html" >AppRoutingModule</a>
                                       </li>
                                       <li class="link">
                                           <a href="../modules/CoreModule.html" >CoreModule</a>
                                       </li>
                                       <li class="link">
                                           <a href="../modules/DraftDetailModule.html" >DraftDetailModule</a>
                                       </li>
                                       <li class="link">
                                           <a href="../modules/MixerModule.html" >MixerModule</a>
                                       </li>
                               </ul>
                           </li>
                   
                           <li class="chapter">
                               <div class="simple">
                                   <span class="fa fa-cogs"></span>
                                   <span>Components</span>
                                   <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                           data-target="#components-links"
                   ></span>
                               </div>
                               <ul class="links collapse in"
                                       id="components-links"
                   >
                                       <li class="link">
                                           <a href="../components/AboutModal.html" >AboutModal</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/ActionsComponent.html" >ActionsComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/AppComponent.html" >AppComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/BlankdraftModal.html" >BlankdraftModal</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/ConnectionComponent.html" >ConnectionComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/CrosssectionComponent.html" >CrosssectionComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/DesignComponent.html" >DesignComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/DraftDetailComponent.html" >DraftDetailComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/DraftviewerComponent.html" >DraftviewerComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/ExamplesComponent.html" >ExamplesComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/FilebrowserComponent.html" >FilebrowserComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/ImageComponent.html" >ImageComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/InitModal.html" >InitModal</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/InletComponent.html" >InletComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/LoadfileComponent.html" >LoadfileComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/LoginComponent.html" >LoginComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/LoomModal.html" >LoomModal</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/MaterialModal.html" >MaterialModal</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/MaterialsComponent.html" >MaterialsComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/MixerComponent.html" >MixerComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/MixerViewComponent.html" >MixerViewComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/NoteComponent.html" >NoteComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/OpHelpModal.html" >OpHelpModal</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/OperationComponent.html" >OperationComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/OpsComponent.html" >OpsComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/PaletteComponent.html" >PaletteComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/ParameterComponent.html" >ParameterComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/ProfileComponent.html" >ProfileComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/QuickopComponent.html" >QuickopComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/SelectionComponent.html" >SelectionComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/SidebarComponent.html" >SidebarComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/SignupComponent.html" >SignupComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/SimulationComponent.html" >SimulationComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/SnackbarComponent.html" >SnackbarComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/SubdraftComponent.html" >SubdraftComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/SystemsComponent.html" >SystemsComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/TopbarComponent.html" >TopbarComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/UploadFormComponent.html" >UploadFormComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/WeaverViewComponent.html" >WeaverViewComponent</a>
                                       </li>
                               </ul>
                           </li>
                   
                           <li class="chapter">
                               <div class="simple">
                                   <span class="fa fa-code"></span>
                                   <span>Directives</span>
                                   <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                           data-target="#directives-links"
                   ></span>
                               </div>
                               <ul class="links collapse in"
                                       id="directives-links"
                   >
                                       <li class="link">
                                           <a href="../directives/KeycodesDirective.html" >KeycodesDirective</a>
                                       </li>
                                       <li class="link">
                                           <a href="../directives/MarqueeComponent.html" >MarqueeComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../directives/SelectionComponent.html" >SelectionComponent</a>
                                       </li>
                               </ul>
                           </li>
                   
                           <li class="chapter">
                               <div class="simple">
                                   <span class="fa fa-file-code-o"></span>
                                   <span>Classes</span>
                                   <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                           data-target="#classes-links"
                   ></span>
                               </div>
                               <ul class="links collapse in"
                                       id="classes-links"
                   >
                                       <li class="link">
                                           <a href="../classes/AdaCADWeaverPage.html" >AdaCADWeaverPage</a>
                                       </li>
                                       <li class="link">
                                           <a href="../classes/MyErrorStateMatcher.html" >MyErrorStateMatcher</a>
                                       </li>
                                       <li class="link">
                                           <a href="../classes/Selection.html" >Selection</a>
                                       </li>
                                       <li class="link">
                                           <a href="../classes/Util.html" >Util</a>
                                       </li>
                               </ul>
                           </li>
                   
                           <li class="chapter">
                               <a data-type="chapter-link" href="../routes.html" ><span class="fa fa-code-fork"></span>Routes</a>
                           </li>
                   
                           <li class="chapter">
                               <div class="simple">
                                   <span class="fa fa-long-arrow-down"></span>
                                   <span>Injectables</span>
                                   <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                           data-target="#injectables-links"
                   ></span>
                               </div>
                               <ul class="links collapse in"
                                       id="injectables-links"
                   >
                                       <li class="link">
                                           <a href="../injectables/AuthService.html" >AuthService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/CollectionService.html" >CollectionService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/DesignmodesService.html" >DesignmodesService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/ExampleserviceService.html" >ExampleserviceService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/FabricssimService.html" >FabricssimService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/FileService.html"  class="active" >FileService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/FilesystemService.html" >FilesystemService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/ImageService.html" >ImageService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/InkService.html" >InkService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/LayersService.html" >LayersService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/MaterialsService.html" >MaterialsService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/MultiselectService.html" >MultiselectService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/NotesService.html" >NotesService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/OperationDescriptionsService.html" >OperationDescriptionsService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/OperationService.html" >OperationService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/PatternfinderService.html" >PatternfinderService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/RenderService.html" >RenderService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/SimulationService.html" >SimulationService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/StateService.html" >StateService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/SystemsService.html" >SystemsService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/TreeService.html" >TreeService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/UploadService.html" >UploadService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/VaeService.html" >VaeService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/VersionService.html" >VersionService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/ViewportService.html" >ViewportService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/WorkspaceService.html" >WorkspaceService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/ZoomService.html" >ZoomService</a>
                                       </li>
                               </ul>
                           </li>
                   
                           <li class="chapter">
                               <div class="simple">
                                   <span class="fa fa-info"></span>
                                   <span>Interfaces</span>
                                   <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                           data-target="#interfaces-links"
                   ></span>
                               </div>
                               <ul class="links collapse in"
                                       id="interfaces-links"
                   >
                                       <li class="link">
                                           <a href="../interfaces/AnalyzedImage.html" >AnalyzedImage</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/Bounds.html" >Bounds</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/Cell.html" >Cell</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/ComboNode.html" >ComboNode</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/ComboTree.html" >ComboTree</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/DensityUnits.html" >DensityUnits</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/DesignActions.html" >DesignActions</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/DesignMode.html" >DesignMode</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/Draft.html" >Draft</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/DraftMap.html" >DraftMap</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/DraftNodeProxy.html" >DraftNodeProxy</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/FileObj.html" >FileObj</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/FileSaver.html" >FileSaver</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/Fileloader.html" >Fileloader</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/HistoryState.html" >HistoryState</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/IOTuple.html" >IOTuple</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/Ink.html" >Ink</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/Interlacement.html" >Interlacement</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/InterlacementVal.html" >InterlacementVal</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/Item.html" >Item</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/LoadResponse.html" >LoadResponse</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/LoomTypes.html" >LoomTypes</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/Material.html" >Material</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/MaterialMap.html" >MaterialMap</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/MaterialTypes.html" >MaterialTypes</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/Model.html" >Model</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/NodeComponentProxy.html" >NodeComponentProxy</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/Note.html" >Note</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/OpComponentProxy.html" >OpComponentProxy</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/OpInput.html" >OpInput</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/OpParamVal.html" >OpParamVal</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/OperationClassification.html" >OperationClassification</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/Point.html" >Point</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/SaveObj.html" >SaveObj</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/StartOptions.html" >StartOptions</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/StatusMessage.html" >StatusMessage</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/System.html" >System</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/TreeNode.html" >TreeNode</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/TreeNodeProxy.html" >TreeNodeProxy</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/Upload.html" >Upload</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/ViewModes.html" >ViewModes</a>
                                       </li>
                               </ul>
                           </li>
                   
                   
                           <li class="chapter">
                               <a data-type="chapter-link" href="../miscellaneous.html" ><span class="fa fa-cubes"></span>Miscellaneous</a>
                           </li>
                   
                           <li class="chapter">
                               <a data-type="chapter-link" href="../coverage.html" ><span class="fa fa-tasks"></span>Documentation coverage</a>
                           </li>
                   
                           <li class="divider"></li>
                           <li class="copyright">
                                   Documentation generated using <a href="https://compodoc.github.io/compodoc/" target="_blank">
                                               <img src="..//images/compodoc-vectorise.svg" class="img-responsive">
                                   </a>
                           </li>
                   
                       </ul>
                   
                   </nav>
               </div>
               <div class="content injectable">
                   <div class="content-data">




<ol class="breadcrumb">
  <li>Injectables</li>
  <li>FileService</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
    <li class="active">
        <a href="#infos" id="infos-tab" role="tab" data-toggle="tab">Infos</a>
    </li>
    <li>
        <a href="#source" role="tab" id="source-tab" data-toggle="tab">Source</a>
    </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="infos">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/app/core/provider/file.service.ts</code>
        </p>

            <p class="comment">
                <h3>Description</h3>
            </p>
            <p class="comment">
                <p>this service handles the processing of data from an uplaoded file.<br>It is called from the InitModal when the user uploads data.<br>The principle sholud be that you can load any .ada file into<br>mixer or weaver, no matter what. </p>

            </p>

            <section>
                <h3 id="constructor">Constructor</h3>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <code>constructor(tree: <a href="../injectables/TreeService.html" >TreeService</a>, ns: <a href="../injectables/NotesService.html" >NotesService</a>, ms: <a href="../injectables/MaterialsService.html" >MaterialsService</a>, ss: <a href="../injectables/SystemsService.html" >SystemsService</a>, vs: <a href="../injectables/VersionService.html" >VersionService</a>, ws: <a href="../injectables/WorkspaceService.html" >WorkspaceService</a>, files: <a href="../injectables/FilesystemService.html" >FilesystemService</a>)</code>
                                </td>
                            </tr>
            
                        </tbody>
                    </table>
            </section>

            <section>
                <h3 id="methods">Methods</h3>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> clearAll</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>clearAll()</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
            </section>

            <section>
                <h3 id="inputs">Properties</h3>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> loader</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <code>loader:     <code>Fileloader</code>
            </bcode>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> saver</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <code>saver:     <code>FileSaver</code>
            </bcode>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> status</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <code>status:     <code>StatusMessage[]</code>
            </bcode>
                                </td>
                            </tr>
                        </tbody>
                    </table>
            </section>
    </div>
    <div class="tab-pane fade tab-source-code" id="source">
        <pre><code class="hljs javascript">import { Injectable } from &#x27;@angular/core&#x27;;
import { Draft, DraftNodeProxy, Fileloader, FileObj, FileSaver, LoadResponse, Loom, LoomSettings, OpComponentProxy, SaveObj, StatusMessage } from &#x27;../model/datatypes&#x27;;
import { initDraftWithParams, loadDraftFromFile } from &#x27;../model/drafts&#x27;;
import { getLoomUtilByType, loadLoomFromFile } from &#x27;../model/looms&#x27;;
import utilInstance from &#x27;../model/util&#x27;;
import { FilesystemService } from &#x27;./filesystem.service&#x27;;
import { MaterialsService } from &#x27;./materials.service&#x27;;
import { NotesService } from &#x27;./notes.service&#x27;;
import { SystemsService } from &#x27;./systems.service&#x27;;
import { TreeService } from &#x27;./tree.service&#x27;;
import { VersionService } from &#x27;./version.service&#x27;;
import { WorkspaceService } from &#x27;./workspace.service&#x27;;




/**
 * this service handles the processing of data from an uplaoded file. 
 * It is called from the InitModal when the user uploads data. 
 * The principle sholud be that you can load any .ada file into 
 * mixer or weaver, no matter what. 
 */

@Injectable({
  providedIn: &#x27;root&#x27;
})
export class FileService {


  status: Array&lt;StatusMessage&gt; &#x3D; [];
  loader: Fileloader &#x3D; null;
  saver: FileSaver &#x3D; null;

  constructor(
    private tree: TreeService, 
    private ns: NotesService,
    private ms: MaterialsService,
    private ss: SystemsService,
    private vs: VersionService,
    private ws: WorkspaceService,
    private files: FilesystemService) { 
  
  this.status &#x3D; [
    {id: 0, message: &#x27;success&#x27;, success: true},
    {id: 1, message: &#x27;incompatable type&#x27;, success: false}
  ];


  /**
   * file loader loads files of different types, 
   * for .adaFiles, it gets the data listed in SaveObj and begins to process it
   */
  const dloader: Fileloader &#x3D; {

     ada: async (filename: string, id: number, desc: string, data: any) : Promise&lt;LoadResponse&gt; &#x3D;&gt; {
      if(desc &#x3D;&#x3D;&#x3D; undefined) desc &#x3D; &quot;&quot;
      if(filename &#x3D;&#x3D; undefined) filename &#x3D; &#x27;draft&#x27; 
      if(id &#x3D;&#x3D;&#x3D; -1) id &#x3D; this.files.generateFileId();
      
      let draft_nodes: Array&lt;DraftNodeProxy&gt; &#x3D; [];
      //let looms: Array&lt;Loom&gt; &#x3D; [];
      let ops: Array&lt;OpComponentProxy&gt; &#x3D; [];
      let version &#x3D; &quot;0.0.0&quot;;
      
      this.clearAll();

      if(data &#x3D;&#x3D; undefined) return Promise.reject(&quot; there is no data&quot;)

      if(data.version !&#x3D;&#x3D; undefined) version &#x3D; data.version;

      if(data.workspace !&#x3D;&#x3D; undefined){
        this.ws.loadWorkspace(data.workspace);
      }else{
        this.ws.initDefaultWorkspace();
      }

      if(data.shuttles !&#x3D;&#x3D; undefined){
        this.ms.overloadShuttles(data.shuttles);

      }else{
        if(data.materials !&#x3D;&#x3D; undefined){
          this.ms.overloadShuttles(data.materials); 
        }
      }

      const flips_required &#x3D; utilInstance.getFlips(3, this.ws.selected_origin_option);

      const loom_elements &#x3D; []
      const loom_fns &#x3D; []
      const draft_elements &#x3D; [];
      const draft_fns &#x3D; [];

      if(!utilInstance.sameOrNewerVersion(version, &#x27;3.4.9&#x27;)){
        data.nodes.forEach(node &#x3D;&gt; {
          if(node.bounds !&#x3D;&#x3D; undefined) node.topleft &#x3D; node.bounds.topleft;
        })
      }

      if(utilInstance.sameOrNewerVersion(version, &#x27;3.4.5&#x27;)){
        draft_nodes &#x3D; data.draft_nodes;

        if(draft_nodes &#x3D;&#x3D; undefined) draft_nodes &#x3D; [];

        if(draft_nodes !&#x3D;&#x3D; undefined){
          draft_nodes.forEach(el &#x3D;&gt; {
            if(el.draft !&#x3D;&#x3D; null &amp;&amp; el.draft !&#x3D;&#x3D; undefined){
              draft_fns.push(loadDraftFromFile(el.draft, flips_required, version));
              draft_elements.push(el);
            }

            if(el.loom !&#x3D;&#x3D; null &amp;&amp; el.loom !&#x3D;&#x3D; undefined){
              loom_fns.push(loadLoomFromFile(el.loom, flips_required, version));
              loom_elements.push(el);
            }
        
          });
       }
        
      }else{

        //handle old file types that didn&#x27;t separate out drafts
        if(data.drafts &#x3D;&#x3D;&#x3D; undefined) data.drafts &#x3D; [data];
      

        data.nodes
        .filter(el &#x3D;&gt; el.type &#x3D;&#x3D;&#x3D; &#x27;draft&#x27;)
        .forEach(async node &#x3D;&gt; {
          const loom &#x3D; data.looms.find(loom &#x3D;&gt; loom.draft_id &#x3D;&#x3D;&#x3D; node.node_id);
          const draft &#x3D; data.drafts.find(draft &#x3D;&gt; draft.id &#x3D;&#x3D;&#x3D; node.node_id);

          const dn: DraftNodeProxy &#x3D; {
            node_id: (node &#x3D;&#x3D;&#x3D; undefined) ? -1 : node.node_id,
            draft_id: node.node_id,
            draft_name: node.draft_name,
            draft:draft,
            draft_visible: (node &#x3D;&#x3D;&#x3D; undefined) ? true : node.draft_visible,
            loom:null,
            loom_settings: (loom &#x3D;&#x3D;&#x3D; undefined) 
              ? {type: this.ws.type, epi: this.ws.epi, units: this.ws.units, frames: this.ws.min_frames, treadles: this.ws.min_treadles } 
              : {type: loom.type, epi: loom.epi, units: loom.units, frames: loom.min_frames, treadles: loom.min_treadles},
            render_colors: (node &#x3D;&#x3D;&#x3D; undefined || node.render_colors &#x3D;&#x3D;&#x3D; undefined) ? true : node.render_colors,
          }

          draft_nodes.push(dn);

          if(draft !&#x3D;&#x3D; null &amp;&amp; draft !&#x3D;&#x3D; undefined){
            draft_fns.push(loadDraftFromFile(draft, flips_required, version));
            draft_elements.push(dn);
          }

          if(loom !&#x3D;&#x3D; null &amp;&amp; loom !&#x3D;&#x3D; undefined){
            loom_fns.push(loadLoomFromFile(loom, flips_required, version));
            loom_elements.push(dn);
          }


        });

        //in previous versions drafts and looms were loaded separately
      }

      return Promise.all(draft_fns)
      .then( res &#x3D;&gt; {

          for(let i &#x3D; 0; i &lt; draft_elements.length; i++){
            draft_elements[i].draft &#x3D; res[i];
          }

      return Promise.all(loom_fns)
      })
      .then(res &#x3D;&gt; {

        for(let i &#x3D; 0; i &lt; loom_elements.length; i++){
          draft_elements[i].loom &#x3D; res[i];
        }
        
        draft_nodes
        .filter(el &#x3D;&gt; el.draft !&#x3D;&#x3D; null)
        .forEach(el &#x3D;&gt; {
          //scan the systems and add any that need to be added
          if(el.draft !&#x3D;&#x3D; null &amp;&amp; el.draft !&#x3D;&#x3D; undefined &amp;&amp; el.draft.rowSystemMapping !&#x3D;&#x3D; undefined){
            el.draft.rowSystemMapping.forEach(el &#x3D;&gt; {
              if(this.ss.getWeftSystem(el) &#x3D;&#x3D;&#x3D; undefined) this.ss.addWeftSystemFromId(el);
            });
          }  
  
          //scan the systems and add any that need to be added
          if(el.draft !&#x3D;&#x3D; null &amp;&amp; el.draft !&#x3D;&#x3D; undefined &amp;&amp; el.draft.colSystemMapping !&#x3D;&#x3D; undefined){
            el.draft.colSystemMapping.forEach(el &#x3D;&gt; {
              if(this.ss.getWarpSystem(el) &#x3D;&#x3D;&#x3D; undefined) this.ss.addWarpSystemFromId(el);
            });
          }  
        })
      
    
        if(data.ops !&#x3D;&#x3D; undefined){
          ops &#x3D; data.ops.map(data &#x3D;&gt; {
            const op: OpComponentProxy &#x3D; {
              node_id: data.node_id,
              name: data.name,
              params: data.params,
              inlets: (data.inlets &#x3D;&#x3D;&#x3D; undefined) ? [0] : data.inlets 
            }
            return op;
          });
        }
        
          const envt: FileObj &#x3D; {
            version: data.version,
            workspace: data.workspace,
            filename: filename,
            nodes: (data.nodes &#x3D;&#x3D;&#x3D; undefined) ? [] : data.nodes,
            treenodes: (data.tree &#x3D;&#x3D;&#x3D; undefined) ? [] : data.tree,
            draft_nodes: draft_nodes,
            notes: (data.notes &#x3D;&#x3D;&#x3D; undefined) ? [] : data.notes,
            ops: ops,
            scale: (data.scale &#x3D;&#x3D;&#x3D; undefined) ? 5 : data.scale,
          }
    
          return Promise.resolve({data: envt, name: filename, desc: desc, status: 0, id:id }); 
  
        }
      )



    

    }, 

    paste: async (data: any) : Promise&lt;LoadResponse&gt; &#x3D;&gt; {
      
      let draft_nodes: Array&lt;DraftNodeProxy&gt; &#x3D; [];
      let ops: Array&lt;OpComponentProxy&gt; &#x3D; [];
      let version &#x3D; &quot;0.0.0&quot;;
      
      // this.clearAll();

     

      if(data.shuttles !&#x3D;&#x3D; undefined){
       //handle shuttles here
      }

      const flips_required &#x3D; utilInstance.getFlips(this.ws.selected_origin_option, 3);

    
      const loom_elements &#x3D; []
      const loom_fns &#x3D; []
      const draft_elements &#x3D; [];
      const draft_fns &#x3D; [];

      draft_nodes &#x3D; data.draft_nodes;

      draft_nodes.forEach(el &#x3D;&gt; {
        if(el.draft !&#x3D;&#x3D; null &amp;&amp; el.draft !&#x3D;&#x3D; undefined){
          draft_fns.push(loadDraftFromFile(el.draft, flips_required, version));
          draft_elements.push(el);
        }

        if(el.loom !&#x3D;&#x3D; null &amp;&amp; el.loom !&#x3D;&#x3D; undefined){
          loom_fns.push(loadLoomFromFile(el.loom, flips_required, version));
          loom_elements.push(el);
        }
      });

      return Promise.all(draft_fns)
      .then( res &#x3D;&gt; {

          for(let i &#x3D; 0; i &lt; draft_elements.length; i++){
            draft_elements[i].draft &#x3D; res[i];
          }

      return Promise.all(loom_fns)
      })
      .then(res &#x3D;&gt; {

        for(let i &#x3D; 0; i &lt; loom_elements.length; i++){
          draft_elements[i].loom &#x3D; res[i];
        }
        
        draft_nodes
        .filter(el &#x3D;&gt; el.draft !&#x3D;&#x3D; null)
        .forEach(el &#x3D;&gt; {
          //scan the systems and add any that need to be added
          if(el.draft !&#x3D;&#x3D; null &amp;&amp; el.draft !&#x3D;&#x3D; undefined &amp;&amp; el.draft.rowSystemMapping !&#x3D;&#x3D; undefined){
            el.draft.rowSystemMapping.forEach(el &#x3D;&gt; {
              if(this.ss.getWeftSystem(el) &#x3D;&#x3D;&#x3D; undefined) this.ss.addWeftSystemFromId(el);
            });
          }  
  
          //scan the systems and add any that need to be added
          if(el.draft !&#x3D;&#x3D; null &amp;&amp; el.draft !&#x3D;&#x3D; undefined &amp;&amp; el.draft.colSystemMapping !&#x3D;&#x3D; undefined){
            el.draft.colSystemMapping.forEach(el &#x3D;&gt; {
              if(this.ss.getWarpSystem(el) &#x3D;&#x3D;&#x3D; undefined) this.ss.addWarpSystemFromId(el);
            });
          }  
        })
      
    
        if(data.ops !&#x3D;&#x3D; undefined){
          ops &#x3D; data.ops.map(data &#x3D;&gt; {
            const op: OpComponentProxy &#x3D; {
              node_id: data.node_id,
              name: data.name,
              params: data.params,
              inlets: (data.inlets &#x3D;&#x3D;&#x3D; undefined) ? [0] : data.inlets 
            }
            return op;
          });
        }
        
          const envt: FileObj &#x3D; {
            version: &#x27;0.0.0&#x27;,
            workspace: null,
            filename: &#x27;paste&#x27;,
            nodes: (data.nodes &#x3D;&#x3D;&#x3D; undefined) ? [] : data.nodes,
            treenodes: (data.tree &#x3D;&#x3D;&#x3D; undefined) ? [] : data.tree,
            draft_nodes: draft_nodes,
            notes:  [],
            ops: ops,
            scale: 5,
          }
    
          return Promise.resolve({data: envt, name: &#x27;paste&#x27;, desc: &#x27;a file represeting copied information&#x27;, status: 0, id:-1 }); 
  
        }
      )



    

    }, 

    // wif: async (filename: string, data: any) : Promise&lt;LoadResponse&gt; &#x3D;&gt; {
    //   this.clearAll();


    //   let drafts: Array&lt;Draft&gt; &#x3D; [];
    //   let looms: Array&lt;Loom&gt; &#x3D; [];
    //   let version &#x3D; &#x27;0.0.0&#x27;;
     
    //   var stringWithoutMetadata &#x3D; utilInstance.getSubstringAfter(&quot;CONTENTS&quot;, data);
    //   const warps:number &#x3D; utilInstance.getInt(&quot;Threads&quot;,utilInstance.getSubstringAfter(&quot;WARP]&quot;,stringWithoutMetadata));
    //   const wefts:number &#x3D; utilInstance.getInt(&quot;Threads&quot;,utilInstance.getSubstringAfter(&quot;WEFT]&quot;,stringWithoutMetadata));
    //   const pattern: Array&lt;Array&lt;Cell&gt;&gt; &#x3D; [];
      
    //   this.ns.resetNotes(); 

    //   for (var i &#x3D; 0; i &lt; wefts; i++) {
    //     pattern.push([]);
    //     for (var j &#x3D; 0; j &lt; warps; j++) {
    //       pattern[i].push(new Cell(null));
    //       pattern[i][j].setHeddle(false);
    //     }
    //   }

    //   const draft &#x3D; initDraft();
    //   draft.drawdown &#x3D; generateDrawdownWithPattern(pattern, warps, wefts);
    //   drafts.push(draft);
    //   draft.gen_name &#x3D; data.name;

    // let frames &#x3D; utilInstance.getInt(&quot;Shafts&quot;, data);
    // let treadles &#x3D; utilInstance.getInt(&quot;Treadles&quot;, data);
    
    // const loom:Loom &#x3D; new Loom(draft, &#x27;frame&#x27;, frames, treadles);
    // looms.push(loom);

    // // draft.loom.tieup &#x3D; []

    // // for (var i &#x3D; 0; i &lt; frames; i++) {
    // //   draft.loom.tieup.push([]);
    // //   for (var j &#x3D; 0; j &lt; treadles; j++) {
    // //     draft.loom.tieup[i].push(false);
    // //   }
    // // }

    // if (utilInstance.getBool(&quot;TREADLING&quot;, stringWithoutMetadata)) {
    //   var treadling &#x3D; utilInstance.getTreadling(stringWithoutMetadata, draft);
    //   loom.overloadTreadling(treadling, version, pattern.length);
    // }
    // if (utilInstance.getBool(&quot;THREADING&quot;, stringWithoutMetadata)) {
    //   var threading &#x3D; utilInstance.getThreading(stringWithoutMetadata, draft);
    //   loom.overloadThreading(threading);
    // }
    // if (utilInstance.getBool(&quot;TIEUP&quot;, data)) {
    //   var tieups &#x3D; utilInstance.getTieups(stringWithoutMetadata, draft);
    //   loom.overloadTieup(tieups);

    // }
    // if (utilInstance.getBool(&quot;COLOR TABLE&quot;,data)) {
    //   if (utilInstance.getString(&quot;Form&quot;, data) &#x3D;&#x3D;&#x3D; &quot;RGB&quot;) {
    //     let color_table: Array&lt;Shuttle&gt;  &#x3D; utilInstance.getColorTable(data);
    //     var shuttles &#x3D; color_table;

    //     /** TODO: Update this to add, not overwrite, shuttles */
    //     this.ms.overloadShuttles(shuttles);
    //     draft.overloadRowShuttleMapping(utilInstance.getRowToShuttleMapping(data, draft));
    //     draft.overloadColShuttleMapping(utilInstance.getColToShuttleMapping(data, draft));
    //   }
    // }

    // draft.recalculateDraft(tieups, treadling, threading);


    // const proxies &#x3D; this.tree.getNewDraftProxies(draft, []);

    
    // const f: FileObj &#x3D; {
    //   version: &#x27;na&#x27;,
    //   filename: filename,
    //   drafts: drafts,
    //   looms: looms,
    //   nodes: [proxies.node], 
    //   treenodes: [proxies.treenode],
    //   ops: [],
    //   scale: 5
    // }


    // return Promise.resolve({data: f ,status: 0});
    // },
    /**
     * takes in a jpg, creates as many drafts as there are unique colors in the image. 
     * @param data 
     * @returns 
     */
    // jpg: async (filename: string, data: any) : Promise&lt;LoadResponse&gt; &#x3D;&gt; {
    //   this.clearAll();

    //   let drafts: Array&lt;Draft&gt; &#x3D; [];
    //   let looms: Array&lt;Loom&gt; &#x3D; [];
    //   this.ns.resetNotes(); 

    //   let e &#x3D; data;
    //   const warps &#x3D; e.width;
    //   const wefts &#x3D; e.height;
  
    //   var img &#x3D; e.data;

    //   let hex_string: string &#x3D; &quot;&quot;;
    //   const img_as_hex: Array&lt;string&gt; &#x3D; [];
    //   img.forEach((el, ndx) &#x3D;&gt; {
    //     hex_string &#x3D; hex_string + el.toString(16);
    //     if(ndx % 4 &#x3D;&#x3D;&#x3D; 3){
    //       img_as_hex.push(hex_string);
    //       hex_string &#x3D; &quot;&quot;;
    //     }

    //   });


    //   //the color table is a unique list of all the colors in this image
    //   const seen: Array&lt;string&gt; &#x3D; [];
    //   const color_table: Array&lt;string&gt; &#x3D; img_as_hex.filter((el, ndx) &#x3D;&gt; {
    //     if(seen.find(seen &#x3D;&gt; seen &#x3D;&#x3D;&#x3D; el) &#x3D;&#x3D;&#x3D; undefined){
    //       seen.push(el);
    //       return true;
    //     }
    //   });
    //   console.log(&quot;color table&quot;, color_table);


    //   //create a draft for each color table
    //   color_table.forEach(color &#x3D;&gt; {
    //     const draft &#x3D; initDraft();
    //     draft.drawdown &#x3D; generateDrawdownWithPattern([[new Cell(false)]], warps, wefts);
    //     console.log(draft);
    //     img_as_hex.forEach((el, ndx)&#x3D;&gt;{
    //       const r: number &#x3D; Math.floor(ndx/warps);
    //       const c: number &#x3D; ndx % warps;
    //       if(el &#x3D;&#x3D;&#x3D; color) draft.drawdown[r][c].setHeddleUp();
    //       else draft.drawdown[r][c].unsetHeddle();
    //     });
    //     drafts.push(draft);
    //     const loom:Loom &#x3D; new Loom(draft, &#x27;jacquard&#x27;, 8, 10);
    //     looms.push(loom);
    //   })



  
    //   // for (var i&#x3D;0; i&lt; e.height; i++) {
    //   //   pattern.push([]);
    //   //   for (var j&#x3D;0; j&lt; e.width; j++) {
    //   //     var idx &#x3D; (i * 4 * warps) + (j * 4);
    //   //     var threshold &#x3D; (img[idx] + img[idx+1] + img[idx+2]);
    //   //     var alpha &#x3D; img[idx + 3];
  
    //   //     if (threshold &lt; 750 &amp;&amp; alpha !&#x3D; 0) {
    //   //       pattern[i].push(new Cell(true));
    //   //     } else {
    //   //       pattern[i].push(new Cell(false));
    //   //     }
    //   //   }
    //   // }
  
    //   // const draft: Draft &#x3D; new Draft({warps: warps, wefts: wefts, pattern: pattern});
    //   // drafts.push(draft);
      
    //   // //create a blank loom to accompany this
    //   // const loom:Loom &#x3D; new Loom(draft, 8, 10);
    //   // loom.overloadType(&#x27;jacquard&#x27;);
    //   // looms.push(loom);


    //   const f: FileObj &#x3D; {
    //     filename: filename,
    //     version: &#x27;na&#x27;,
    //     drafts: drafts,
    //     looms: looms,
    //     nodes: [], 
    //     treenodes: [],
    //     ops: [],
    //     scale: 5
    //   }
  
    //   return Promise.resolve({data: f ,status: 0});  
    // },
    // bmp: async (filename: string, data: any) : Promise&lt;LoadResponse&gt; &#x3D;&gt; {
    //   this.clearAll();

    //   let drafts: Array&lt;Draft&gt; &#x3D; [];
    //   let looms: Array&lt;Loom&gt; &#x3D; [];

    //   let e &#x3D; data;
    //   const warps &#x3D; e.width;
    //   const wefts &#x3D; e.height;
  
    //   var img &#x3D; e.data;
    //   var pattern &#x3D; [];
  
    //   for (var i&#x3D;0; i&lt; e.height; i++) {
    //     pattern.push([]);
    //     for (var j&#x3D;0; j&lt; e.width; j++) {
    //       var idx &#x3D; (i * 4 * warps) + (j * 4);
    //       var threshold &#x3D; (img[idx] + img[idx+1] + img[idx+2]);
    //       var alpha &#x3D; img[idx + 3];
  
    //       if (threshold &lt; 750 &amp;&amp; alpha !&#x3D; 0) {
    //         pattern[i].push(new Cell(true));
    //       } else {
    //         pattern[i].push(new Cell(false));
    //       }
    //     }
    //   }
  
    //   const draft: Draft &#x3D; new Draft({warps: warps, wefts: wefts, pattern: pattern});
    //   drafts&#x3D; [ draft];
      
    //   //create a blank loom to accompany this
    //   const loom:Loom &#x3D; new Loom(draft, &#x27;jacquard&#x27;, 8, 10);
    //   looms.push(loom);

    //   const proxies &#x3D; this.tree.getNewDraftProxies(draft, []);

    
    //   const f: FileObj &#x3D; {
    //     filename: filename,
    //     version: &#x27;na&#x27;,
    //     drafts: drafts,
    //     looms: looms,
    //     nodes: [proxies.node], 
    //     treenodes: [proxies.treenode],
    //     ops: [],
    //     scale: 5
    //   }
  
    //   return Promise.resolve({data: f ,status: 0});  
    // },
    form: async (f:any):Promise&lt;LoadResponse&gt; &#x3D;&gt;{
      this.clearAll();

      let drafts: Array&lt;Draft&gt; &#x3D; [];
      let looms: Array&lt;Loom&gt; &#x3D; [];

      var warps &#x3D; 20;
      if(f.value.warps !&#x3D;&#x3D; undefined) warps &#x3D; f.value.warps;


      var wefts &#x3D; 20;
      if(f.value.wefts !&#x3D;&#x3D; undefined) wefts &#x3D; f.value.wefts;

      const draft: Draft &#x3D; initDraftWithParams({warps: warps, wefts: wefts});

      var frame_num &#x3D; (f.value.frame_num &#x3D;&#x3D;&#x3D; undefined) ? 8 : f.value.frame_num;
      var treadle_num &#x3D; (f.value.treadle_num &#x3D;&#x3D;&#x3D; undefined) ? 10 : f.value.treadle_num;
      var loomtype &#x3D; (f.value.loomtype &#x3D;&#x3D;&#x3D; undefined) ? &#x27;frame&#x27; : f.value.loomtype;
      var frame_num &#x3D; (f.value.frame_num &#x3D;&#x3D;&#x3D; undefined) ? 2 : f.value.frame_num;
      var treadle_num &#x3D; (f.value.treadle_num &#x3D;&#x3D;&#x3D; undefined) ? 2 : f.value.treadle_num;
      if(f.value.loomtype &#x3D;&#x3D; &#x27;direct&#x27;) treadle_num &#x3D; frame_num;
      var epi &#x3D; (f.value.epi &#x3D;&#x3D;&#x3D; undefined) ? 10 : f.value.epi;
      var units &#x3D; (f.value.units &#x3D;&#x3D;&#x3D; undefined || ! f.value.units) ? &quot;in&quot; : f.value.units;
      


      const loom_settings: LoomSettings &#x3D; {
        type: loomtype,
        epi: epi, 
        units: units,
        frames: frame_num,
        treadles: treadle_num
      }

      this.ws.inferData([loom_settings]);
      

      const loomutils &#x3D; getLoomUtilByType(loomtype);
      return loomutils.computeLoomFromDrawdown(draft.drawdown, loom_settings, 0).then(loom &#x3D;&gt; {
        looms.push(loom);
        const proxies &#x3D; this.tree.getNewDraftProxies(draft, []);
        draft.id  &#x3D; proxies.node.node_id;
        proxies.draft_node.draft &#x3D; draft;
        proxies.draft_node.draft_id &#x3D; draft.id;
        proxies.draft_node.loom &#x3D; loom;
        proxies.draft_node.loom_settings &#x3D; loom_settings;



        
        const envt: FileObj &#x3D; {
          version: this.vs.currentVersion(),
          workspace: this.ws.exportWorkspace(),
          filename: &quot;adacad mixer&quot;,
          nodes: [proxies.node], 
          treenodes: [proxies.treenode],
          draft_nodes: [proxies.draft_node],
          notes: [],
          ops: [],
          scale: 5
        }
    
        return Promise.resolve({data: envt, name: &quot;new draft&quot;, desc: &quot;created via form&quot;, status: 0, id: this.files.generateFileId()});

      });

  

      


    }
  }

  // interface FileSaver{
  //   ada: (drafts: Array&lt;Draft&gt;, looms: Array&lt;Loom&gt;, pattern: Array&lt;Pattern&gt;, palette:PaletteComponent) &#x3D;&gt; void,
  //   wif: (drafts: Array&lt;Draft&gt;, looms: Array&lt;Loom&gt;) &#x3D;&gt; void,
  //   bmp: (drafts: Array&lt;Draft&gt;) &#x3D;&gt; LoadResponse,
  //   jpg: (drafts: Array&lt;Draft&gt;, looms: Array&lt;Loom&gt;, pattern: Array&lt;Pattern&gt;, palette:PaletteComponent) &#x3D;&gt; void
  // }
  

  const dsaver: FileSaver &#x3D; {

    copy:  async (include: Array&lt;number&gt;, current_scale: number) : Promise&lt;SaveObj&gt; &#x3D;&gt; {
    
      const out: SaveObj &#x3D; {
        type: &#x27;partial&#x27;,
        version: this.vs.currentVersion(),
        workspace: null,
        nodes: this.tree.exportNodesForSaving(current_scale),
        tree: this.tree.exportTreeForSaving(),
        draft_nodes: await this.tree.exportDraftNodeProxiesForSaving(),
        ops: this.tree.exportOpMetaForSaving(),
        notes: [],
        materials: this.ms.exportForSaving(),
        scale: 5
      }

      //now filter out things that aren&#x27;t relevant
      out.nodes &#x3D; out.nodes.filter(node &#x3D;&gt; include.find(el &#x3D;&gt; el &#x3D;&#x3D; node.node_id) !&#x3D;&#x3D; undefined);
      out.nodes.forEach(node &#x3D;&gt; {node.topleft &#x3D; {x: node.topleft.x + 50, y: node.topleft.y+50}});
      out.tree &#x3D; out.tree.filter(tn &#x3D;&gt; include.find(el &#x3D;&gt; el &#x3D;&#x3D; tn.node) !&#x3D;&#x3D; undefined);
      out.draft_nodes &#x3D; out.draft_nodes.filter(dn &#x3D;&gt;  include.find(el &#x3D;&gt; el &#x3D;&#x3D; dn.node_id) !&#x3D;&#x3D; undefined);
      out.ops &#x3D; out.ops.filter(op &#x3D;&gt; include.find(el &#x3D;&gt; el &#x3D;&#x3D; op.node_id) !&#x3D;&#x3D; undefined)


      return Promise.resolve(out);

    },
    
    ada:  async (type: string, for_timeline: boolean, current_scale: number) : Promise&lt;{json: string, file: SaveObj}&gt; &#x3D;&gt; {
           
      const out: SaveObj &#x3D; {
        version: this.vs.currentVersion(),
        workspace: this.ws.exportWorkspace(),
        type: type,
        nodes: this.tree.exportNodesForSaving(current_scale),
        tree: this.tree.exportTreeForSaving(),
        draft_nodes: await this.tree.exportDraftNodeProxiesForSaving(),
        ops: this.tree.exportOpMetaForSaving(),
        notes: this.ns.exportForSaving(),
        materials: this.ms.exportForSaving(),
        scale: current_scale
      }

      //update this to return the object and see how it writes
      var theJSON &#x3D; JSON.stringify(out);
      return Promise.resolve({json: theJSON, file: out});


    },
   // wif: async (draft: Draft, loom: Loom) : Promise&lt;string&gt; &#x3D;&gt; {
      // const shuttles: Array&lt;Shuttle&gt; &#x3D; this.ms.getShuttles();
      //   //will need to import the obj for draft2wif.ts and then use it and pass this.weave for fileContents
      // var fileContents &#x3D; &quot;[WIF]\nVersion&#x3D;1.1\nDate&#x3D;November 6, 2020\nDevelopers&#x3D;Unstable Design Lab at the University of Colorado Boulder\nSource Program&#x3D;AdaCAD\nSource Version&#x3D;3.0\n[CONTENTS]&quot;;
      // var fileType &#x3D; &quot;text/plain&quot;;

      // fileContents +&#x3D; &quot;\nCOLOR PALETTE&#x3D;yes\nWEAVING&#x3D;yes\nWARP&#x3D;yes\nWEFT&#x3D;yes\nTIEUP&#x3D;yes\nCOLOR TABLE&#x3D;yes\nTHREADING&#x3D;yes\nWARP COLORS&#x3D;yes\nTREADLING&#x3D;yes\nWEFT COLORS&#x3D;yes\n&quot;;
      
      // fileContents +&#x3D; &quot;[COLOR PALETTE]\n&quot;;
      // fileContents +&#x3D; &quot;Entries&#x3D;&quot; + (shuttles.length).toString() +&quot;\n&quot;;
      // fileContents +&#x3D; &quot;Form&#x3D;RGB\nRange&#x3D;0,255\n&quot;;

      // fileContents +&#x3D; &quot;[WEAVING]\nShafts&#x3D;&quot;;
      // fileContents +&#x3D; loom.min_frames.toString();
      // fileContents +&#x3D; &quot;\nTreadles&#x3D;&quot;;
      // fileContents +&#x3D; loom.min_treadles.toString();
      // fileContents +&#x3D; &quot;\nRising Shed&#x3D;yes\n&quot;;
      // fileContents +&#x3D; &quot;[WARP]\nThreads&#x3D;&quot;;
      // fileContents +&#x3D; draft.warps.toString();
      
      // var warpColors &#x3D; [];
      // for (var i &#x3D; 0; i &lt; draft.colShuttleMapping.length; i++) {
      //   if (!warpColors.includes(draft.colShuttleMapping[i])) {
      //     warpColors.push(draft.colShuttleMapping[i]);
      //   }
      // }
      // fileContents +&#x3D; &quot;\nColors&#x3D;&quot; + warpColors.length.toString();

      // fileContents +&#x3D; &quot;\n[WEFT]\nThreads&#x3D;&quot;;
      // fileContents +&#x3D; draft.wefts.toString();
      // var weftColors &#x3D; [];
      // for (var i &#x3D; 0; i &lt; draft.colShuttleMapping.length; i++) {
      //   if (!weftColors.includes(draft.colShuttleMapping[i])) {
      //     weftColors.push(draft.colShuttleMapping[i]);
      //   }
      // }
      // fileContents +&#x3D; &quot;\nColors&#x3D;&quot; + weftColors.length.toString();

      // fileContents +&#x3D; &quot;\n[TIEUP]\n&quot;;

      // var treadles &#x3D; [];
      // for (var i &#x3D;0; i &lt; loom.tieup.length;i++) {
      //   for (var j &#x3D; 0; j &lt; loom.tieup[i].length;j++) {
      //     if (loom.tieup[i][j] &amp;&amp; !treadles.includes(j)) {
      //       treadles.push(j);
      //     }
      //   }
      // }
      // for (var i &#x3D;0; i &lt; treadles.length; i++) {
      //   fileContents +&#x3D; (treadles[i]+1).toString() + &quot;&#x3D;&quot;;
      //   var lineMarked &#x3D; false;
      //   for (var j &#x3D; 0; j &lt; loom.tieup.length; j++){
      //     if (loom.tieup[j][treadles[i]]) { 
      //       if (lineMarked) {
      //         fileContents +&#x3D; &quot;,&quot;;
      //       }
      //       fileContents +&#x3D; (j+1).toString();
      //       lineMarked&#x3D;true;
      //     }
      //   }
      //   fileContents +&#x3D; &quot;\n&quot;;
      // }

      // fileContents+&#x3D; &quot;[COLOR TABLE]\n&quot;;
      // //Reference: https://css-tricks.com/converting-color-spaces-in-javascript/ for conversion for hex to RGB
      // var counter &#x3D; 1;
      // for (var i &#x3D; 0; i &lt; shuttles.length; i++) {
      //   fileContents+&#x3D; (counter).toString();
      //   counter &#x3D; counter + 1;
      //   fileContents+&#x3D; &quot;&#x3D;&quot;;
      //   var hex &#x3D; shuttles[i].color;
      //   if (hex.length &#x3D;&#x3D; 7) {
      //     var r &#x3D; &quot;0x&quot; + hex[1] + hex[2];
      //     var g &#x3D; &quot;0x&quot; + hex[3] + hex[4];
      //     var b &#x3D; &quot;0x&quot; + hex[5] + hex[6];

      //     fileContents +&#x3D; (+r).toString() + &quot;,&quot; + (+g).toString() + &quot;,&quot; + (+b).toString() + &quot;\n&quot;;
      //   }
      // }
      
      // fileContents +&#x3D; &quot;[THREADING]\n&quot;;
      // for (var i&#x3D;0; i &lt;loom.threading.length; i++) {
      //   var frame &#x3D; loom.threading[i];
      //   if (frame !&#x3D; -1) {
      //     fileContents +&#x3D; (loom.threading.length-i).toString() + &quot;&#x3D;&quot; + (frame+1).toString() + &quot;\n&quot;;
      //   }
      // }

      // fileContents +&#x3D; &quot;[WARP COLORS]\n&quot;;
      // for (var i &#x3D; 0; i &lt; draft.colShuttleMapping.length; i++) {
      //   fileContents +&#x3D; (i+1).toString() + &quot;&#x3D;&quot; + (draft.colShuttleMapping[(draft.colShuttleMapping.length)-(i+1)]+1).toString() + &quot;\n&quot;;
      // }

      // //THIS WILL ONLY WORK WTIH FRAME LOOM DRAFT STYLE
      // fileContents +&#x3D; &quot;[TREADLING]\n&quot;;
      // for (var i &#x3D; 0; i &lt; loom.treadling.length; i++) {
      //   if (loom.treadling[i].length !&#x3D; 0 &amp;&amp; loom.treadling[i][0] !&#x3D; -1){
      //     fileContents +&#x3D; (i+1).toString() + &quot;&#x3D;&quot; + (loom.treadling[i][0]+1).toString() + &quot;\n&quot;;
      //   }
      // }

      // fileContents +&#x3D; &quot;[WEFT COLORS]\n&quot;;
      // for (var i &#x3D; 0; i &lt; draft.rowShuttleMapping.length; i++) { // will likely have to change the way I import too
      //   fileContents +&#x3D; (i+1).toString() + &quot;&#x3D;&quot; + (draft.rowShuttleMapping[i]+1).toString() + &quot;\n&quot;;
      // }

   //   const href:string &#x3D; &quot;data:&quot; + fileType +&quot;;base64,&quot; + btoa(fileContents);
   //   return Promise.resolve(href);
   // },
    bmp: async (canvas:HTMLCanvasElement) : Promise&lt;string&gt; &#x3D;&gt; {
      return Promise.resolve(canvas.toDataURL(&quot;image/jpg&quot;));

    },
    jpg: async (canvas:HTMLCanvasElement) : Promise&lt;string&gt; &#x3D;&gt; {
      return Promise.resolve(canvas.toDataURL(&quot;image/jpg&quot;));
    }
  }


  this.loader &#x3D; dloader;
  this.saver &#x3D; dsaver;
  


  }

  clearAll(){
    console.log(&quot;Clearing all in FS&quot;)
    this.tree.clear();
    this.ms.reset();
    this.ss.reset(),
    this.ns.clear();

  }




}
</code></pre>
    </div>
</div>







                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
           </div>
       </div>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/search/search.js"></script>
       <script src="../js/search/lunr.min.js"></script>
       <script src="../js/search/search-lunr.js"></script>

       <script src="../js/menu.js"></script>
       <script src="../js/libs/highlight.pack.js"></script>
       <script src="../js/libs/highlightjs-line-numbers.min.js"></script>
       <script src="../js/search/search_index.js"></script>
       <script>
            document.addEventListener('DOMContentLoaded', function() {
                hljs.initHighlightingOnLoad();
                hljs.initLineNumbersOnLoad();
            });
       </script>

    </body>
</html>
