<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>adacad documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	    <link rel="stylesheet" href="../styles/style.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="../" class="navbar-brand">adacad documentation</a>
            <button type="button" class="btn btn-default btn-menu fa fa-bars" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
            <div id="book-search-input" role="search">
                <input type="text" placeholder="Type to search">
            </div>
            <nav>
            
                <ul class="list">
            
                    <li class="title">
                        <a href="../">adacad documentation</a>
                    </li>
            
                    <li class="divider"></li>
            
            
                    <li class="chapter">
                        <a data-type="chapter-link" href="../"><span class="fa fa-home"></span>Getting started</a>
                        <ul class="links">
                                <li class="link">
                                    <a href="../" ><span class="fa fa-file-text-o"></span>README</a>
                                </li>
                                <li class="link">
                                    <a 
                                        
                                         href="../overview.html" 
                                         href="../overview.html" 
                                        >
                                        <span class="fa fa-th"></span>Overview
                                    </a>
                                </li>
                        </ul>
                    </li>
            
                    <li class="chapter">
                        <a data-type="chapter-link" href="./modules.html" >
                            <span class="fa fa-archive"></span>
                            <span>Modules</span>
                            <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                    data-target="#xs-modules-links"
                            ></span>
                        </a>
                        <ul class="links collapse in"
                                id="xs-modules-links"
                            >
                                <li class="link">
                                    <a href="../modules/AppModule.html" >AppModule</a>
                                </li>
                                <li class="link">
                                    <a href="../modules/AppRoutingModule.html" >AppRoutingModule</a>
                                </li>
                                <li class="link">
                                    <a href="../modules/CoreModule.html" >CoreModule</a>
                                </li>
                                <li class="link">
                                    <a href="../modules/DraftDetailModule.html" >DraftDetailModule</a>
                                </li>
                                <li class="link">
                                    <a href="../modules/MixerModule.html" >MixerModule</a>
                                </li>
                        </ul>
                    </li>
            
                    <li class="chapter">
                        <div class="simple">
                            <span class="fa fa-cogs"></span>
                            <span>Components</span>
                            <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                    data-target="#xs-components-links"
                                ></span>
                        </div>
                        <ul class="links collapse in"
                                id="xs-components-links"
                            >
                                <li class="link">
                                    <a href="../components/AboutModal.html" >AboutModal</a>
                                </li>
                                <li class="link">
                                    <a href="../components/ActionsComponent.html" >ActionsComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/AppComponent.html" >AppComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/BlankdraftModal.html" >BlankdraftModal</a>
                                </li>
                                <li class="link">
                                    <a href="../components/ConnectionComponent.html" >ConnectionComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/CrosssectionComponent.html" >CrosssectionComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/DesignComponent.html" >DesignComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/DraftDetailComponent.html" >DraftDetailComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/DraftviewerComponent.html" >DraftviewerComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/ExamplesComponent.html" >ExamplesComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/FilebrowserComponent.html" >FilebrowserComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/ImageComponent.html" >ImageComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/InitModal.html" >InitModal</a>
                                </li>
                                <li class="link">
                                    <a href="../components/InletComponent.html" >InletComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/LoadfileComponent.html" >LoadfileComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/LoginComponent.html" >LoginComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/LoomModal.html" >LoomModal</a>
                                </li>
                                <li class="link">
                                    <a href="../components/MaterialModal.html" >MaterialModal</a>
                                </li>
                                <li class="link">
                                    <a href="../components/MaterialsComponent.html" >MaterialsComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/MixerComponent.html" >MixerComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/MixerViewComponent.html" >MixerViewComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/NoteComponent.html" >NoteComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/OpHelpModal.html" >OpHelpModal</a>
                                </li>
                                <li class="link">
                                    <a href="../components/OperationComponent.html" >OperationComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/OpsComponent.html" >OpsComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/PaletteComponent.html" >PaletteComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/ParameterComponent.html" >ParameterComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/ProfileComponent.html" >ProfileComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/QuickopComponent.html" >QuickopComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/SelectionComponent.html" >SelectionComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/SidebarComponent.html" >SidebarComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/SignupComponent.html" >SignupComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/SimulationComponent.html" >SimulationComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/SnackbarComponent.html" >SnackbarComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/SubdraftComponent.html" >SubdraftComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/SystemsComponent.html" >SystemsComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/TopbarComponent.html" >TopbarComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/UploadFormComponent.html" >UploadFormComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/WeaverViewComponent.html" >WeaverViewComponent</a>
                                </li>
                        </ul>
                    </li>
            
                    <li class="chapter">
                        <div class="simple">
                            <span class="fa fa-code"></span>
                            <span>Directives</span>
                            <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                    data-target="#xs-directives-links"
                                ></span>
                        </div>
                        <ul class="links collapse in"
                                id="xs-directives-links"
                            >
                                <li class="link">
                                    <a href="../directives/KeycodesDirective.html" >KeycodesDirective</a>
                                </li>
                                <li class="link">
                                    <a href="../directives/MarqueeComponent.html" >MarqueeComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../directives/SelectionComponent.html" >SelectionComponent</a>
                                </li>
                        </ul>
                    </li>
            
                    <li class="chapter">
                        <div class="simple">
                            <span class="fa fa-file-code-o"></span>
                            <span>Classes</span>
                            <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                    data-target="#xs-classes-links"
                                ></span>
                        </div>
                        <ul class="links collapse in"
                                id="xs-classes-links"
                            >
                                <li class="link">
                                    <a href="../classes/AdaCADWeaverPage.html" >AdaCADWeaverPage</a>
                                </li>
                                <li class="link">
                                    <a href="../classes/MyErrorStateMatcher.html" >MyErrorStateMatcher</a>
                                </li>
                                <li class="link">
                                    <a href="../classes/Selection.html" >Selection</a>
                                </li>
                                <li class="link">
                                    <a href="../classes/Util.html" >Util</a>
                                </li>
                        </ul>
                    </li>
            
                    <li class="chapter">
                        <a data-type="chapter-link" href="../routes.html" ><span class="fa fa-code-fork"></span>Routes</a>
                    </li>
            
                    <li class="chapter">
                        <div class="simple">
                            <span class="fa fa-long-arrow-down"></span>
                            <span>Injectables</span>
                            <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                    data-target="#xs-injectables-links"
                                ></span>
                        </div>
                        <ul class="links collapse in"
                                id="xs-injectables-links"
                            >
                                <li class="link">
                                    <a href="../injectables/AuthService.html" >AuthService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/CollectionService.html" >CollectionService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/DesignmodesService.html" >DesignmodesService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/ExampleserviceService.html" >ExampleserviceService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/FabricssimService.html" >FabricssimService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/FileService.html" >FileService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/FilesystemService.html" >FilesystemService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/ImageService.html" >ImageService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/InkService.html" >InkService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/LayersService.html" >LayersService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/MaterialsService.html" >MaterialsService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/MultiselectService.html" >MultiselectService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/NotesService.html" >NotesService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/OperationDescriptionsService.html" >OperationDescriptionsService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/OperationService.html" >OperationService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/PatternfinderService.html" >PatternfinderService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/RenderService.html" >RenderService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/SimulationService.html"  class="active" >SimulationService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/StateService.html" >StateService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/SystemsService.html" >SystemsService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/TreeService.html" >TreeService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/UploadService.html" >UploadService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/VaeService.html" >VaeService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/VersionService.html" >VersionService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/ViewportService.html" >ViewportService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/WorkspaceService.html" >WorkspaceService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/ZoomService.html" >ZoomService</a>
                                </li>
                        </ul>
                    </li>
            
                    <li class="chapter">
                        <div class="simple">
                            <span class="fa fa-info"></span>
                            <span>Interfaces</span>
                            <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                    data-target="#xs-interfaces-links"
                                ></span>
                        </div>
                        <ul class="links collapse in"
                                id="xs-interfaces-links"
                            >
                                <li class="link">
                                    <a href="../interfaces/AnalyzedImage.html" >AnalyzedImage</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/Bounds.html" >Bounds</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/Cell.html" >Cell</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/ComboNode.html" >ComboNode</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/ComboTree.html" >ComboTree</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/DensityUnits.html" >DensityUnits</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/DesignActions.html" >DesignActions</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/DesignMode.html" >DesignMode</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/Draft.html" >Draft</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/DraftMap.html" >DraftMap</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/DraftNodeProxy.html" >DraftNodeProxy</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/FileObj.html" >FileObj</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/FileSaver.html" >FileSaver</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/Fileloader.html" >Fileloader</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/HistoryState.html" >HistoryState</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/IOTuple.html" >IOTuple</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/Ink.html" >Ink</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/Interlacement.html" >Interlacement</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/InterlacementVal.html" >InterlacementVal</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/Item.html" >Item</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/LoadResponse.html" >LoadResponse</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/LoomTypes.html" >LoomTypes</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/Material.html" >Material</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/MaterialMap.html" >MaterialMap</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/MaterialTypes.html" >MaterialTypes</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/Model.html" >Model</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/NodeComponentProxy.html" >NodeComponentProxy</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/Note.html" >Note</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/OpComponentProxy.html" >OpComponentProxy</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/OpInput.html" >OpInput</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/OpParamVal.html" >OpParamVal</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/OperationClassification.html" >OperationClassification</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/Point.html" >Point</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/SaveObj.html" >SaveObj</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/StartOptions.html" >StartOptions</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/StatusMessage.html" >StatusMessage</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/System.html" >System</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/TreeNode.html" >TreeNode</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/TreeNodeProxy.html" >TreeNodeProxy</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/Upload.html" >Upload</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/ViewModes.html" >ViewModes</a>
                                </li>
                        </ul>
                    </li>
            
            
                    <li class="chapter">
                        <a data-type="chapter-link" href="../miscellaneous.html" ><span class="fa fa-cubes"></span>Miscellaneous</a>
                    </li>
            
                    <li class="chapter">
                        <a data-type="chapter-link" href="../coverage.html" ><span class="fa fa-tasks"></span>Documentation coverage</a>
                    </li>
            
                    <li class="divider"></li>
                    <li class="copyright">
                            Documentation generated using <a href="https://compodoc.github.io/compodoc/" target="_blank">
                                        <img src="..//images/compodoc-vectorise.svg" class="img-responsive">
                            </a>
                    </li>
            
                </ul>
            
            </nav>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <nav>
                   
                       <ul class="list">
                   
                           <li class="title">
                               <a href="../">adacad documentation</a>
                           </li>
                   
                           <li class="divider"></li>
                   
                               <div id="book-search-input" role="search">
                                   <input type="text" placeholder="Type to search">
                               </div>
                   
                           <li class="chapter">
                               <a data-type="chapter-link" href="../"><span class="fa fa-home"></span>Getting started</a>
                               <ul class="links">
                                       <li class="link">
                                           <a href="../" ><span class="fa fa-file-text-o"></span>README</a>
                                       </li>
                                       <li class="link">
                                           <a 
                                               
                                                href="../overview.html" 
                                                href="../overview.html" 
                                               >
                                               <span class="fa fa-th"></span>Overview
                                           </a>
                                       </li>
                               </ul>
                           </li>
                   
                           <li class="chapter">
                               <a data-type="chapter-link" href="./modules.html" >
                                   <span class="fa fa-archive"></span>
                                   <span>Modules</span>
                                   <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                           data-target="#modules-links"
                                   ></span>
                               </a>
                               <ul class="links collapse in"
                                       id="modules-links"
                   >
                                       <li class="link">
                                           <a href="../modules/AppModule.html" >AppModule</a>
                                       </li>
                                       <li class="link">
                                           <a href="../modules/AppRoutingModule.html" >AppRoutingModule</a>
                                       </li>
                                       <li class="link">
                                           <a href="../modules/CoreModule.html" >CoreModule</a>
                                       </li>
                                       <li class="link">
                                           <a href="../modules/DraftDetailModule.html" >DraftDetailModule</a>
                                       </li>
                                       <li class="link">
                                           <a href="../modules/MixerModule.html" >MixerModule</a>
                                       </li>
                               </ul>
                           </li>
                   
                           <li class="chapter">
                               <div class="simple">
                                   <span class="fa fa-cogs"></span>
                                   <span>Components</span>
                                   <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                           data-target="#components-links"
                   ></span>
                               </div>
                               <ul class="links collapse in"
                                       id="components-links"
                   >
                                       <li class="link">
                                           <a href="../components/AboutModal.html" >AboutModal</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/ActionsComponent.html" >ActionsComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/AppComponent.html" >AppComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/BlankdraftModal.html" >BlankdraftModal</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/ConnectionComponent.html" >ConnectionComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/CrosssectionComponent.html" >CrosssectionComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/DesignComponent.html" >DesignComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/DraftDetailComponent.html" >DraftDetailComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/DraftviewerComponent.html" >DraftviewerComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/ExamplesComponent.html" >ExamplesComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/FilebrowserComponent.html" >FilebrowserComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/ImageComponent.html" >ImageComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/InitModal.html" >InitModal</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/InletComponent.html" >InletComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/LoadfileComponent.html" >LoadfileComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/LoginComponent.html" >LoginComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/LoomModal.html" >LoomModal</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/MaterialModal.html" >MaterialModal</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/MaterialsComponent.html" >MaterialsComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/MixerComponent.html" >MixerComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/MixerViewComponent.html" >MixerViewComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/NoteComponent.html" >NoteComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/OpHelpModal.html" >OpHelpModal</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/OperationComponent.html" >OperationComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/OpsComponent.html" >OpsComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/PaletteComponent.html" >PaletteComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/ParameterComponent.html" >ParameterComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/ProfileComponent.html" >ProfileComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/QuickopComponent.html" >QuickopComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/SelectionComponent.html" >SelectionComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/SidebarComponent.html" >SidebarComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/SignupComponent.html" >SignupComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/SimulationComponent.html" >SimulationComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/SnackbarComponent.html" >SnackbarComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/SubdraftComponent.html" >SubdraftComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/SystemsComponent.html" >SystemsComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/TopbarComponent.html" >TopbarComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/UploadFormComponent.html" >UploadFormComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/WeaverViewComponent.html" >WeaverViewComponent</a>
                                       </li>
                               </ul>
                           </li>
                   
                           <li class="chapter">
                               <div class="simple">
                                   <span class="fa fa-code"></span>
                                   <span>Directives</span>
                                   <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                           data-target="#directives-links"
                   ></span>
                               </div>
                               <ul class="links collapse in"
                                       id="directives-links"
                   >
                                       <li class="link">
                                           <a href="../directives/KeycodesDirective.html" >KeycodesDirective</a>
                                       </li>
                                       <li class="link">
                                           <a href="../directives/MarqueeComponent.html" >MarqueeComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../directives/SelectionComponent.html" >SelectionComponent</a>
                                       </li>
                               </ul>
                           </li>
                   
                           <li class="chapter">
                               <div class="simple">
                                   <span class="fa fa-file-code-o"></span>
                                   <span>Classes</span>
                                   <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                           data-target="#classes-links"
                   ></span>
                               </div>
                               <ul class="links collapse in"
                                       id="classes-links"
                   >
                                       <li class="link">
                                           <a href="../classes/AdaCADWeaverPage.html" >AdaCADWeaverPage</a>
                                       </li>
                                       <li class="link">
                                           <a href="../classes/MyErrorStateMatcher.html" >MyErrorStateMatcher</a>
                                       </li>
                                       <li class="link">
                                           <a href="../classes/Selection.html" >Selection</a>
                                       </li>
                                       <li class="link">
                                           <a href="../classes/Util.html" >Util</a>
                                       </li>
                               </ul>
                           </li>
                   
                           <li class="chapter">
                               <a data-type="chapter-link" href="../routes.html" ><span class="fa fa-code-fork"></span>Routes</a>
                           </li>
                   
                           <li class="chapter">
                               <div class="simple">
                                   <span class="fa fa-long-arrow-down"></span>
                                   <span>Injectables</span>
                                   <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                           data-target="#injectables-links"
                   ></span>
                               </div>
                               <ul class="links collapse in"
                                       id="injectables-links"
                   >
                                       <li class="link">
                                           <a href="../injectables/AuthService.html" >AuthService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/CollectionService.html" >CollectionService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/DesignmodesService.html" >DesignmodesService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/ExampleserviceService.html" >ExampleserviceService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/FabricssimService.html" >FabricssimService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/FileService.html" >FileService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/FilesystemService.html" >FilesystemService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/ImageService.html" >ImageService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/InkService.html" >InkService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/LayersService.html" >LayersService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/MaterialsService.html" >MaterialsService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/MultiselectService.html" >MultiselectService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/NotesService.html" >NotesService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/OperationDescriptionsService.html" >OperationDescriptionsService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/OperationService.html" >OperationService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/PatternfinderService.html" >PatternfinderService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/RenderService.html" >RenderService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/SimulationService.html"  class="active" >SimulationService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/StateService.html" >StateService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/SystemsService.html" >SystemsService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/TreeService.html" >TreeService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/UploadService.html" >UploadService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/VaeService.html" >VaeService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/VersionService.html" >VersionService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/ViewportService.html" >ViewportService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/WorkspaceService.html" >WorkspaceService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/ZoomService.html" >ZoomService</a>
                                       </li>
                               </ul>
                           </li>
                   
                           <li class="chapter">
                               <div class="simple">
                                   <span class="fa fa-info"></span>
                                   <span>Interfaces</span>
                                   <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                           data-target="#interfaces-links"
                   ></span>
                               </div>
                               <ul class="links collapse in"
                                       id="interfaces-links"
                   >
                                       <li class="link">
                                           <a href="../interfaces/AnalyzedImage.html" >AnalyzedImage</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/Bounds.html" >Bounds</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/Cell.html" >Cell</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/ComboNode.html" >ComboNode</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/ComboTree.html" >ComboTree</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/DensityUnits.html" >DensityUnits</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/DesignActions.html" >DesignActions</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/DesignMode.html" >DesignMode</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/Draft.html" >Draft</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/DraftMap.html" >DraftMap</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/DraftNodeProxy.html" >DraftNodeProxy</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/FileObj.html" >FileObj</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/FileSaver.html" >FileSaver</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/Fileloader.html" >Fileloader</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/HistoryState.html" >HistoryState</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/IOTuple.html" >IOTuple</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/Ink.html" >Ink</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/Interlacement.html" >Interlacement</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/InterlacementVal.html" >InterlacementVal</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/Item.html" >Item</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/LoadResponse.html" >LoadResponse</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/LoomTypes.html" >LoomTypes</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/Material.html" >Material</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/MaterialMap.html" >MaterialMap</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/MaterialTypes.html" >MaterialTypes</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/Model.html" >Model</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/NodeComponentProxy.html" >NodeComponentProxy</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/Note.html" >Note</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/OpComponentProxy.html" >OpComponentProxy</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/OpInput.html" >OpInput</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/OpParamVal.html" >OpParamVal</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/OperationClassification.html" >OperationClassification</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/Point.html" >Point</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/SaveObj.html" >SaveObj</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/StartOptions.html" >StartOptions</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/StatusMessage.html" >StatusMessage</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/System.html" >System</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/TreeNode.html" >TreeNode</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/TreeNodeProxy.html" >TreeNodeProxy</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/Upload.html" >Upload</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/ViewModes.html" >ViewModes</a>
                                       </li>
                               </ul>
                           </li>
                   
                   
                           <li class="chapter">
                               <a data-type="chapter-link" href="../miscellaneous.html" ><span class="fa fa-cubes"></span>Miscellaneous</a>
                           </li>
                   
                           <li class="chapter">
                               <a data-type="chapter-link" href="../coverage.html" ><span class="fa fa-tasks"></span>Documentation coverage</a>
                           </li>
                   
                           <li class="divider"></li>
                           <li class="copyright">
                                   Documentation generated using <a href="https://compodoc.github.io/compodoc/" target="_blank">
                                               <img src="..//images/compodoc-vectorise.svg" class="img-responsive">
                                   </a>
                           </li>
                   
                       </ul>
                   
                   </nav>
               </div>
               <div class="content injectable">
                   <div class="content-data">




<ol class="breadcrumb">
  <li>Injectables</li>
  <li>SimulationService</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
    <li class="active">
        <a href="#infos" id="infos-tab" role="tab" data-toggle="tab">Infos</a>
    </li>
    <li>
        <a href="#source" role="tab" id="source-tab" data-toggle="tab">Source</a>
    </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="infos">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/app/core/provider/simulation.service.ts</code>
        </p>


            <section>
                <h3 id="constructor">Constructor</h3>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <code>constructor(ms: <a href="../injectables/MaterialsService.html" >MaterialsService</a>)</code>
                                </td>
                            </tr>
            
                        </tbody>
                    </table>
            </section>

            <section>
                <h3 id="methods">Methods</h3>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b><span class="modifier">Public</span> endSimulation</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <span class="modifier-icon method fa fa-play circle">
                                            <span class="fa fa-circle"></span>
                                        </span>
                                    <code>endSimulation(scene: any)</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description"><p>clears the memory devoted to a scene</p>
            </div>
                                        <div class="io-description">
                                                <b>Parameters :</b>
                                                <ul class="jsdoc-params">
                                                        <li>
                                                            <div>
                                                                <b>scene</b>
                                                            </div>
                                                            <div>
                                                                
                                                            </div>
                                                        </li>
                                                </ul>
                                        </div>
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                            <div class="io-description">
                                                
                                            </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b><span class="modifier">Private</span> tileDraft</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <span class="modifier-icon method fa fa-play lock">
                                            <span class="fa fa-lock"></span>
                                        </span>
                                    <code>tileDraft(draft: Draft, boundary: number)</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>any</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b><span class="modifier">Public</span> generateSimulationData</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <span class="modifier-icon method fa fa-play circle">
                                            <span class="fa fa-circle"></span>
                                        </span>
                                    <code>generateSimulationData(draft: Draft, sim: SimulationVars)</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description"><p>generates a new simulation with the given draft and simulation parameters</p>
            </div>
                                        <div class="io-description">
                                                <b>Parameters :</b>
                                                <ul class="jsdoc-params">
                                                        <li>
                                                            <div>
                                                                <b>draft</b>
                                                            </div>
                                                            <div>
                                                                
                                                            </div>
                                                        </li>
                                                        <li>
                                                            <div>
                                                                <b>sim</b>
                                                            </div>
                                                            <div>
                                                                
                                                            </div>
                                                        </li>
                                                </ul>
                                        </div>
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>any</code>
            
                                        </div>
                                            <div class="io-description">
                                                <p>promise for simulation data</p>
            
                                            </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b><span class="modifier">Public</span> setupSimulation</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <span class="modifier-icon method fa fa-play circle">
                                            <span class="fa fa-circle"></span>
                                        </span>
                                    <code>setupSimulation(draft: Draft, renderer: any, scene: any, camera: any, layer_threshold: number, warp_range: number, warp_spacing: number, layer_spacing: number, max_interlacement_width: number, max_interlacement_height: number, boundary: number, radius: number, ms: <a href="../injectables/MaterialsService.html" >MaterialsService</a>)</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>any</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b><span class="modifier">Public</span> recalcSimData</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <span class="modifier-icon method fa fa-play circle">
                                            <span class="fa fa-circle"></span>
                                        </span>
                                    <code>recalcSimData(scene: any, draft: Draft, warp_spacing: number, layer_spacing: number, layer_threshold: number, max_interlacement_width: number, max_interlacement_height: number, boundary: number, radius: number, ms: <a href="../injectables/MaterialsService.html" >MaterialsService</a>)</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>any</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b><span class="modifier">Public</span> renderSimdata</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <span class="modifier-icon method fa fa-play circle">
                                            <span class="fa fa-circle"></span>
                                        </span>
                                    <code>renderSimdata(scene: any, simdata: SimulationData, warps: boolean, wefts: boolean, warp_layer: boolean, weft_layers: boolean, topo: boolean, show_draft: boolean)</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> drawAxis</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>drawAxis(scene: any, simdata: SimulationData, boundary_vtx: any)</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> getBoundaryVtxs</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>getBoundaryVtxs(simdata: SimulationData)</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description"><p>given the vtx data and a boundary, this function returns the min/max values for wefts and warps to be used to position the start and end of the warp and weft data. </p>
            </div>
                                        <div class="io-description">
                                                <b>Parameters :</b>
                                                <ul class="jsdoc-params">
                                                        <li>
                                                            <div>
                                                                <b>simdata</b>
                                                            </div>
                                                            <div>
                                                                
                                                            </div>
                                                        </li>
                                                </ul>
                                        </div>
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>{ min_x: number; max_x: number; min_y: number; max_y: number; }</code>
            
                                        </div>
                                            <div class="io-description">
                                                
                                            </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> getClosestVtx</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>getClosestVtx(simdata: SimulationData, warp: boolean, i: number, j: number)</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>YarnVertex</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> drawYarns</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>drawYarns(scene: any, simdata: SimulationData, boundary_vtx: any)</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description"><p>this renders the imagery of the yarns. It uses the boundary provided by </p>
            </div>
                                        <div class="io-description">
                                                <b>Parameters :</b>
                                                <ul class="jsdoc-params">
                                                        <li>
                                                            <div>
                                                                <b>scene</b>
                                                            </div>
                                                            <div>
                                                                
                                                            </div>
                                                        </li>
                                                        <li>
                                                            <div>
                                                                <b>simdata</b>
                                                            </div>
                                                            <div>
                                                                
                                                            </div>
                                                        </li>
                                                </ul>
                                        </div>
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                            <div class="io-description">
                                                
                                            </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> drawDraft</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>drawDraft(scene: any, draft: Draft, sim: SimulationVars, boundary_vtx: any)</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> showDraft</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>showDraft()</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> hideDraft</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>hideDraft()</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> showWarps</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>showWarps()</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> hideWarps</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>hideWarps()</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> showWefts</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>showWefts()</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> hideWefts</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>hideWefts()</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> hideWarpLayerMap</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>hideWarpLayerMap()</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> showWarpLayerMap</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>showWarpLayerMap()</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> hideWeftLayerMap</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>hideWeftLayerMap()</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> showWeftLayerMap</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>showWeftLayerMap()</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> hideTopo</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>hideTopo()</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> showTopo</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>showTopo()</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> drawWeftLayerMap</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>drawWeftLayerMap(scene: any, boundary_vtx: any)</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> drawWarpLayerMap</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>drawWarpLayerMap(scene: any, boundary_vtx: any)</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> drawTopology</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>drawTopology(scene: any, boundary_vtx: any)</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> applyOrientationConversion</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>applyOrientationConversion(object: any, boundary_vtx: any)</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> drawEndCaps</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>drawEndCaps(scene: any, simdata: SimulationData, boundary_vtx: any)</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
            </section>

            <section>
                <h3 id="inputs">Properties</h3>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> axis_scene</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <code>axis_scene:     <code>any</code>
            </bcode>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> currentSim</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <code>currentSim:     <code>SimulationData</code>
            </bcode>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> draft_scene</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <code>draft_scene:     <code>any</code>
            </bcode>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> hasSimulation</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <code>hasSimulation:     <code>boolean</code>
            </bcode>
                                </td>
                            </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <i>Default value: </i><code>false</code>
                                    </td>
                                </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> topo_scene</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <code>topo_scene:     <code>any</code>
            </bcode>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> warp_layer_map_scene</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <code>warp_layer_map_scene:     <code>any</code>
            </bcode>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> warp_scene</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <code>warp_scene:     <code>any</code>
            </bcode>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> weft_layer_map_scene</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <code>weft_layer_map_scene:     <code>any</code>
            </bcode>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> weft_scene</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <code>weft_scene:     <code>any</code>
            </bcode>
                                </td>
                            </tr>
                        </tbody>
                    </table>
            </section>
    </div>
    <div class="tab-pane fade tab-source-code" id="source">
        <pre><code class="hljs javascript">import { Injectable } from &#x27;@angular/core&#x27;;
import * as THREE from &#x27;three&#x27;;
import { createLayerMaps, getDraftTopology, translateTopologyToPoints } from &#x27;../model/yarnsimulation&#x27;;
import { MaterialsService } from &#x27;../provider/materials.service&#x27;;
import { OrbitControls } from &#x27;three/examples/jsm/controls/OrbitControls&#x27;
import { Lut } from &#x27;three/examples/jsm/math/Lut&#x27;;
import { Draft, Interlacement, SimulationData, SimulationVars, YarnVertex } from &#x27;../model/datatypes&#x27;;
import { initDraftFromDrawdown, warps, wefts } from &#x27;../model/drafts&#x27;;
import { getCellValue } from &#x27;../model/cell&#x27;;
import { Sequence } from &#x27;../model/sequence&#x27;;
import { from } from &#x27;rxjs&#x27;;


@Injectable({
  providedIn: &#x27;root&#x27;
})
export class SimulationService {

  hasSimulation: boolean &#x3D; false;
  currentSim: SimulationData  &#x3D; null;

  warp_layer_map_scene: any;
  weft_layer_map_scene: any;
  warp_scene: any;
  weft_scene: any;
  axis_scene: any;
  topo_scene: any;
  draft_scene: any;

  
  constructor(private ms: MaterialsService) { 

 

  }


  /**
   * clears the memory devoted to a scene
   * @param scene 
   */
  public endSimulation(scene){

   // document.body.removeChild(this.renderer.domElement);
    scene.clear();
    scene.children.forEach(childMesh &#x3D;&gt; {
      if(childMesh.geometry !&#x3D;&#x3D; undefined) childMesh.geometry.dispose();
      if(childMesh.texture !&#x3D;&#x3D; undefined) childMesh.texture.dispose();
      if(childMesh.material !&#x3D;&#x3D; undefined) childMesh.material.dispose();
    });

    this.hasSimulation &#x3D; false;
  }

  private tileDraft(draft: Draft, boundary: number) : Promise&lt;Draft&gt;{
    //extend to left and right top and bottom
    let pattern &#x3D; new Sequence.TwoD();
    let weft_mats &#x3D; new Sequence.OneD();
    let weft_sys  &#x3D; new Sequence.OneD();
    let warp_mats &#x3D; new Sequence.OneD();
    let warp_sys &#x3D; new Sequence.OneD();

    draft.drawdown.forEach((row, ndx) &#x3D;&gt; {
      let seq &#x3D; new Sequence.OneD().import(row);
      weft_mats.push(draft.rowShuttleMapping[ndx]);
      weft_sys.push(draft.rowSystemMapping[ndx]);

      if(ndx &#x3D;&#x3D; 0){
        warp_mats.import(draft.colShuttleMapping);
        warp_sys.import(draft.colSystemMapping)
      }

      //first, expand rows
      for(let i &#x3D; 0; i &lt; boundary; i++){
        
        seq.push(getCellValue(row[i%row.length]));
        let from_end &#x3D; (i%row.length);
        seq.unshift(getCellValue(row[(row.length -1 -from_end)]))

        if(ndx &#x3D;&#x3D; 0){

          warp_mats.push(draft.colShuttleMapping[i%row.length]);
          warp_mats.unshift(draft.colShuttleMapping[(row.length -1 -from_end)])
          warp_sys.push(draft.colSystemMapping[i%row.length]);
          warp_sys.unshift(draft.colSystemMapping[(row.length -1 -from_end)])

        }
      
      }
      pattern.pushWeftSequence(seq.val());

    })

  
    let extended_pattern &#x3D; new Sequence.TwoD().import(pattern.export());
    for(let i &#x3D; 0; i &lt; boundary; i++){
      let offset &#x3D; i % wefts(draft.drawdown);
      let row &#x3D; pattern.getWeft(i% wefts(draft.drawdown));
      extended_pattern.pushWeftSequence(row);

      let ending_row &#x3D; pattern.getWeft(wefts(draft.drawdown) -1 - offset);
      extended_pattern.unshiftWeftSequence(ending_row);

      weft_mats.push(draft.rowShuttleMapping[i]);
      weft_sys.push(draft.rowSystemMapping[i]);
      weft_mats.unshift(draft.rowShuttleMapping[wefts(draft.drawdown) -1 - offset]);
      weft_sys.unshift(draft.rowSystemMapping[wefts(draft.drawdown) -1 - offset]);


    }
  
    const expanded_draft &#x3D; initDraftFromDrawdown(extended_pattern.export());
    expanded_draft.colShuttleMapping &#x3D; warp_mats.val();
    expanded_draft.colSystemMapping &#x3D; warp_sys.val();
    expanded_draft.rowShuttleMapping &#x3D; weft_mats.val();
    expanded_draft.rowSystemMapping &#x3D; weft_sys.val();

    return Promise.resolve(expanded_draft);
  }


  /**
   * generates a new simulation with the given draft and simulation parameters
   * @param draft 
   * @param sim 
   * @returns promise for simulation data
   */
  public generateSimulationData(draft: Draft, sim: SimulationVars) : Promise&lt;SimulationData&gt;{

    const currentSim:SimulationData  &#x3D; {
      draft: draft, 
     bounds: {topleft: {x: sim.boundary, y: sim.boundary}, width: warps(draft.drawdown), height: wefts(draft.drawdown)},
      sim: sim,
      topo: null,
      vtxs: null, 
      layer_maps: null
    };

    return this.tileDraft(draft, sim.boundary).then(expandeddraft &#x3D;&gt; {
      currentSim.draft &#x3D; expandeddraft;
       return getDraftTopology(currentSim.draft, sim);
     })
    .then(
      topology &#x3D;&gt; {
      currentSim.topo &#x3D; topology;
      return createLayerMaps(currentSim.draft, topology, sim);
      }
    )
    .then(lm &#x3D;&gt; {
      currentSim.layer_maps &#x3D; lm;
      return translateTopologyToPoints(currentSim.draft,  currentSim.topo, lm, sim);


    }).then(vtxs &#x3D;&gt; {
      currentSim.vtxs &#x3D; vtxs;
      return currentSim;
    });

  }

  public setupSimulation(draft: Draft, renderer, scene, camera, layer_threshold: number, warp_range: number, warp_spacing: number, layer_spacing: number, max_interlacement_width: number, max_interlacement_height: number, boundary: number, radius:number, ms: MaterialsService) : Promise&lt;SimulationData&gt; {

    camera &#x3D; new THREE.PerspectiveCamera( 75, 1, 0.1, 1000 );
    const controls &#x3D; new OrbitControls( camera, renderer.domElement );
    
    const animate &#x3D; function(){
      requestAnimationFrame( animate );
      renderer.render( scene, camera );
      controls.update();

    };
    scene.background &#x3D; new THREE.Color( 0xf0f0f0 );

    camera.position.set( 20, 0, 200 );
    camera.lookAt( 0, 0, 0 );  
    controls.update();
    animate();

    const sim:SimulationVars&#x3D; {
      warp_spacing, 
      layer_spacing, 
      ms,
      layer_threshold,
      max_interlacement_width,
      max_interlacement_height,
      boundary,
      radius
    }
    
    return this.generateSimulationData(draft, sim)
    .then(simdata &#x3D;&gt; {
      this.currentSim &#x3D; simdata;
      return simdata;
    })

   

  }

  public recalcSimData(scene, draft: Draft, warp_spacing:number, layer_spacing:number, layer_threshold:number,max_interlacement_width: number, max_interlacement_height: number, boundary: number, radius: number, ms: MaterialsService) : Promise&lt;SimulationData&gt;{

    const sim:SimulationVars&#x3D; {
      warp_spacing, 
      layer_spacing, 
      layer_threshold,
      max_interlacement_width,
      max_interlacement_height,
      boundary,
      radius,
      ms
    };
    this.currentSim.sim &#x3D; sim;
    
    return this.generateSimulationData(draft, sim)
    .then(simdata &#x3D;&gt; {
      this.currentSim &#x3D; simdata;
      return simdata
    })
  }

  public renderSimdata(scene, simdata: SimulationData, warps: boolean, wefts: boolean, warp_layer: boolean,weft_layers: boolean, topo: boolean, show_draft: boolean){
    this.hasSimulation &#x3D; true;

    if(this.currentSim.draft &#x3D;&#x3D; null) return;

    scene.clear();

    const light &#x3D; new THREE.DirectionalLight( 0xffffff, 1.0);
    const back_light &#x3D; new THREE.DirectionalLight( 0xffffff, 1.0);
    scene.add( light );
    scene.add( back_light );

    light.position.set( 20, 0, 50 );
    back_light.position.set( 20, 0, -50 );




    const boundary_vtx &#x3D; this.getBoundaryVtxs(simdata);

   
    this.drawAxis(scene, simdata, boundary_vtx);
    this.drawYarns(scene, simdata, boundary_vtx);
    this.drawEndCaps(scene, simdata, boundary_vtx);
    this.drawWarpLayerMap(scene, boundary_vtx);
    this.drawWeftLayerMap(scene, boundary_vtx);
    this.drawTopology(scene, boundary_vtx);
    this.drawDraft(scene, this.currentSim.draft, this.currentSim.sim, boundary_vtx);


    if(!wefts) this.hideWefts();
    if(!warps) this.hideWarps();
    if(!warp_layer) this.hideWarpLayerMap();
    if(!weft_layers) this.hideWeftLayerMap();
    if(!topo) this.hideTopo();
    if(!show_draft) this.hideDraft();

  }

  drawAxis(scene, simdata: SimulationData, boundary_vtx: any){

    this.axis_scene &#x3D;  new THREE.Group();
   
    //X AXIS 
    const material &#x3D; new THREE.LineBasicMaterial( { color: 0x0000ff } );
    const points &#x3D; [];
    points.push(new THREE.Vector3(boundary_vtx.min_x-20, boundary_vtx.min_y-20, 0));
    points.push(new THREE.Vector3(boundary_vtx.max_x+20, boundary_vtx.min_y-20, 0));
    
    const geometry &#x3D; new THREE.BufferGeometry().setFromPoints( points );
    const line &#x3D; new THREE.Line( geometry, material );
    this.axis_scene.add( line );


    /**Y AXIS */
    const y_points &#x3D; [];
    y_points.push(new THREE.Vector3(boundary_vtx.min_x-20, boundary_vtx.min_y-20, 0));
    y_points.push(new THREE.Vector3(boundary_vtx.min_x-20, boundary_vtx.max_y+20, 0));
    
    const y_geometry &#x3D; new THREE.BufferGeometry().setFromPoints( y_points );
    const y_line &#x3D; new THREE.Line( y_geometry, material );
    this.axis_scene.add( y_line );

      /**Z AXIS */
      const z_points &#x3D; [];
      z_points.push(new THREE.Vector3(boundary_vtx.min_x-20, boundary_vtx.min_y-20, 0));
      z_points.push(new THREE.Vector3(boundary_vtx.min_x-20, boundary_vtx.min_y-20, 100));


      const z_geometry &#x3D; new THREE.BufferGeometry().setFromPoints( z_points );
      const z_line &#x3D; new THREE.Line( z_geometry, material );
      this.axis_scene.add( z_line );
      
    
    
    
    this.axis_scene &#x3D; this.applyOrientationConversion(this.axis_scene, boundary_vtx);
    scene.add(this.axis_scene);
   

  }

  /**
   * given the vtx data and a boundary, this function returns the min/max values for wefts and warps to be used to position the start and end of the warp and weft data. 
   * @param simdata 
   * @returns 
   */
  getBoundaryVtxs(simdata: SimulationData) : {min_x: number, max_x: number, min_y: number, max_y: number}{
    const vtxs &#x3D; simdata.vtxs;
    const bounds &#x3D; simdata.bounds;


    //get the weft boundary, draw warps from this data
    let in_bound_wefts &#x3D; vtxs.wefts.filter((el, ndx)&#x3D;&gt; (ndx &gt;&#x3D; bounds.topleft.y &amp;&amp; ndx &lt; bounds.topleft.y + bounds.height));

    let min_y &#x3D; in_bound_wefts.reduce((acc, row) &#x3D;&gt; {
      let min_in_row &#x3D; row.filter((vtx) &#x3D;&gt; vtx.j &gt;&#x3D; bounds.topleft.x &amp;&amp; vtx.j &lt; bounds.topleft.x + bounds.width).reduce((subacc, vtx) &#x3D;&gt; {
        if(vtx.y &lt; subacc) return vtx.y;
        return subacc;
      }, 10000);

      if(min_in_row &lt; acc) return min_in_row;
      return acc;
    }, 100000);

    let max_y &#x3D; in_bound_wefts.reduce((acc, row) &#x3D;&gt; {
      let max_in_row &#x3D; row.filter((vtx) &#x3D;&gt; vtx.j &gt;&#x3D; bounds.topleft.x &amp;&amp; vtx.j &lt; bounds.topleft.x + bounds.width).reduce((subacc, vtx) &#x3D;&gt; {
        if(vtx.y &gt; subacc) return vtx.y;
        return subacc;
      }, 0);

      if(max_in_row &gt; acc) return max_in_row;
      return acc;
    }, 0);

    let min_x &#x3D; in_bound_wefts.reduce((acc, row) &#x3D;&gt; {
      let min_in_row &#x3D; row.filter((vtx) &#x3D;&gt; vtx.j &gt;&#x3D; bounds.topleft.x &amp;&amp; vtx.j &lt; bounds.topleft.x + bounds.width).reduce((subacc, vtx) &#x3D;&gt; {
        if(vtx.x &lt; subacc) return vtx.x;
        return subacc;
      }, 10000);

      if(min_in_row &lt; acc) return min_in_row;
      return acc;
    }, 100000);

    let max_x &#x3D; in_bound_wefts.reduce((acc, row) &#x3D;&gt; {
      let max_in_row &#x3D; row.filter((vtx) &#x3D;&gt; vtx.j &gt;&#x3D; bounds.topleft.x &amp;&amp; vtx.j &lt; bounds.topleft.x + bounds.width).reduce((subacc, vtx) &#x3D;&gt; {
        if(vtx.x &gt; subacc) return vtx.x;
        return subacc;
      }, 0);

      if(max_in_row &gt; acc) return max_in_row;
      return acc;
    }, 0);

    return {min_x, max_x, min_y, max_y};


    

  }

  getClosestVtx(simdata: SimulationData, warp: boolean, i: number, j: number) : YarnVertex {

    if(warp){
      let vtxs &#x3D; simdata.vtxs.warps[j];
      let closest_ndx &#x3D; vtxs.reduce((acc, vtx, ndx) &#x3D;&gt; {
        if(Math.abs(vtx.i - i) &lt; acc.dist) return {dist: Math.abs(vtx.i - i), ndx};
        return acc;
      }, {dist: 10000, ndx: -1});
      if(closest_ndx.ndx &#x3D;&#x3D; -1) return null;
      return vtxs[closest_ndx.ndx]
    }else{

      //on wefts 
      let vtxs &#x3D; simdata.vtxs.wefts[i];
      let closest_ndx &#x3D; vtxs.reduce((acc, vtx, ndx) &#x3D;&gt; {
        if(vtx.j &gt;&#x3D; simdata.bounds.topleft.x &amp;&amp; vtx.j &lt; (simdata.bounds.topleft.x + simdata.bounds.width) &amp;&amp; Math.abs(vtx.j - j) &lt; acc.dist) return {dist: Math.abs(vtx.j - j), ndx};
        return acc;
      }, {dist: 10000, ndx: -1});
      if(closest_ndx.ndx &#x3D;&#x3D; -1) return null;
      return vtxs[closest_ndx.ndx]
    }
  }

  /**
   * this renders the imagery of the yarns. It uses the boundary provided by 
   * @param scene 
   * @param simdata 
   */
  drawYarns(scene, simdata: SimulationData, boundary_vtx: any){

    this.warp_scene &#x3D;  new THREE.Group();
    this.weft_scene &#x3D;  new THREE.Group();

    const vtxs &#x3D; simdata.vtxs;
    const draft &#x3D; simdata.draft;

    
    //DRAW THE WARPS
    for(let j &#x3D; simdata.bounds.topleft.x; j &lt; simdata.bounds.width + simdata.bounds.topleft.x; j++){
      const pts &#x3D; [];

      if(vtxs.warps[j].length &gt; 0 &amp;&amp; vtxs.warps[j] !&#x3D;&#x3D; undefined){
      const material_id &#x3D; draft.colShuttleMapping[j];
      let diameter &#x3D; this.ms.getDiameter(material_id);
      let color &#x3D; this.ms.getColor(material_id);


      let in_bounds_vxts &#x3D; simdata.vtxs.warps[j].filter(el &#x3D;&gt; el.i &gt;&#x3D; simdata.bounds.topleft.y &amp;&amp; el.i &lt; simdata.bounds.topleft.y + simdata.bounds.height);

      let start_vtx &#x3D; this.getClosestVtx(simdata, true, simdata.bounds.topleft.y, j);
      let end_vtx &#x3D; this.getClosestVtx(simdata, true, simdata.bounds.topleft.y + simdata.bounds.height, j);

      
     if(start_vtx !&#x3D;&#x3D; null) pts.push(new THREE.Vector3(start_vtx.x, boundary_vtx.min_y-10, -start_vtx.z));
     in_bounds_vxts.slice().forEach(vtx &#x3D;&gt; {
        if(vtx.x !&#x3D;&#x3D; undefined) pts.push(new THREE.Vector3(vtx.x, vtx.y, -vtx.z));
      });
      if(end_vtx !&#x3D;&#x3D; null) pts.push(new THREE.Vector3(end_vtx.x, boundary_vtx.max_y+10, -end_vtx.z));

      const curve &#x3D; new THREE.CatmullRomCurve3(pts, false, &#x27;catmullrom&#x27;, .1);
      const geometry &#x3D; new THREE.TubeGeometry( curve, 100, diameter/2, 6, false );
      const material &#x3D; new THREE.MeshPhysicalMaterial( {
        color: color,
        depthTest: true,
        emissive: 0x000000,
        metalness: 0,
        roughness: 0.5,
        clearcoat: 1.0,
        clearcoatRoughness: 1.0,
        reflectivity: 0.0
        } );     
      
      let curveObject &#x3D; new THREE.Mesh( geometry, material );


      this.warp_scene.add(curveObject);
      }
    };

    this.warp_scene &#x3D; this.applyOrientationConversion(this.warp_scene, boundary_vtx);
    scene.add(this.warp_scene);




    //draw wefts
    for(let i &#x3D; simdata.bounds.topleft.y; i &lt; simdata.bounds.height + simdata.bounds.topleft.y; i++){
      
      let weft_vtx_list &#x3D; vtxs.wefts[i];
      
      let in_bound_vtxs &#x3D; weft_vtx_list.filter(el &#x3D;&gt; el.j &gt;&#x3D; simdata.bounds.topleft.x &amp;&amp; el.j &lt;  simdata.bounds.width + simdata.bounds.topleft.x);

      const pts &#x3D; [];
      let start_vtx &#x3D; this.getClosestVtx(simdata, false, i, simdata.bounds.topleft.x);
      let end_vtx &#x3D; this.getClosestVtx(simdata, false, i, simdata.bounds.topleft.x + simdata.bounds.width);


      if(start_vtx !&#x3D;&#x3D; null)  pts.push(new THREE.Vector3(boundary_vtx.min_x-10, start_vtx.y,-start_vtx.z));

      in_bound_vtxs.forEach(vtx &#x3D;&gt; {
        if(vtx.x !&#x3D;&#x3D; undefined){
          pts.push(new THREE.Vector3(vtx.x, vtx.y, -vtx.z));
        } 
      });

      if(end_vtx !&#x3D;&#x3D; null) pts.push(new THREE.Vector3(boundary_vtx.max_x+10, end_vtx.y, -end_vtx.z));


      const material_id &#x3D; draft.rowShuttleMapping[i];
      let diameter &#x3D; this.ms.getDiameter(material_id);
      let color &#x3D; this.ms.getColor(material_id)

      const curve &#x3D; new THREE.CatmullRomCurve3(pts, false, &#x27;catmullrom&#x27;, .1);
      const geometry &#x3D; new THREE.TubeGeometry( curve, 100, diameter/2, 6, false );
      const material &#x3D; new THREE.MeshPhysicalMaterial( {
        color: color,
        emissive: 0x000000,
        depthTest: true,
        metalness: 0,
        roughness: 0.5,
        clearcoat: 1.0,
        clearcoatRoughness: 1.0,
        reflectivity: 0.0
        } );        
        let curveObject &#x3D; new THREE.Mesh( geometry, material );
        this.weft_scene.add(curveObject);

          
      }
      
    this.weft_scene &#x3D; this.applyOrientationConversion(this.weft_scene, boundary_vtx);
    scene.add(this.weft_scene);

  }

  drawDraft(scene, draft: Draft, sim: SimulationVars, boundary_vtx){
    this.draft_scene &#x3D;  new THREE.Group();
    const geometry &#x3D; new THREE.BufferGeometry();
    // const yarn_height &#x3D; 5;
    const yarn_height &#x3D; this.currentSim.sim.warp_spacing;

    let alldata &#x3D; [];
    let positions &#x3D; [];
    let colors &#x3D; [];
    let normals &#x3D; [];
    let indicies &#x3D; [];

    for(let i &#x3D; 0; i &lt; wefts(draft.drawdown); i++){
      for(let j &#x3D; 0; j &lt; warps(draft.drawdown); j++){

       const col &#x3D; (getCellValue(draft.drawdown[i][j])&#x3D;&#x3D;true) ? 0 : 1;


       alldata.push({
          pos: [sim.warp_spacing*j, yarn_height*i, 0],
          norm: [0, 1, 0],
          color: [col, col, col]
        });
    
        alldata.push({
          pos: [sim.warp_spacing*(j+1), yarn_height*i, 0],
          norm: [0, 1, 0],
          color: [col, col, col]
        })
    
        alldata.push({
          pos: [sim.warp_spacing*j, yarn_height*(i+1), 0],
          norm: [0, 1, 0],
          color: [col, col, col]
        });
    
        alldata.push({
          pos: [sim.warp_spacing*(j+1), yarn_height*(i+1), 0],
          norm: [0, 1, 0],
          color: [col, col, col]
        });

        let starting_index &#x3D; ((i*warps(draft.drawdown)) + j) *4;

        indicies &#x3D;  indicies.concat([
          starting_index+2,starting_index+0,starting_index+3,starting_index+1,starting_index+3,starting_index+0
        ]);
      }
    }


    for (const vertex of alldata) {
      positions.push(...vertex.pos);
      normals.push(...vertex.norm);
      colors.push(...vertex.color);
    }

    geometry.setIndex(indicies);
    geometry.setAttribute( &#x27;position&#x27;, new THREE.Float32BufferAttribute( positions, 3 ) );
		geometry.setAttribute( &#x27;normal&#x27;, new THREE.Float32BufferAttribute( normals, 3 ) );
		geometry.setAttribute( &#x27;color&#x27;, new THREE.Float32BufferAttribute( colors, 3 ) );
    const material &#x3D; new THREE.MeshBasicMaterial( {
      side: THREE.DoubleSide,
      vertexColors: true
    } );



    let mesh &#x3D; new THREE.Mesh( geometry, material );
    this.draft_scene.add(mesh);
    this.draft_scene &#x3D; this.applyOrientationConversion(this.draft_scene, boundary_vtx);
		scene.add( this.draft_scene );


  }

  showDraft(){
    this.draft_scene.visible &#x3D; true;
  }

  hideDraft(){
    this.draft_scene.visible &#x3D; false;
  }


  showWarps(){
    this.warp_scene.visible &#x3D; true;
  }

  hideWarps(){
    this.warp_scene.visible &#x3D; false;
  }

  showWefts(){
    // console.log(&quot;SHOW WEFTS&quot;);
    this.weft_scene.visible &#x3D; true;
  }

  hideWefts(){
    this.weft_scene.visible &#x3D; false;
  }


  hideWarpLayerMap(){
    this.warp_layer_map_scene.visible &#x3D; false;
  }

  showWarpLayerMap(){
    this.warp_layer_map_scene.visible &#x3D; true;
    // console.log(&quot;SHOW WARP LAYER MAP&quot;, this.warp_layer_map_scene)
  }

  hideWeftLayerMap(){
    this.weft_layer_map_scene.visible &#x3D; false;
  }

  showWeftLayerMap(){
    this.weft_layer_map_scene.visible &#x3D; true;
    // console.log(&quot;SHOW LAYER MAP&quot;, this.weft_layer_map_scene)
  }

  hideTopo(){
    this.topo_scene.visible &#x3D; false;
  }

  showTopo(){
    this.topo_scene.visible &#x3D; true;
    // console.log(&quot;SHOW LAYER MAP&quot;, this.topo_scene)
  }

  drawWeftLayerMap(scene, boundary_vtx){

    this.weft_layer_map_scene &#x3D;  new THREE.Group();

    let z &#x3D; -20;

    const lm &#x3D; this.currentSim.layer_maps;
    const sim &#x3D; this.currentSim.sim;
    const draft &#x3D; this.currentSim.draft;

    let range &#x3D; lm.weft.reduce((acc, val) &#x3D;&gt; {
      let max &#x3D; val.reduce((sub_acc, vtx) &#x3D;&gt; {
        if(vtx &gt; sub_acc) return vtx;
        return sub_acc;
      }, 0);

      if(max &gt; acc) return max;
      return acc;
    }, 0);

    if(range &#x3D;&#x3D; 0) range &#x3D; 1;

    const lut &#x3D; new Lut();

    lut.setColorMap( &#x27;rainbow&#x27;, 512);

  
    const geometry &#x3D; new THREE.BufferGeometry();
    // const yarn_height &#x3D; 5;
    const yarn_height &#x3D; this.currentSim.sim.warp_spacing;

    let alldata &#x3D; [];
    let positions &#x3D; [];
    let colors &#x3D; [];
    let normals &#x3D; [];
    let indicies &#x3D; [];

    for(let i &#x3D; 0; i &lt; lm.weft.length; i++){
      for(let j &#x3D; 0; j &lt; lm.weft[0].length; j++){

        const r &#x3D; 0.5 + ( lm.weft[i][j] / range );
        const col &#x3D; lut.getColor(r);
       
        if(col !&#x3D;&#x3D; undefined){

       alldata.push({
          pos: [sim.warp_spacing*j, yarn_height*i, z],
          norm: [0, 1, 0],
          color: [col.r, col.g, col.b]
        });
    
        alldata.push({
          pos: [sim.warp_spacing*(j+1), yarn_height*i, z],
          norm: [0, 1, 0],
          color: [col.r, col.g, col.b]
        })
    
        alldata.push({
          pos: [sim.warp_spacing*j, yarn_height*(i+1), z],
          norm: [0, 1, 0],
          color: [col.r, col.g, col.b]
        });
    
        alldata.push({
          pos: [sim.warp_spacing*(j+1), yarn_height*(i+1), z],
          norm: [0, 1, 0],
          color: [col.r, col.g, col.b]
        });
        }

        let starting_index &#x3D; ((i*warps(draft.drawdown)) + j) *4;

        indicies &#x3D;  indicies.concat([
          starting_index+2,starting_index+0,starting_index+3,starting_index+1,starting_index+3,starting_index+0
        ]);
      }
    }



    for (const vertex of alldata) {
      positions.push(...vertex.pos);
      normals.push(...vertex.norm);
      colors.push(...vertex.color);
    }




    geometry.setIndex(indicies);
    geometry.setAttribute( &#x27;position&#x27;, new THREE.Float32BufferAttribute( positions, 3 ) );
		geometry.setAttribute( &#x27;normal&#x27;, new THREE.Float32BufferAttribute( normals, 3 ) );
		geometry.setAttribute( &#x27;color&#x27;, new THREE.Float32BufferAttribute( colors, 3 ) );
    const material &#x3D; new THREE.MeshBasicMaterial( {
      side: THREE.DoubleSide,
      transparent: true,
      vertexColors: true,
      opacity: .5
    } );



    let mesh &#x3D; new THREE.Mesh( geometry, material );    
    this.weft_layer_map_scene.add(mesh);
    this.weft_layer_map_scene &#x3D; this.applyOrientationConversion( this.weft_layer_map_scene, boundary_vtx);
		scene.add(  this.weft_layer_map_scene );

  }



  drawWarpLayerMap(scene, boundary_vtx){

    this.warp_layer_map_scene &#x3D;  new THREE.Group();

    let z &#x3D; -20;

    const lm &#x3D; this.currentSim.layer_maps;
    const sim &#x3D; this.currentSim.sim;
    const draft &#x3D; this.currentSim.draft;

    let range &#x3D; lm.warp.reduce((acc, val) &#x3D;&gt; {
      let max &#x3D; val.reduce((sub_acc, vtx) &#x3D;&gt; {
        if(vtx &gt; sub_acc) return vtx;
        return sub_acc;
      }, 0);

      if(max &gt; acc) return max;
      return acc;
    }, 0);

    if(range &#x3D;&#x3D; 0) range &#x3D; 1;

    const lut &#x3D; new Lut();

    lut.setColorMap( &#x27;rainbow&#x27;, 512);

  
    const geometry &#x3D; new THREE.BufferGeometry();
    // const yarn_height &#x3D; 5;
    const yarn_height &#x3D; this.currentSim.sim.warp_spacing;

    let alldata &#x3D; [];
    let positions &#x3D; [];
    let colors &#x3D; [];
    let normals &#x3D; [];
    let indicies &#x3D; [];

    for(let i &#x3D; 0; i &lt; lm.warp.length; i++){
      for(let j &#x3D; 0; j &lt; lm.warp[0].length; j++){

        const r &#x3D; 0.5 + ( lm.warp[i][j] / range );
        const col &#x3D; lut.getColor(r);
       



       alldata.push({
          pos: [sim.warp_spacing*j, yarn_height*i, z],
          norm: [0, 1, 0],
          color: [col.r, col.g, col.b]
        });
    
        alldata.push({
          pos: [sim.warp_spacing*(j+1), yarn_height*i, z],
          norm: [0, 1, 0],
          color: [col.r, col.g, col.b]
        })
    
        alldata.push({
          pos: [sim.warp_spacing*j, yarn_height*(i+1), z],
          norm: [0, 1, 0],
          color: [col.r, col.g, col.b]
        });
    
        alldata.push({
          pos: [sim.warp_spacing*(j+1), yarn_height*(i+1), z],
          norm: [0, 1, 0],
          color: [col.r, col.g, col.b]
        });

        let starting_index &#x3D; ((i*warps(draft.drawdown)) + j) *4;

        indicies &#x3D;  indicies.concat([
          starting_index+2,starting_index+0,starting_index+3,starting_index+1,starting_index+3,starting_index+0
        ]);
      }
    }



    for (const vertex of alldata) {
      positions.push(...vertex.pos);
      normals.push(...vertex.norm);
      colors.push(...vertex.color);
    }




    geometry.setIndex(indicies);
    geometry.setAttribute( &#x27;position&#x27;, new THREE.Float32BufferAttribute( positions, 3 ) );
		geometry.setAttribute( &#x27;normal&#x27;, new THREE.Float32BufferAttribute( normals, 3 ) );
		geometry.setAttribute( &#x27;color&#x27;, new THREE.Float32BufferAttribute( colors, 3 ) );
    const material &#x3D; new THREE.MeshBasicMaterial( {
      side: THREE.DoubleSide,
      transparent: true,
      vertexColors: true,
      opacity: .5
    } );



    let mesh &#x3D; new THREE.Mesh( geometry, material );    
    this.warp_layer_map_scene.add(mesh);
    this.warp_layer_map_scene &#x3D; this.applyOrientationConversion( this.warp_layer_map_scene, boundary_vtx);
		scene.add(  this.warp_layer_map_scene );

  }

  drawTopology(scene, boundary_vtx){


    // console.log(&quot;LAYER MAP DRAWN&quot;)
    this.topo_scene &#x3D;  new THREE.Group();
    const geometry &#x3D; new THREE.BufferGeometry();
    let alldata &#x3D; [];
    let positions &#x3D; [];
    let colors &#x3D; [];
    let normals &#x3D; [];
    let indicies &#x3D; [];


    const topo &#x3D; this.currentSim.topo;
    const sim &#x3D; this.currentSim.sim;
    const yarn_height &#x3D; sim.warp_spacing;

    const lut &#x3D; new Lut();
    const range &#x3D; 10;

    lut.setColorMap( &#x27;rainbow&#x27;, 10);

    topo.forEach((vtx, x) &#x3D;&gt; {
      const r &#x3D; 0.5 + ( vtx.z_pos / range );
      const col &#x3D; lut.getColor(r);
      // let z &#x3D; vtx.z_pos * sim.layer_spacing;

      // let z &#x3D; -10 + vtx.z_pos;
      let z &#x3D; -1;
      alldata.push({
        pos: [sim.warp_spacing*vtx.j_left+2, yarn_height*vtx.i_bot+2, z],
        norm: [0, 1, 0],
        color: [col.r, col.g, col.b]
      });
  
      alldata.push({
        pos: [sim.warp_spacing*vtx.j_right+sim.warp_spacing-2, yarn_height*vtx.i_bot+2, z],
        norm: [0, 1, 0],
        color: [col.r, col.g, col.b]
      })
  
      alldata.push({
        pos: [sim.warp_spacing*vtx.j_left+2,yarn_height*vtx.i_top+yarn_height-2, z],
        norm: [0, 1, 0],
        color: [col.r, col.g, col.b]
      });
  
      alldata.push({
        pos: [sim.warp_spacing*vtx.j_right+sim.warp_spacing-2, yarn_height*vtx.i_top+yarn_height-2, z],
        norm: [0, 1, 0],
        color: [col.r, col.g, col.b]
      });

      let starting_index &#x3D; x*4;

      indicies &#x3D;  indicies.concat([
        starting_index+2,starting_index+0,starting_index+3,starting_index+1,starting_index+3,starting_index+0
      ]);

    })


    for (const vertex of alldata) {
      positions.push(...vertex.pos);
      normals.push(...vertex.norm);
      colors.push(...vertex.color);
    }


    geometry.setIndex(indicies);
    geometry.setAttribute( &#x27;position&#x27;, new THREE.Float32BufferAttribute( positions, 3 ) );
		geometry.setAttribute( &#x27;normal&#x27;, new THREE.Float32BufferAttribute( normals, 3 ) );
		geometry.setAttribute( &#x27;color&#x27;, new THREE.Float32BufferAttribute( colors, 3 ) );
    const material &#x3D; new THREE.MeshBasicMaterial( {
      side: THREE.DoubleSide,
      transparent: true,
      vertexColors: true,
      opacity: .5,
      wireframe: true
    } );



    let mesh &#x3D; new THREE.Mesh( geometry, material );
    this.topo_scene.add(mesh);
    this.topo_scene &#x3D; this.applyOrientationConversion(  this.topo_scene, boundary_vtx);
		scene.add(  this.topo_scene );

  }


  applyOrientationConversion(object, boundary_vtx) {
    const trans &#x3D; new THREE.Matrix4();

    let width &#x3D; boundary_vtx.max_x - boundary_vtx.min_x;
    let height &#x3D; boundary_vtx.max_y - boundary_vtx.min_y;

    trans.makeTranslation(-(boundary_vtx.min_x + width/2), (boundary_vtx.min_y + height/2), 0);
    object.applyMatrix4(trans);


    const quaternion &#x3D; new THREE.Quaternion();
          
    //rotate around the x axis to match draft orientation in top left
    quaternion.setFromAxisAngle( new THREE.Vector3( 1, 0, 0 ), Math.PI );
    object.applyQuaternion(quaternion);

              // quaternion.setFromAxisAngle( new THREE.Vector3( 0, 1, 0 ), Math.PI );
          // curveObject.applyQuaternion(quaternion);

    return object;
  }

  drawEndCaps(scene,simdata: SimulationData,  boundary_vtx: any ){

    const vtxs &#x3D; simdata.vtxs;
    const draft &#x3D; simdata.draft;
    const bounds &#x3D; simdata.bounds;
    const ms &#x3D; simdata.sim.ms;



    if(vtxs.warps.length &lt;&#x3D; 0) return;


    //DRAW WARP ENDS
    let in_bounds_warps &#x3D; vtxs.warps.filter(el &#x3D;&gt; el.length &gt; 0 &amp;&amp; el[0].j &gt;&#x3D; bounds.topleft.x &amp;&amp; el[0].j &lt; bounds.topleft.x + bounds.width);

    in_bounds_warps.forEach((warp, ndx) &#x3D;&gt; {

      let j &#x3D; ndx + bounds.topleft.x;

 
      if(warp.length &gt; 0){

        let start_vtx &#x3D; this.getClosestVtx(simdata, true, simdata.bounds.topleft.y, j);
        let end_vtx &#x3D; this.getClosestVtx(simdata, true, simdata.bounds.topleft.y + simdata.bounds.height, j);


      const material_id &#x3D; draft.colShuttleMapping[j];
      let diameter &#x3D; ms.getDiameter(material_id);
      const color &#x3D; this.ms.getColor(material_id)


      const top_geometry &#x3D; new THREE.CircleGeometry( diameter/2, 32 );
      top_geometry.rotateX(Math.PI/2);
      


      if(start_vtx !&#x3D;&#x3D; null) top_geometry.translate(start_vtx.x, boundary_vtx.min_y-10, -start_vtx.z);
      const material &#x3D; new THREE.MeshBasicMaterial( { color: color } );
      let end_circle &#x3D; new THREE.Mesh( top_geometry, material );
      this.warp_scene.add(end_circle);

      
      const bot_geometry &#x3D; new THREE.CircleGeometry(  diameter/2, 32 );
      bot_geometry.rotateX(3*Math.PI/2);
      if(end_vtx !&#x3D;&#x3D; null) bot_geometry.translate(end_vtx.x, boundary_vtx.max_y+10, -end_vtx.z);
      let top_circle &#x3D; new THREE.Mesh( bot_geometry, material );
      // top_circle.tranlsateY(-top/2);
      // top_circle.tranlsateX(-right/2);
      this.warp_scene.add( top_circle );
      }

    })


    let in_bounds_wefts &#x3D; vtxs.wefts.filter((el, ndx) &#x3D;&gt; ndx &gt;&#x3D; bounds.topleft.y &amp;&amp; ndx &lt; bounds.topleft.y + bounds.height);


   in_bounds_wefts.forEach((weft, ndx) &#x3D;&gt; {

      let in_range &#x3D; weft.filter(el &#x3D;&gt; el.j &gt;&#x3D; bounds.topleft.x &amp;&amp; el.j &lt; bounds.topleft.x + bounds.width);

      let i &#x3D; ndx + bounds.topleft.y;
  
      if(weft.length &gt; 0){
        let start_vtx &#x3D; this.getClosestVtx(simdata, false, i, simdata.bounds.topleft.x);
        let end_vtx &#x3D; this.getClosestVtx(simdata, false, i, simdata.bounds.topleft.x + simdata.bounds.width);

      const material_id &#x3D; draft.rowShuttleMapping[i];
      let diameter &#x3D; ms.getDiameter(material_id);
      const color &#x3D; this.ms.getColor(material_id)

      const top_geometry &#x3D; new THREE.CircleGeometry(  diameter/2, 32 );
      top_geometry.rotateY(3*Math.PI/2);
      if(start_vtx !&#x3D;&#x3D; null) top_geometry.translate(boundary_vtx.min_x-10, start_vtx.y,-start_vtx.z);
      const material &#x3D; new THREE.MeshBasicMaterial( { color: color } );
      let end_circle &#x3D; new THREE.Mesh( top_geometry, material );

      this.weft_scene.add(end_circle);
      
      const bot_geometry &#x3D; new THREE.CircleGeometry( diameter/2, 32 );
      bot_geometry.rotateY(Math.PI/2);
      if(end_vtx !&#x3D;&#x3D; null) bot_geometry.translate(boundary_vtx.max_x+10, end_vtx.y, -end_vtx.z);
      let top_circle &#x3D; new THREE.Mesh( bot_geometry, material );
      this.weft_scene.add(top_circle);

      }

    })
  

  }


    

}

</code></pre>
    </div>
</div>







                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
           </div>
       </div>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/search/search.js"></script>
       <script src="../js/search/lunr.min.js"></script>
       <script src="../js/search/search-lunr.js"></script>

       <script src="../js/menu.js"></script>
       <script src="../js/libs/highlight.pack.js"></script>
       <script src="../js/libs/highlightjs-line-numbers.min.js"></script>
       <script src="../js/search/search_index.js"></script>
       <script>
            document.addEventListener('DOMContentLoaded', function() {
                hljs.initHighlightingOnLoad();
                hljs.initLineNumbersOnLoad();
            });
       </script>

    </body>
</html>
