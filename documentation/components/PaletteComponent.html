<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>adacad-weaver documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	    <link rel="stylesheet" href="../styles/style.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="../" class="navbar-brand">adacad-weaver documentation</a>
            <button type="button" class="btn btn-default btn-menu fa fa-bars" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
            <div id="book-search-input" role="search">
                <input type="text" placeholder="Type to search">
            </div>
            <nav>
            
                <ul class="list">
            
                    <li class="title">
                        <a href="../">adacad-weaver documentation</a>
                    </li>
            
                    <li class="divider"></li>
            
            
                    <li class="chapter">
                        <a data-type="chapter-link" href="../"><span class="fa fa-home"></span>Getting started</a>
                        <ul class="links">
                                <li class="link">
                                    <a href="../" ><span class="fa fa-file-text-o"></span>README</a>
                                </li>
                                <li class="link">
                                    <a 
                                        
                                         href="../overview.html" 
                                         href="../overview.html" 
                                        >
                                        <span class="fa fa-th"></span>Overview
                                    </a>
                                </li>
                        </ul>
                    </li>
            
                    <li class="chapter">
                        <a data-type="chapter-link" href="./modules.html" >
                            <span class="fa fa-archive"></span>
                            <span>Modules</span>
                            <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                    data-target="#xs-modules-links"
                            ></span>
                        </a>
                        <ul class="links collapse in"
                                id="xs-modules-links"
                            >
                                <li class="link">
                                    <a href="../modules/AppModule.html" >AppModule</a>
                                </li>
                                <li class="link">
                                    <a href="../modules/AppRoutingModule.html" >AppRoutingModule</a>
                                </li>
                                <li class="link">
                                    <a href="../modules/CoreModule.html" >CoreModule</a>
                                </li>
                                <li class="link">
                                    <a href="../modules/MixerModule.html" >MixerModule</a>
                                </li>
                                <li class="link">
                                    <a href="../modules/WeaverModule.html" >WeaverModule</a>
                                </li>
                        </ul>
                    </li>
            
                    <li class="chapter">
                        <div class="simple">
                            <span class="fa fa-cogs"></span>
                            <span>Components</span>
                            <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                    data-target="#xs-components-links"
                                ></span>
                        </div>
                        <ul class="links collapse in"
                                id="xs-components-links"
                            >
                                <li class="link">
                                    <a href="../components/AboutModal.html" >AboutModal</a>
                                </li>
                                <li class="link">
                                    <a href="../components/AppComponent.html" >AppComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/ConnectionComponent.html" >ConnectionComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/ConnectionModal.html" >ConnectionModal</a>
                                </li>
                                <li class="link">
                                    <a href="../components/InitModal.html" >InitModal</a>
                                </li>
                                <li class="link">
                                    <a href="../components/LabelModal.html" >LabelModal</a>
                                </li>
                                <li class="link">
                                    <a href="../components/LoomComponent.html" >LoomComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/MasksComponent.html" >MasksComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/MaterialModal.html" >MaterialModal</a>
                                </li>
                                <li class="link">
                                    <a href="../components/MaterialsComponent.html" >MaterialsComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/MixerComponent.html" >MixerComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/MixerDesignComponent.html" >MixerDesignComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/MixerPatternsComponent.html" >MixerPatternsComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/MixerViewComponent.html" >MixerViewComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/NotesComponent.html" >NotesComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/OperationComponent.html" >OperationComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/PaletteComponent.html"  class="active" >PaletteComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/PatternModal.html" >PatternModal</a>
                                </li>
                                <li class="link">
                                    <a href="../components/PatternsComponent.html" >PatternsComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/SchematicComponent.html" >SchematicComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/ShuttlesModal.html" >ShuttlesModal</a>
                                </li>
                                <li class="link">
                                    <a href="../components/SnackbarComponent.html" >SnackbarComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/SubdraftComponent.html" >SubdraftComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/SystemsComponent.html" >SystemsComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/TopbarComponent.html" >TopbarComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/UploadFormComponent.html" >UploadFormComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/WeaverComponent.html" >WeaverComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/WeaverDesignComponent.html" >WeaverDesignComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/WeaverPatternsComponent.html" >WeaverPatternsComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/WeaverViewComponent.html" >WeaverViewComponent</a>
                                </li>
                        </ul>
                    </li>
            
                    <li class="chapter">
                        <div class="simple">
                            <span class="fa fa-code"></span>
                            <span>Directives</span>
                            <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                    data-target="#xs-directives-links"
                                ></span>
                        </div>
                        <ul class="links collapse in"
                                id="xs-directives-links"
                            >
                                <li class="link">
                                    <a href="../directives/SelectionComponent.html" >SelectionComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../directives/WeaveDirective.html" >WeaveDirective</a>
                                </li>
                        </ul>
                    </li>
            
                    <li class="chapter">
                        <div class="simple">
                            <span class="fa fa-file-code-o"></span>
                            <span>Classes</span>
                            <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                    data-target="#xs-classes-links"
                                ></span>
                        </div>
                        <ul class="links collapse in"
                                id="xs-classes-links"
                            >
                                <li class="link">
                                    <a href="../classes/AdaCADWeaverPage.html" >AdaCADWeaverPage</a>
                                </li>
                                <li class="link">
                                    <a href="../classes/Cell.html" >Cell</a>
                                </li>
                                <li class="link">
                                    <a href="../classes/Connection.html" >Connection</a>
                                </li>
                                <li class="link">
                                    <a href="../classes/Draft.html" >Draft</a>
                                </li>
                                <li class="link">
                                    <a href="../classes/Loom.html" >Loom</a>
                                </li>
                                <li class="link">
                                    <a href="../classes/Pattern.html" >Pattern</a>
                                </li>
                                <li class="link">
                                    <a href="../classes/Point.html" >Point</a>
                                </li>
                                <li class="link">
                                    <a href="../classes/Render.html" >Render</a>
                                </li>
                                <li class="link">
                                    <a href="../classes/Selection.html" >Selection</a>
                                </li>
                                <li class="link">
                                    <a href="../classes/Shuttle.html" >Shuttle</a>
                                </li>
                                <li class="link">
                                    <a href="../classes/System.html" >System</a>
                                </li>
                                <li class="link">
                                    <a href="../classes/Timeline.html" >Timeline</a>
                                </li>
                                <li class="link">
                                    <a href="../classes/Upload.html" >Upload</a>
                                </li>
                                <li class="link">
                                    <a href="../classes/Util.html" >Util</a>
                                </li>
                        </ul>
                    </li>
            
                    <li class="chapter">
                        <a data-type="chapter-link" href="../routes.html" ><span class="fa fa-code-fork"></span>Routes</a>
                    </li>
            
                    <li class="chapter">
                        <div class="simple">
                            <span class="fa fa-long-arrow-down"></span>
                            <span>Injectables</span>
                            <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                    data-target="#xs-injectables-links"
                                ></span>
                        </div>
                        <ul class="links collapse in"
                                id="xs-injectables-links"
                            >
                                <li class="link">
                                    <a href="../injectables/DesignmodesService.html" >DesignmodesService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/InkService.html" >InkService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/LayersService.html" >LayersService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/PatternService.html" >PatternService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/UploadService.html" >UploadService</a>
                                </li>
                        </ul>
                    </li>
            
                    <li class="chapter">
                        <div class="simple">
                            <span class="fa fa-info"></span>
                            <span>Interfaces</span>
                            <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                    data-target="#xs-interfaces-links"
                                ></span>
                        </div>
                        <ul class="links collapse in"
                                id="xs-interfaces-links"
                            >
                                <li class="link">
                                    <a href="../interfaces/Bounds.html" >Bounds</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/DensityUnits.html" >DensityUnits</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/DensityUnits.html" >DensityUnits</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/DesignActions.html" >DesignActions</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/DesignActions.html" >DesignActions</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/DesignMode.html" >DesignMode</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/DesignModes.html" >DesignModes</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/DraftInterface.html" >DraftInterface</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/HistoryState.html" >HistoryState</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/Ink.html" >Ink</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/Interlacement.html" >Interlacement</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/InterlacementVal.html" >InterlacementVal</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/LoomCoords.html" >LoomCoords</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/LoomTypes.html" >LoomTypes</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/LoomTypes.html" >LoomTypes</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/LoomUpdate.html" >LoomUpdate</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/MaterialTypes.html" >MaterialTypes</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/MaterialTypes.html" >MaterialTypes</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/Point.html" >Point</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/StartOptions.html" >StartOptions</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/ViewModes.html" >ViewModes</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/ViewModes.html" >ViewModes</a>
                                </li>
                        </ul>
                    </li>
            
                    <li class="chapter">
                        <div class="simple">
                            <span class="fa fa-plus"></span>
                            <span>Pipes</span>
                            <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                    data-target="#xs-pipes-links"
                                ></span>
                        </div>
                        <ul class="links collapse in"
                                id="xs-pipes-links"
                            >
                                <li class="link">
                                    <a href="../pipes/FilterPipe.html" >FilterPipe</a>
                                </li>
                        </ul>
                    </li>
            
                    <li class="chapter">
                        <a data-type="chapter-link" href="../miscellaneous.html" ><span class="fa fa-cubes"></span>Miscellaneous</a>
                    </li>
            
                    <li class="chapter">
                        <a data-type="chapter-link" href="../coverage.html" ><span class="fa fa-tasks"></span>Documentation coverage</a>
                    </li>
            
                    <li class="divider"></li>
                    <li class="copyright">
                            Documentation generated using <a href="https://compodoc.github.io/compodoc/" target="_blank">
                                        <img src="..//images/compodoc-vectorise.svg" class="img-responsive">
                            </a>
                    </li>
            
                </ul>
            
            </nav>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <nav>
                   
                       <ul class="list">
                   
                           <li class="title">
                               <a href="../">adacad-weaver documentation</a>
                           </li>
                   
                           <li class="divider"></li>
                   
                               <div id="book-search-input" role="search">
                                   <input type="text" placeholder="Type to search">
                               </div>
                   
                           <li class="chapter">
                               <a data-type="chapter-link" href="../"><span class="fa fa-home"></span>Getting started</a>
                               <ul class="links">
                                       <li class="link">
                                           <a href="../" ><span class="fa fa-file-text-o"></span>README</a>
                                       </li>
                                       <li class="link">
                                           <a 
                                               
                                                href="../overview.html" 
                                                href="../overview.html" 
                                               >
                                               <span class="fa fa-th"></span>Overview
                                           </a>
                                       </li>
                               </ul>
                           </li>
                   
                           <li class="chapter">
                               <a data-type="chapter-link" href="./modules.html" >
                                   <span class="fa fa-archive"></span>
                                   <span>Modules</span>
                                   <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                           data-target="#modules-links"
                                   ></span>
                               </a>
                               <ul class="links collapse in"
                                       id="modules-links"
                   >
                                       <li class="link">
                                           <a href="../modules/AppModule.html" >AppModule</a>
                                       </li>
                                       <li class="link">
                                           <a href="../modules/AppRoutingModule.html" >AppRoutingModule</a>
                                       </li>
                                       <li class="link">
                                           <a href="../modules/CoreModule.html" >CoreModule</a>
                                       </li>
                                       <li class="link">
                                           <a href="../modules/MixerModule.html" >MixerModule</a>
                                       </li>
                                       <li class="link">
                                           <a href="../modules/WeaverModule.html" >WeaverModule</a>
                                       </li>
                               </ul>
                           </li>
                   
                           <li class="chapter">
                               <div class="simple">
                                   <span class="fa fa-cogs"></span>
                                   <span>Components</span>
                                   <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                           data-target="#components-links"
                   ></span>
                               </div>
                               <ul class="links collapse in"
                                       id="components-links"
                   >
                                       <li class="link">
                                           <a href="../components/AboutModal.html" >AboutModal</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/AppComponent.html" >AppComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/ConnectionComponent.html" >ConnectionComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/ConnectionModal.html" >ConnectionModal</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/InitModal.html" >InitModal</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/LabelModal.html" >LabelModal</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/LoomComponent.html" >LoomComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/MasksComponent.html" >MasksComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/MaterialModal.html" >MaterialModal</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/MaterialsComponent.html" >MaterialsComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/MixerComponent.html" >MixerComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/MixerDesignComponent.html" >MixerDesignComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/MixerPatternsComponent.html" >MixerPatternsComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/MixerViewComponent.html" >MixerViewComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/NotesComponent.html" >NotesComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/OperationComponent.html" >OperationComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/PaletteComponent.html"  class="active" >PaletteComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/PatternModal.html" >PatternModal</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/PatternsComponent.html" >PatternsComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/SchematicComponent.html" >SchematicComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/ShuttlesModal.html" >ShuttlesModal</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/SnackbarComponent.html" >SnackbarComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/SubdraftComponent.html" >SubdraftComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/SystemsComponent.html" >SystemsComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/TopbarComponent.html" >TopbarComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/UploadFormComponent.html" >UploadFormComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/WeaverComponent.html" >WeaverComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/WeaverDesignComponent.html" >WeaverDesignComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/WeaverPatternsComponent.html" >WeaverPatternsComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/WeaverViewComponent.html" >WeaverViewComponent</a>
                                       </li>
                               </ul>
                           </li>
                   
                           <li class="chapter">
                               <div class="simple">
                                   <span class="fa fa-code"></span>
                                   <span>Directives</span>
                                   <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                           data-target="#directives-links"
                   ></span>
                               </div>
                               <ul class="links collapse in"
                                       id="directives-links"
                   >
                                       <li class="link">
                                           <a href="../directives/SelectionComponent.html" >SelectionComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../directives/WeaveDirective.html" >WeaveDirective</a>
                                       </li>
                               </ul>
                           </li>
                   
                           <li class="chapter">
                               <div class="simple">
                                   <span class="fa fa-file-code-o"></span>
                                   <span>Classes</span>
                                   <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                           data-target="#classes-links"
                   ></span>
                               </div>
                               <ul class="links collapse in"
                                       id="classes-links"
                   >
                                       <li class="link">
                                           <a href="../classes/AdaCADWeaverPage.html" >AdaCADWeaverPage</a>
                                       </li>
                                       <li class="link">
                                           <a href="../classes/Cell.html" >Cell</a>
                                       </li>
                                       <li class="link">
                                           <a href="../classes/Connection.html" >Connection</a>
                                       </li>
                                       <li class="link">
                                           <a href="../classes/Draft.html" >Draft</a>
                                       </li>
                                       <li class="link">
                                           <a href="../classes/Loom.html" >Loom</a>
                                       </li>
                                       <li class="link">
                                           <a href="../classes/Pattern.html" >Pattern</a>
                                       </li>
                                       <li class="link">
                                           <a href="../classes/Point.html" >Point</a>
                                       </li>
                                       <li class="link">
                                           <a href="../classes/Render.html" >Render</a>
                                       </li>
                                       <li class="link">
                                           <a href="../classes/Selection.html" >Selection</a>
                                       </li>
                                       <li class="link">
                                           <a href="../classes/Shuttle.html" >Shuttle</a>
                                       </li>
                                       <li class="link">
                                           <a href="../classes/System.html" >System</a>
                                       </li>
                                       <li class="link">
                                           <a href="../classes/Timeline.html" >Timeline</a>
                                       </li>
                                       <li class="link">
                                           <a href="../classes/Upload.html" >Upload</a>
                                       </li>
                                       <li class="link">
                                           <a href="../classes/Util.html" >Util</a>
                                       </li>
                               </ul>
                           </li>
                   
                           <li class="chapter">
                               <a data-type="chapter-link" href="../routes.html" ><span class="fa fa-code-fork"></span>Routes</a>
                           </li>
                   
                           <li class="chapter">
                               <div class="simple">
                                   <span class="fa fa-long-arrow-down"></span>
                                   <span>Injectables</span>
                                   <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                           data-target="#injectables-links"
                   ></span>
                               </div>
                               <ul class="links collapse in"
                                       id="injectables-links"
                   >
                                       <li class="link">
                                           <a href="../injectables/DesignmodesService.html" >DesignmodesService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/InkService.html" >InkService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/LayersService.html" >LayersService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/PatternService.html" >PatternService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/UploadService.html" >UploadService</a>
                                       </li>
                               </ul>
                           </li>
                   
                           <li class="chapter">
                               <div class="simple">
                                   <span class="fa fa-info"></span>
                                   <span>Interfaces</span>
                                   <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                           data-target="#interfaces-links"
                   ></span>
                               </div>
                               <ul class="links collapse in"
                                       id="interfaces-links"
                   >
                                       <li class="link">
                                           <a href="../interfaces/Bounds.html" >Bounds</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/DensityUnits.html" >DensityUnits</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/DensityUnits.html" >DensityUnits</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/DesignActions.html" >DesignActions</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/DesignActions.html" >DesignActions</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/DesignMode.html" >DesignMode</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/DesignModes.html" >DesignModes</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/DraftInterface.html" >DraftInterface</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/HistoryState.html" >HistoryState</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/Ink.html" >Ink</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/Interlacement.html" >Interlacement</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/InterlacementVal.html" >InterlacementVal</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/LoomCoords.html" >LoomCoords</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/LoomTypes.html" >LoomTypes</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/LoomTypes.html" >LoomTypes</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/LoomUpdate.html" >LoomUpdate</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/MaterialTypes.html" >MaterialTypes</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/MaterialTypes.html" >MaterialTypes</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/Point.html" >Point</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/StartOptions.html" >StartOptions</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/ViewModes.html" >ViewModes</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/ViewModes.html" >ViewModes</a>
                                       </li>
                               </ul>
                           </li>
                   
                           <li class="chapter">
                               <div class="simple">
                                   <span class="fa fa-plus"></span>
                                   <span>Pipes</span>
                                   <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                           data-target="#pipes-links"
                   ></span>
                               </div>
                               <ul class="links collapse in"
                                       id="pipes-links"
                   >
                                       <li class="link">
                                           <a href="../pipes/FilterPipe.html" >FilterPipe</a>
                                       </li>
                               </ul>
                           </li>
                   
                           <li class="chapter">
                               <a data-type="chapter-link" href="../miscellaneous.html" ><span class="fa fa-cubes"></span>Miscellaneous</a>
                           </li>
                   
                           <li class="chapter">
                               <a data-type="chapter-link" href="../coverage.html" ><span class="fa fa-tasks"></span>Documentation coverage</a>
                           </li>
                   
                           <li class="divider"></li>
                           <li class="copyright">
                                   Documentation generated using <a href="https://compodoc.github.io/compodoc/" target="_blank">
                                               <img src="..//images/compodoc-vectorise.svg" class="img-responsive">
                                   </a>
                           </li>
                   
                       </ul>
                   
                   </nav>
               </div>
               <div class="content component">
                   <div class="content-data">


<ol class="breadcrumb">
  <li>Components</li>
  <li>PaletteComponent</li>
</ol>


    <ul class="nav nav-tabs" role="tablist">
        <li class="active">
            <a href="#infos" id="infos-tab" role="tab" data-toggle="tab">Infos</a>
        </li>
        <li>
            <a href="#source" role="tab" id="source-tab" data-toggle="tab">Source</a>
        </li>
    </ul>

    <div class="tab-content">
        <div class="tab-pane fade active in" id="infos"><p class="comment">
    <h3>File</h3>
</p>
<p class="comment">
    <code>src/app/mixer/palette/palette.component.ts</code>
</p>



<section>
    <h3>Metadata</h3>
    <table class="table table-sm table-hover">
        <tbody>












            <tr>
                <td class="col-md-3">selector</td>
                <td class="col-md-9"><code>app-palette</code></td>
            </tr>

            <tr>
                <td class="col-md-3">styleUrls</td>
                <td class="col-md-9"><code>palette.component.scss</code></td>
            </tr>



            <tr>
                <td class="col-md-3">templateUrl</td>
                <td class="col-md-9"><code>palette.component.html</code></td>
            </tr>


        </tbody>
    </table>
</section>

    <section>
        <h3 id="inputs">Inputs</h3>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-2">
                            <code>patterns</code>
                        </td>
                        <td class="col-md-10">
                            <div><p>a reference to the default patterns (used for fill operations)</p>
</div>
                              <p>
                                <em>Type:</em>    <code><a href="../classes/Pattern.html" target="_self" >Pattern[]</a></code>

                              </p>
                        </td>
                    </tr>
                </tbody>
            </table>
    </section>

    <section>
        <h3 id="outputs">Outputs</h3>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-2">
                            <code>onDesignModeChange</code>
                        </td>
                        <td class="col-md-10">
                            <em><code>$event</code> type:</em>    <code>any</code>

                        </td>
                    </tr>
                </tbody>
            </table>
    </section>

    <section>
        <h3 id="constructor">Constructor</h3>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <code>constructor(design_modes: <a href="../injectables/DesignmodesService.html" >DesignmodesService</a>, inks: <a href="../injectables/InkService.html" >InkService</a>, layers: <a href="../injectables/LayersService.html" >LayersService</a>, resolver: <a href="https://angular.io/docs/ts/latest/api/core/index/ComponentFactoryResolver-class.html" target="_blank" >ComponentFactoryResolver</a>, _snackBar: MatSnackBar)</code>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <div class="io-description"><p>Constructs a palette object</p>
    </div>
                                <div class="io-description">
                                        <b>Parameters :</b>
                                        <ul class="jsdoc-params">
                                                <li>
                                                    <div>
                                                        <b>design_modes</b>
                                                    </div>
                                                    <div>
                                                        <p>a reference to the service containing the current design modes and selections</p>
    
                                                    </div>
                                                </li>
                                                <li>
                                                    <div>
                                                        <b>resolver</b>
                                                    </div>
                                                    <div>
                                                        <p>a reference to the factory component for dynamically generating components</p>
    
                                                    </div>
                                                </li>
                                                <li>
                                                    <div>
                                                        <b>_snackBar</b>
                                                    </div>
                                                    <div>
                                                        <p>a reference to the snackbar component that shows data on move and select</p>
    
                                                    </div>
                                                </li>
                                        </ul>
                                </div>
                        </td>
                    </tr>
                </tbody>
            </table>
    </section>

    <section>
        <h3 id="methods">Methods</h3>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> handleScroll</b>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
    <code>handleScroll(data: any)</code>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <div class="io-description">
                                    <b>Returns: </b>    <code>void</code>
    
                                </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> closeSnackBar</b>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
    <code>closeSnackBar()</code>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <div class="io-description">
                                    <b>Returns: </b>    <code>void</code>
    
                                </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> changeDesignmode</b>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
    <code>changeDesignmode(name: string)</code>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <div class="io-description">
                                    <b>Returns: </b>    <code>void</code>
    
                                </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> createSubDraft</b>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
    <code>createSubDraft(d: <a href="../classes/Draft.html" >Draft</a>)</code>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <div class="io-description"><p>dynamically creates a subdraft component, adds its inputs and event listeners, pushes the subdraft to the list of references</p>
    </div>
                                <div class="io-description">
                                        <b>Parameters :</b>
                                        <ul class="jsdoc-params">
                                                <li>
                                                    <div>
                                                        <b>d</b>
                                                    </div>
                                                    <div>
                                                        <p>a Draft object for this component to contain</p>
    
                                                    </div>
                                                </li>
                                        </ul>
                                </div>
                                <div class="io-description">
                                    <b>Returns: </b>    <code>SubdraftComponent</code>
    
                                </div>
                                    <div class="io-description">
                                        <p>the created subdraft instance</p>
    
                                    </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> removeSubdraft</b>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
    <code>removeSubdraft(subdraft: SubdraftComponent)</code>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <div class="io-description"><p>removes the subdraft sent to the function</p>
    </div>
                                <div class="io-description">
                                        <b>Parameters :</b>
                                        <ul class="jsdoc-params">
                                                <li>
                                                    <div>
                                                        <b>subdraft</b>
                                                    </div>
                                                    <div>
                                                        
                                                    </div>
                                                </li>
                                        </ul>
                                </div>
                                <div class="io-description">
                                    <b>Returns: </b>    <code>void</code>
    
                                </div>
                                    <div class="io-description">
                                        
                                    </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> createAndSetPreview</b>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
    <code>createAndSetPreview(d: <a href="../classes/Draft.html" >Draft</a>)</code>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <div class="io-description"><p>dynamically creates a subdraft component with specific requirements of the intersection, adds its inputs and event listeners, pushes the subdraft to the list of references</p>
    </div>
                                <div class="io-description">
                                        <b>Parameters :</b>
                                        <ul class="jsdoc-params">
                                                <li>
                                                    <div>
                                                        <b>d</b>
                                                    </div>
                                                    <div>
                                                        <p>a Draft object for this component to contain</p>
    
                                                    </div>
                                                </li>
                                        </ul>
                                </div>
                                <div class="io-description">
                                    <b>Returns: </b>    <code>void</code>
    
                                </div>
                                    <div class="io-description">
                                        <p>the created subdraft instance</p>
    
                                    </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> hasPreview</b>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
    <code>hasPreview()</code>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <div class="io-description">
                                    <b>Returns: </b>    <code>boolean</code>
    
                                </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> removePreview</b>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
    <code>removePreview()</code>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <div class="io-description"><p>destorys the </p>
    </div>
                                <div class="io-description">
                                        <b>Parameters :</b>
                                        <ul class="jsdoc-params">
                                                <li>
                                                    <div>
                                                        <b>d</b>
                                                    </div>
                                                    <div>
                                                        <p>a Draft object for this component to contain</p>
    
                                                    </div>
                                                </li>
                                        </ul>
                                </div>
                                <div class="io-description">
                                    <b>Returns: </b>    <code>void</code>
    
                                </div>
                                    <div class="io-description">
                                        <p>the created subdraft instance</p>
    
                                    </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b><span class="modifier">Public</span> designModeChanged</b>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <span class="modifier-icon method fa fa-play circle">
                                    <span class="fa fa-circle"></span>
                                </span>
                            <code>designModeChanged()</code>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <div class="io-description"><p>Called from mixer when it receives a change from the design mode tool or keyboard press<br>triggers view mode changes required for this mode</p>
    </div>
                                <div class="io-description">
                                    <b>Returns: </b>    <code>void</code>
    
                                </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b><span class="modifier">Private</span> removeSubscription</b>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <span class="modifier-icon method fa fa-play lock">
                                    <span class="fa fa-lock"></span>
                                </span>
                            <code>removeSubscription()</code>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <div class="io-description">
                                    <b>Returns: </b>    <code>void</code>
    
                                </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b><span class="modifier">Private</span> resolveCoordsToNdx</b>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <span class="modifier-icon method fa fa-play lock">
                                    <span class="fa fa-lock"></span>
                                </span>
                            <code>resolveCoordsToNdx(p: <a href="../classes/Point.html" >Point</a>)</code>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <div class="io-description">
                                    <b>Returns: </b>    <code>Interlacement</code>
    
                                </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b><span class="modifier">Private</span> isSameNdx</b>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <span class="modifier-icon method fa fa-play lock">
                                    <span class="fa fa-lock"></span>
                                </span>
                            <code>isSameNdx(p1: any, p2: any)</code>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <div class="io-description">
                                    <b>Returns: </b>    <code>boolean</code>
    
                                </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b><span class="modifier">Private</span> drawSelection</b>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <span class="modifier-icon method fa fa-play lock">
                                    <span class="fa fa-lock"></span>
                                </span>
                            <code>drawSelection(ndx: Interlacement)</code>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <div class="io-description">
                                    <b>Returns: </b>    <code>void</code>
    
                                </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b><span class="modifier">Private</span> setCell</b>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <span class="modifier-icon method fa fa-play lock">
                                    <span class="fa fa-lock"></span>
                                </span>
                            <code>setCell(ndx: Interlacement)</code>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <div class="io-description"><p>sets the value of the scratchpad cell at ndx<br>checks for self interselcting </p>
    </div>
                                <div class="io-description">
                                        <b>Parameters :</b>
                                        <ul class="jsdoc-params">
                                                <li>
                                                    <div>
                                                        <b>ndx</b>
                                                    </div>
                                                    <div>
                                                        <p>(i,j)</p>
    
                                                    </div>
                                                </li>
                                        </ul>
                                </div>
                                <div class="io-description">
                                    <b>Returns: </b>    <code>void</code>
    
                                </div>
                                    <div class="io-description">
                                        
                                    </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b><span class="modifier">Private</span> computeCellColor</b>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <span class="modifier-icon method fa fa-play lock">
                                    <span class="fa fa-lock"></span>
                                </span>
                            <code>computeCellColor(ink: string, over: <a href="../classes/Cell.html" >Cell</a>, under: boolean)</code>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <div class="io-description"><p>called by drawcell. Draws on screen based on the current ink</p>
    </div>
                                <div class="io-description">
                                        <b>Parameters :</b>
                                        <ul class="jsdoc-params">
                                                <li>
                                                    <div>
                                                        <b>ink</b>
                                                    </div>
                                                    <div>
                                                        
                                                    </div>
                                                </li>
                                                <li>
                                                    <div>
                                                        <b>over</b>
                                                    </div>
                                                    <div>
                                                        
                                                    </div>
                                                </li>
                                                <li>
                                                    <div>
                                                        <b>under</b>
                                                    </div>
                                                    <div>
                                                        
                                                    </div>
                                                </li>
                                        </ul>
                                </div>
                                <div class="io-description">
                                    <b>Returns: </b>    <code>string</code>
    
                                </div>
                                    <div class="io-description">
                                        
                                    </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b><span class="modifier">Private</span> computeCellValue</b>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <span class="modifier-icon method fa fa-play lock">
                                    <span class="fa fa-lock"></span>
                                </span>
                            <code>computeCellValue(ink: string, over: <a href="../classes/Cell.html" >Cell</a>, under: boolean)</code>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <div class="io-description"><p>applies the filter betetween over and under and returns the result</p>
    </div>
                                <div class="io-description">
                                        <b>Parameters :</b>
                                        <ul class="jsdoc-params">
                                                <li>
                                                    <div>
                                                        <b>ink</b>
                                                    </div>
                                                    <div>
                                                        <p>the ink with which to compute the transition</p>
    
                                                    </div>
                                                </li>
                                                <li>
                                                    <div>
                                                        <b>over</b>
                                                    </div>
                                                    <div>
                                                        <p>the value of the primary (top) cell</p>
    
                                                    </div>
                                                </li>
                                                <li>
                                                    <div>
                                                        <b>under</b>
                                                    </div>
                                                    <div>
                                                        <p>the value of the intersecting (bottom) cell </p>
    
                                                    </div>
                                                </li>
                                        </ul>
                                </div>
                                <div class="io-description">
                                    <b>Returns: </b>    <code>boolean</code>
    
                                </div>
                                    <div class="io-description">
                                        
                                    </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b><span class="modifier">Private</span> getScratchpadProduct</b>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <span class="modifier-icon method fa fa-play lock">
                                    <span class="fa fa-lock"></span>
                                </span>
                            <code>getScratchpadProduct(ndx: Interlacement, ink: string, over: <a href="../classes/Cell.html" >Cell</a>)</code>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <div class="io-description"><p>called when creating a subdraft from the drawing on the screen. Computes the resulting value based on<br>all intersections with the drawing</p>
    </div>
                                <div class="io-description">
                                        <b>Parameters :</b>
                                        <ul class="jsdoc-params">
                                                <li>
                                                    <div>
                                                        <b>ndx</b>
                                                    </div>
                                                    <div>
                                                        <p>the i,j location of the cell we are checking</p>
    
                                                    </div>
                                                </li>
                                                <li>
                                                    <div>
                                                        <b>ink</b>
                                                    </div>
                                                    <div>
                                                        <p>the currently selected ink</p>
    
                                                    </div>
                                                </li>
                                                <li>
                                                    <div>
                                                        <b>over</b>
                                                    </div>
                                                    <div>
                                                        <p>the Cell we are checking against</p>
    
                                                    </div>
                                                </li>
                                        </ul>
                                </div>
                                <div class="io-description">
                                    <b>Returns: </b>    <code>boolean</code>
    
                                </div>
                                    <div class="io-description">
                                        <p>true/false or null</p>
    
                                    </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b><span class="modifier">Public</span> computeFilter</b>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <span class="modifier-icon method fa fa-play circle">
                                    <span class="fa fa-circle"></span>
                                </span>
                            <code>computeFilter(ink: string, a: boolean, b: boolean)</code>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <div class="io-description"><p>takes two booleans and returns their result based on the ink assigned</p>
    </div>
                                <div class="io-description">
                                        <b>Parameters :</b>
                                        <ul class="jsdoc-params">
                                                <li>
                                                    <div>
                                                        <b>ink</b>
                                                    </div>
                                                    <div>
                                                        <p>the name of the ink in question </p>
    
                                                    </div>
                                                </li>
                                                <li>
                                                    <div>
                                                        <b>a</b>
                                                    </div>
                                                    <div>
                                                        <p>the first (top) value </p>
    
                                                    </div>
                                                </li>
                                                <li>
                                                    <div>
                                                        <b>b</b>
                                                    </div>
                                                    <div>
                                                        <p>the second (under) value</p>
    
                                                    </div>
                                                </li>
                                        </ul>
                                </div>
                                <div class="io-description">
                                    <b>Returns: </b>    <code>boolean</code>
    
                                </div>
                                    <div class="io-description">
                                        <p>boolean result</p>
    
                                    </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b><span class="modifier">Private</span> drawCell</b>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <span class="modifier-icon method fa fa-play lock">
                                    <span class="fa fa-lock"></span>
                                </span>
                            <code>drawCell(ndx: Interlacement)</code>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <div class="io-description"><p>draw the cell at position ndx</p>
    </div>
                                <div class="io-description">
                                        <b>Parameters :</b>
                                        <ul class="jsdoc-params">
                                                <li>
                                                    <div>
                                                        <b>ndx</b>
                                                    </div>
                                                    <div>
                                                        <p>(i,j)</p>
    
                                                    </div>
                                                </li>
                                        </ul>
                                </div>
                                <div class="io-description">
                                    <b>Returns: </b>    <code>void</code>
    
                                </div>
                                    <div class="io-description">
                                        
                                    </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> onDeleteSubdraftCalled</b>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
    <code>onDeleteSubdraftCalled(obj: any)</code>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <div class="io-description"><p>Deletes the subdraft that called this function.</p>
    </div>
                                <div class="io-description">
                                    <b>Returns: </b>    <code>void</code>
    
                                </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> subdraftStarted</b>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
    <code>subdraftStarted(obj: any)</code>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <div class="io-description"><p>A mouse event, originated in a subdraft, has been started<br>checkes the design mode and handles the event as required</p>
    </div>
                                <div class="io-description">
                                        <b>Parameters :</b>
                                        <ul class="jsdoc-params">
                                                <li>
                                                    <div>
                                                        <b>obj</b>
                                                    </div>
                                                    <div>
                                                        <p>contains the id of the moving subdraft</p>
    
                                                    </div>
                                                </li>
                                        </ul>
                                </div>
                                <div class="io-description">
                                    <b>Returns: </b>    <code>void</code>
    
                                </div>
                                    <div class="io-description">
                                        
                                    </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> selectionStarted</b>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
    <code>selectionStarted()</code>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <div class="io-description">
                                    <b>Returns: </b>    <code>void</code>
    
                                </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> drawStarted</b>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
    <code>drawStarted()</code>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <div class="io-description"><p>clears the scratchpad for the new drawing event</p>
    </div>
                                <div class="io-description">
                                    <b>Returns: </b>    <code>void</code>
    
                                </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> getScratchPadBounds</b>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
    <code>getScratchPadBounds()</code>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <div class="io-description"><p>gets the bounds of a drawing on the scratchpad, a drawing is represented by set cells</p>
    </div>
                                <div class="io-description">
                                </div>
                                <div class="io-description">
                                    <b>Returns: </b>    <code>Interlacement[]</code>
    
                                </div>
                                    <div class="io-description">
                                        <p>an object representing the bounds in the format of i, j (the row, column index of the pad)</p>
    
                                    </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> processDrawingEnd</b>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
    <code>processDrawingEnd()</code>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <div class="io-description"><p>handles checks and actions to take when drawing event ends<br>gets the boudary of drawn segment and creates a subdraft containing that drawing<br>if the drawing sits on top of an existing subdraft, merge the drawing into that subdraft (extending the original if neccessary)</p>
    </div>
                                <div class="io-description">
                                </div>
                                <div class="io-description">
                                    <b>Returns: </b>    <code>void</code>
    
                                </div>
                                    <div class="io-description">
                                        
                                    </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b><span class="modifier">Private</span> onStart</b>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <span class="modifier-icon method fa fa-play lock">
                                    <span class="fa fa-lock"></span>
                                </span>
                            <code>onStart(event: any)</code>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <div class="io-description"><p>handles actions to take when the mouse is down inside of the palette</p>
    </div>
                                <div class="io-description">
                                        <b>Parameters :</b>
                                        <ul class="jsdoc-params">
                                                <li>
                                                    <div>
                                                        <b>event</b>
                                                    </div>
                                                    <div>
                                                        <p>the mousedown event</p>
    
                                                    </div>
                                                </li>
                                        </ul>
                                </div>
                                <div class="io-description">
                                    <b>Returns: </b>    <code>void</code>
    
                                </div>
                                    <div class="io-description">
                                        
                                    </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> onMove</b>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
    <code>onMove(event: any)</code>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <div class="io-description"><p>called form the subscription created on start, checks the index of the location and returns null if its the same</p>
    </div>
                                <div class="io-description">
                                        <b>Parameters :</b>
                                        <ul class="jsdoc-params">
                                                <li>
                                                    <div>
                                                        <b>event</b>
                                                    </div>
                                                    <div>
                                                        <p>the event object</p>
    
                                                    </div>
                                                </li>
                                        </ul>
                                </div>
                                <div class="io-description">
                                    <b>Returns: </b>    <code>void</code>
    
                                </div>
                                    <div class="io-description">
                                        
                                    </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b><span class="modifier">Private</span> onEnd</b>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <span class="modifier-icon method fa fa-play lock">
                                    <span class="fa fa-lock"></span>
                                </span>
                            <code>onEnd(event: any)</code>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <div class="io-description"><p>Called when the mouse is up or leaves the boundary of the view</p>
    </div>
                                <div class="io-description">
                                        <b>Parameters :</b>
                                        <ul class="jsdoc-params">
                                                <li>
                                                    <div>
                                                        <b>event</b>
                                                    </div>
                                                    <div>
                                                        
                                                    </div>
                                                </li>
                                        </ul>
                                </div>
                                <div class="io-description">
                                    <b>Returns: </b>    <code>void</code>
    
                                </div>
                                    <div class="io-description">
                                        
                                    </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> processSelection</b>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
    <code>processSelection()</code>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <div class="io-description"><p>Called when a selection operation ends. Checks to see if this selection intersects with any subdrafts and<br>merges and or splits as required. </p>
    </div>
                                <div class="io-description">
                                    <b>Returns: </b>    <code>void</code>
    
                                </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> subdraftMoved</b>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
    <code>subdraftMoved(obj: any)</code>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <div class="io-description">
                                    <b>Returns: </b>    <code>void</code>
    
                                </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> subdraftDropped</b>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
    <code>subdraftDropped(obj: any)</code>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <div class="io-description"><p>checks if this subdraft has been dropped onto of another and merges them accordingly </p>
    </div>
                                <div class="io-description">
                                        <b>Parameters :</b>
                                        <ul class="jsdoc-params">
                                                <li>
                                                    <div>
                                                        <b>obj</b>
                                                    </div>
                                                    <div>
                                                        
                                                    </div>
                                                </li>
                                        </ul>
                                </div>
                                <div class="io-description">
                                    <b>Returns: </b>    <code>void</code>
    
                                </div>
                                    <div class="io-description">
                                        
                                    </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> mergeSubdrafts</b>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
    <code>mergeSubdrafts(primary: SubdraftComponent)</code>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <div class="io-description"><p>merges a collection of subdraft components into the primary component, deletes the merged components</p>
    </div>
                                <div class="io-description">
                                        <b>Parameters :</b>
                                        <ul class="jsdoc-params">
                                                <li>
                                                    <div>
                                                        <b>primary</b>
                                                    </div>
                                                    <div>
                                                        <p>the draft to merge into</p>
    
                                                    </div>
                                                </li>
                                        </ul>
                                </div>
                                <div class="io-description">
                                    <b>Returns: </b>    <code>boolean</code>
    
                                </div>
                                    <div class="io-description">
                                        <p>true or false to describe if a merge took place. </p>
    
                                    </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> computeHeddleValue</b>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
    <code>computeHeddleValue(p: <a href="../classes/Point.html" >Point</a>, main: SubdraftComponent, isect: SubdraftComponent[])</code>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <div class="io-description">
                                    <b>Returns: </b>    <code>boolean</code>
    
                                </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> doOverlap</b>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
    <code>doOverlap(l1: <a href="../classes/Point.html" >Point</a>, r1: <a href="../classes/Point.html" >Point</a>, l2: <a href="../classes/Point.html" >Point</a>, r2: <a href="../classes/Point.html" >Point</a>)</code>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <div class="io-description"><p>check if the rectangles defined by the points overlap</p>
    </div>
                                <div class="io-description">
                                        <b>Parameters :</b>
                                        <ul class="jsdoc-params">
                                                <li>
                                                    <div>
                                                        <b>l1</b>
                                                    </div>
                                                    <div>
                                                        <p>top left point of rectangle 1</p>
    
                                                    </div>
                                                </li>
                                                <li>
                                                    <div>
                                                        <b>r1</b>
                                                    </div>
                                                    <div>
                                                        <p>bottom right point of rectangle 1</p>
    
                                                    </div>
                                                </li>
                                                <li>
                                                    <div>
                                                        <b>l2</b>
                                                    </div>
                                                    <div>
                                                        <p>top left point of rectangle 2</p>
    
                                                    </div>
                                                </li>
                                                <li>
                                                    <div>
                                                        <b>r2</b>
                                                    </div>
                                                    <div>
                                                        <p>bottom right point of rectanble 2</p>
    
                                                    </div>
                                                </li>
                                        </ul>
                                </div>
                                <div class="io-description">
                                    <b>Returns: </b>    <code>void</code>
    
                                </div>
                                    <div class="io-description">
                                        <p>true or false in accordance to whether or not they overlap</p>
    
                                    </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> getLeftMost</b>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
    <code>getLeftMost(main: SubdraftComponent, isects: SubdraftComponent[])</code>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <div class="io-description">
                                    <b>Returns: </b>    <code>SubdraftComponent</code>
    
                                </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> getTopMost</b>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
    <code>getTopMost(main: SubdraftComponent, isects: SubdraftComponent[])</code>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <div class="io-description">
                                    <b>Returns: </b>    <code>SubdraftComponent</code>
    
                                </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> getRightMost</b>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
    <code>getRightMost(main: SubdraftComponent, isects: SubdraftComponent[])</code>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <div class="io-description">
                                    <b>Returns: </b>    <code>SubdraftComponent</code>
    
                                </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> getBottomMost</b>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
    <code>getBottomMost(main: SubdraftComponent, isects: SubdraftComponent[])</code>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <div class="io-description">
                                    <b>Returns: </b>    <code>SubdraftComponent</code>
    
                                </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> getSubdraft</b>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
    <code>getSubdraft(id: number)</code>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <div class="io-description"><p>returns the subdraft component associated with this id</p>
    </div>
                                <div class="io-description">
                                        <b>Parameters :</b>
                                        <ul class="jsdoc-params">
                                                <li>
                                                    <div>
                                                        <b>id</b>
                                                    </div>
                                                    <div>
                                                        <p>the unique draft id contined in the subdraft</p>
    
                                                    </div>
                                                </li>
                                        </ul>
                                </div>
                                <div class="io-description">
                                    <b>Returns: </b>    <code>SubdraftComponent</code>
    
                                </div>
                                    <div class="io-description">
                                        <p>the subdraft Component</p>
    
                                    </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> getSubdraftsIntersectingSelection</b>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
    <code>getSubdraftsIntersectingSelection(selection: <a href="../classes/Selection.html" >SelectionComponent</a>)</code>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <div class="io-description">
                                    <b>Returns: </b>    <code>void</code>
    
                                </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> getIntersectingSubdraftsForPoint</b>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
    <code>getIntersectingSubdraftsForPoint(p: any)</code>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <div class="io-description"><p>get any subdrafts that intersect a given screen position</p>
    </div>
                                <div class="io-description">
                                        <b>Parameters :</b>
                                        <ul class="jsdoc-params">
                                                <li>
                                                    <div>
                                                        <b>p</b>
                                                    </div>
                                                    <div>
                                                        <p>the x, y position of this cell </p>
    
                                                    </div>
                                                </li>
                                        </ul>
                                </div>
                                <div class="io-description">
                                    <b>Returns: </b>    <code>void</code>
    
                                </div>
                                    <div class="io-description">
                                        
                                    </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> getIntersectingSubdrafts</b>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
    <code>getIntersectingSubdrafts(primary: SubdraftComponent)</code>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <div class="io-description"><p>get any subdrafts that intersect primary based on checks on their boundaries</p>
    </div>
                                <div class="io-description">
                                        <b>Parameters :</b>
                                        <ul class="jsdoc-params">
                                                <li>
                                                    <div>
                                                        <b>primary</b>
                                                    </div>
                                                    <div>
                                                        
                                                    </div>
                                                </li>
                                        </ul>
                                </div>
                                <div class="io-description">
                                    <b>Returns: </b>    <code>void</code>
    
                                </div>
                                    <div class="io-description">
                                        
                                    </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> getSelectionBounds</b>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
    <code>getSelectionBounds(c1: any, c2: any)</code>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <div class="io-description">
                                    <b>Returns: </b>    <code>Bounds</code>
    
                                </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> getIntersectionBounds</b>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
    <code>getIntersectionBounds(primary: SubdraftComponent, isect: SubdraftComponent)</code>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <div class="io-description"><p>returns a Bounds type that represents the intersection between primary and one intersecting subdraft</p>
    </div>
                                <div class="io-description">
                                        <b>Parameters :</b>
                                        <ul class="jsdoc-params">
                                                <li>
                                                    <div>
                                                        <b>primary</b>
                                                    </div>
                                                    <div>
                                                        <p>the rectangular area we are checking for intersections</p>
    
                                                    </div>
                                                </li>
                                                <li>
                                                    <div>
                                                        <b>isect</b>
                                                    </div>
                                                    <div>
                                                        <p>an array of all the components that intersect</p>
    
                                                    </div>
                                                </li>
                                        </ul>
                                </div>
                                <div class="io-description">
                                    <b>Returns: </b>    <code>Bounds</code>
    
                                </div>
                                    <div class="io-description">
                                        <p>the array of bounds of all intersections</p>
    
                                    </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> getCombinedBounds</b>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
    <code>getCombinedBounds(moving: SubdraftComponent, isect: SubdraftComponent[])</code>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <div class="io-description"><p>gets the combined boundary of a Subdraft and any of its intersections</p>
    </div>
                                <div class="io-description">
                                        <b>Parameters :</b>
                                        <ul class="jsdoc-params">
                                                <li>
                                                    <div>
                                                        <b>moving</b>
                                                    </div>
                                                    <div>
                                                        <p>A SubdraftComponent that is our primary subdraft</p>
    
                                                    </div>
                                                </li>
                                                <li>
                                                    <div>
                                                        <b>isect</b>
                                                    </div>
                                                    <div>
                                                        <p>Any subdrafts that intersect with this component </p>
    
                                                    </div>
                                                </li>
                                        </ul>
                                </div>
                                <div class="io-description">
                                    <b>Returns: </b>    <code>Bounds</code>
    
                                </div>
                                    <div class="io-description">
                                        <p>the bounds of a rectangle that holds both components</p>
    
                                    </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> getCombinedDraft</b>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
    <code>getCombinedDraft(bounds: Bounds, primary: SubdraftComponent, isect: SubdraftComponent[])</code>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <div class="io-description"><p>creates a draft in size bounds that contains all of the computed points of its intersections</p>
    </div>
                                <div class="io-description">
                                        <b>Parameters :</b>
                                        <ul class="jsdoc-params">
                                                <li>
                                                    <div>
                                                        <b>bounds</b>
                                                    </div>
                                                    <div>
                                                        <p>the boundary of all the intersections</p>
    
                                                    </div>
                                                </li>
                                                <li>
                                                    <div>
                                                        <b>primary</b>
                                                    </div>
                                                    <div>
                                                        <p>the primary draft that we are checking for intersections</p>
    
                                                    </div>
                                                </li>
                                                <li>
                                                    <div>
                                                        <b>isect</b>
                                                    </div>
                                                    <div>
                                                        <p>an Array of the intersecting components</p>
    
                                                    </div>
                                                </li>
                                        </ul>
                                </div>
                                <div class="io-description">
                                    <b>Returns: </b>    <code><a href="../classes/Draft.html" target="_self" >Draft</a></code>
    
                                </div>
                                    <div class="io-description">
                                        
                                    </div>
                        </td>
                    </tr>
                </tbody>
            </table>
    </section>

    <section>
        <h3 id="inputs">Properties</h3>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> canvas</b>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <code>canvas:     <code>HTMLCanvasElement</code>
    </bcode>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <div class="io-description"><p>HTML Canvas element that draws the selection and currently cells drawn on this component</p>
    </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> canvas_zndx</b>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <code>canvas_zndx:     <code>number</code>
    </bcode>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <div class="io-description"><p>links to the z-index to push the canvas to the front or back of view when freehand drawing. </p>
    </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> cx</b>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <code>cx:     <code>any</code>
    </bcode>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> last</b>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <code>last:     <code>Interlacement</code>
    </bcode>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <div class="io-description"><p>stores an i and j of the last user selected location within the component</p>
    </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> moveSubscription</b>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <code>moveSubscription:     <code>Subscription</code>
    </bcode>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <div class="io-description"><p>Subscribes to move event after a touch event is started.</p>
    </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> preview</b>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <code>preview:     <code>SubdraftComponent</code>
    </bcode>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <div class="io-description"><p>a placeholder to reference a temporary rendering of an union between subdrafts<br>used to preview the changes that will happen if the subdraft is to be dropped at that point</p>
    </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> preview_ref</b>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <code>preview_ref:     <code><a href="https://angular.io/docs/ts/latest/api/core/index/ViewRef-class.html" target="_blank" >ViewRef</a></code>
    </bcode>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <div class="io-description"><p>a reference to the viewref for the intersection component to ease addign and deleting</p>
    </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> scale</b>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <code>scale:     <code>number</code>
    </bcode>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <div class="io-description"><p>a value to represent the current user defined scale for this component. </p>
    </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> scratch_pad</b>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <code>scratch_pad:     <code><a href="../classes/Cell.html" target="_self" >Cell[][]</a></code>
    </bcode>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <div class="io-description"><p>holds the data of events drawn on this component (that are not associated with a subdraft)</p>
    </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> selection</b>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <code>selection:     <code><a href="../classes/Selection.html" target="_self" >SelectionComponent</a></code>
    </bcode>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <div class="io-description"><p>holds a reference to the selection component</p>
    </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> subdraft_refs</b>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <code>subdraft_refs:     <code>SubdraftComponent[]</code>
    </bcode>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <div class="io-description"><p>holds a reference to the Subdraft Components within this view</p>
    </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> vc</b>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <code>vc:     <code><a href="https://angular.io/docs/ts/latest/api/core/index/ViewContainerRef-class.html" target="_blank" >ViewContainerRef</a></code>
    </bcode>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <div class="io-description"><p>A container that supports the automatic generation and removal of the components inside of it</p>
    </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> viewport</b>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <code>viewport:     <code>Bounds</code>
    </bcode>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <div class="io-description"><p>links to the z-index to push the canvas to the front or back of view when freehand drawing. </p>
    </div>
                        </td>
                    </tr>
                </tbody>
            </table>
    </section>
</div>
        <div class="tab-pane fade tab-source-code" id="source">
            <pre><code class="hljs javascript">import { Observable, Subscription, fromEvent, from } from &#x27;rxjs&#x27;;
import { DesignmodesService } from &#x27;../../mixer/provider/designmodes.service&#x27;;
import { Component, HostListener, ViewContainerRef, Input, ComponentFactoryResolver, ViewChild, OnInit, ViewRef, Output, EventEmitter } from &#x27;@angular/core&#x27;;
import { SubdraftComponent } from &#x27;./subdraft/subdraft.component&#x27;;
import { SelectionComponent } from &#x27;./selection/selection.component&#x27;;
import { SnackbarComponent } from &#x27;./snackbar/snackbar.component&#x27;;
import { Draft } from &#x27;./../../core/model/draft&#x27;;
import { Cell } from &#x27;./../../core/model/cell&#x27;;
import {MatSnackBar} from &#x27;@angular/material/snack-bar&#x27;;
import { Point, Interlacement, Bounds } from &#x27;../../core/model/datatypes&#x27;;
import { Pattern } from &#x27;../../core/model/pattern&#x27;; 
import { dsv } from &#x27;d3-fetch&#x27;;
import { sampleSize } from &#x27;lodash&#x27;;
import { InkService } from &#x27;../../mixer/provider/ink.service&#x27;;
import {cloneDeep} from &#x27;lodash&#x27;;
import { LayersService } from &#x27;../../mixer/provider/layers.service&#x27;;


@Component({
  selector: &#x27;app-palette&#x27;,
  templateUrl: &#x27;./palette.component.html&#x27;,
  styleUrls: [&#x27;./palette.component.scss&#x27;]
})


export class PaletteComponent implements OnInit{


  /**
   * a reference to the default patterns (used for fill operations)
   * @property {Array&lt;Pattern&gt;}
   */ 
  @Input() patterns: Array&lt;Pattern&gt;;
  @Output() onDesignModeChange: any &#x3D; new EventEmitter();

  /**
   * Subscribes to move event after a touch event is started.
   * @property {Subscription}
   */
  moveSubscription: Subscription;


  /**
   * A container that supports the automatic generation and removal of the components inside of it
   */
  @ViewChild(&#x27;vc&#x27;, {read: ViewContainerRef, static: true}) vc: ViewContainerRef;

  /**
   * holds a reference to the Subdraft Components within this view
   * @property {Array&lt;SubdraftComponent&gt;}
   */
  subdraft_refs: Array&lt;SubdraftComponent&gt;;

    /**
   * a placeholder to reference a temporary rendering of an union between subdrafts
   * used to preview the changes that will happen if the subdraft is to be dropped at that point
   * @property {SubdraftComponent}
   */
  preview: SubdraftComponent;

  /**
   * a reference to the viewref for the intersection component to ease addign and deleting
   * @property {ViewRef}
   */
  preview_ref: ViewRef;
     
  /**
   * holds a reference to the selection component
   * @property {Selection}
   */
  selection &#x3D; new SelectionComponent();

  /**
   * holds the data of events drawn on this component (that are not associated with a subdraft)
   * @property {Array&lt;Array&lt;Cell&gt;&gt;}
   */
  scratch_pad: Array&lt;Array&lt;Cell&gt;&gt; &#x3D; [];

  /**
   * HTML Canvas element that draws the selection and currently cells drawn on this component
   * @property {Canvas}
   */
  canvas: HTMLCanvasElement;
  cx: any;

  /**
   * stores an i and j of the last user selected location within the component
   * @property {Point}
   */
  last: Interlacement;


  /**
   * a value to represent the current user defined scale for this component. 
   * @property {number}
   */

   scale: number;

  /**
   * links to the z-index to push the canvas to the front or back of view when freehand drawing. 
   */
   canvas_zndx:number &#x3D; -1;
  

  /**
   * links to the z-index to push the canvas to the front or back of view when freehand drawing. 
   */
   viewport:Bounds;
  


  /**
   * Constructs a palette object
   * @param design_modes a reference to the service containing the current design modes and selections
   * @param resolver a reference to the factory component for dynamically generating components
   * @param _snackBar a reference to the snackbar component that shows data on move and select
   */
  constructor(private design_modes: DesignmodesService, private inks: InkService, private layers: LayersService, private resolver: ComponentFactoryResolver, private _snackBar: MatSnackBar) { 
    this.subdraft_refs &#x3D; [];
    this.viewport &#x3D; {
      topleft: {x:0, y:0}, 
      width: 0, 
      height:0
    };
  }

/**
 * Called when palette is initailized
 */
  ngOnInit(){
    this.scale &#x3D; 10;
    this.vc.clear();
    console.log(this.inks);
  }

  /**
   * unsubscribes to all open subscriptions and clears the view component
   */
  ngOnDestroy(){

    this.subdraft_refs.forEach(element &#x3D;&gt; {
      element.onSubdraftStart.unsubscribe();
      element.onSubdraftDrop.unsubscribe();
      element.onSubdraftMove.unsubscribe();
      element.onDeleteCalled.unsubscribe();
    });

    this.vc.clear();
    
  }

  /**
   * Gets references to view items and adds to them after the view is initialized
   */
  ngAfterViewInit(){
    this.canvas &#x3D; &lt;HTMLCanvasElement&gt; document.getElementById(&quot;scratch&quot;);
    this.cx &#x3D; this.canvas.getContext(&quot;2d&quot;);
    this.canvas.width &#x3D; 5000;
    this.canvas.height &#x3D; 5000;

    this.selection.scale &#x3D; this.scale;
    this.selection.active &#x3D; false;
    this.designModeChanged();

  }

  handleScroll(data: any){
    const div:HTMLElement &#x3D; document.getElementById(&#x27;scrollable-container&#x27;);
    this.viewport.topleft &#x3D; {x: div.offsetParent.scrollLeft, y: div.offsetParent.scrollTop};
  }

  closeSnackBar(){
    this._snackBar.dismiss();
  }

  //called when the palette needs to change the design mode, emits output to parent
  changeDesignmode(name: string) {
    this.design_modes.select(name);
    const mode &#x3D; this.design_modes.getMode(name);
    if(!mode.enable_inks){
        this.inks.select(&#x27;neq&#x27;);
    }

    
    this.onDesignModeChange.emit(name);
  }

  /**
   * dynamically creates a subdraft component, adds its inputs and event listeners, pushes the subdraft to the list of references
   * @param d a Draft object for this component to contain
   * @returns the created subdraft instance
   */
  createSubDraft(d: Draft):SubdraftComponent{
    const factory &#x3D; this.resolver.resolveComponentFactory(SubdraftComponent);
    const subdraft &#x3D; this.vc.createComponent&lt;SubdraftComponent&gt;(factory);
    subdraft.instance.onSubdraftDrop.subscribe(this.subdraftDropped.bind(this));
    subdraft.instance.onSubdraftMove.subscribe(this.subdraftMoved.bind(this));
    subdraft.instance.onSubdraftStart.subscribe(this.subdraftStarted.bind(this));
    subdraft.instance.onDeleteCalled.subscribe(this.onDeleteSubdraftCalled.bind(this));
    subdraft.instance.draft &#x3D; d;
    subdraft.instance.viewport &#x3D; this.viewport;
    subdraft.instance.patterns &#x3D; this.patterns;
    subdraft.instance.ink &#x3D; this.inks.getSelected(); //default to the currently selected ink
  
    this.subdraft_refs.push(subdraft.instance);
    return subdraft.instance;
  }

  /**
   * removes the subdraft sent to the function
   * @param subdraft 
   */
  removeSubdraft(subdraft: SubdraftComponent){
    const ndx &#x3D; this.subdraft_refs.findIndex((sr) &#x3D;&gt; (subdraft.canvas.id.toString() &#x3D;&#x3D;&#x3D; sr.canvas.id.toString()));
    this.vc.remove(ndx);
    this.subdraft_refs.splice(ndx, 1);
  }

    /**
   * dynamically creates a subdraft component with specific requirements of the intersection, adds its inputs and event listeners, pushes the subdraft to the list of references
   * @param d a Draft object for this component to contain
   * @returns the created subdraft instance
   */
    createAndSetPreview(d: Draft){
      const factory &#x3D; this.resolver.resolveComponentFactory(SubdraftComponent);
      const subdraft &#x3D; this.vc.createComponent&lt;SubdraftComponent&gt;(factory);
      subdraft.instance.draft &#x3D; d;
      subdraft.instance.setAsPreview();
      subdraft.instance.disableDrag();
      this.preview_ref &#x3D; subdraft.hostView;
      this.preview &#x3D; subdraft.instance;
    }

    hasPreview():boolean{
      if(this.preview_ref &#x3D;&#x3D;&#x3D; undefined) return false;
      return true;
    }

  /**
   * destorys the 
   * @param d a Draft object for this component to contain
   * @returns the created subdraft instance
   */
    removePreview(){
      const ndx &#x3D; this.vc.indexOf(this.preview_ref);
      this.vc.remove(ndx);
      this.preview_ref &#x3D; undefined;
      this.preview &#x3D; undefined;
  }

  /**
   * Called from mixer when it receives a change from the design mode tool or keyboard press
   * triggers view mode changes required for this mode
   */
  public designModeChanged(){

    if(this.design_modes.isSelected(&#x27;draw&#x27;)){

      this.subdraft_refs.forEach(sd &#x3D;&gt; {
        sd.disableDrag();
      });

    }else if(this.design_modes.isSelected(&#x27;move&#x27;)){

      this.subdraft_refs.forEach(sd &#x3D;&gt; {
        sd.enableDrag();
      });


    }else if(this.design_modes.isSelected(&#x27;select&#x27;)){
      this.subdraft_refs.forEach(sd &#x3D;&gt; {
        sd.disableDrag();
      });
    }

  }


   private removeSubscription() {    
    if (this.moveSubscription) {
      this.moveSubscription.unsubscribe();
    }
  }

  private resolveCoordsToNdx(p: Point) : Interlacement {    
    const i &#x3D; Math.floor((p.y - 64) / this.scale);
    const j &#x3D; Math.floor((p.x) / this.scale);
    return {i: i, j: j, si: i};
  }


  private isSameNdx(p1: any, p2:any) : boolean {    
    if(p1.i !&#x3D; p2.i ) return false;
    if(p1.j !&#x3D; p2.j) return false;
    return true;
  }


  private drawSelection(ndx: Interlacement){


    this.cx.clearRect(0, 0, this.canvas.width, this.canvas.height);

    const bounds &#x3D;{
      top: this.selection.start.j*this.scale,
      left: this.selection.start.i*this.scale,
      bottom: ndx.j *this.scale,
      right: ndx.i*this.scale
    };

    this.cx.strokeStyle &#x3D; &quot;#ff4081&quot;;
    this.cx.strokeRect(bounds.top, bounds.left, bounds.bottom-bounds.top, bounds.right-bounds.left);
      
  }

  /**
   * sets the value of the scratchpad cell at ndx
   * checks for self interselcting 
   * @param ndx (i,j)
   */
  private setCell(ndx: Interlacement){
    const c: Cell &#x3D; this.scratch_pad[ndx.i][ndx.j];
    if(this.inks.getSelected() &#x3D;&#x3D;&#x3D; &quot;down&quot;) c.setHeddle(false);
    else c.setHeddle(true);
    //use the code below to use past scratchpad values, but this seems wrong
    // console.log(c);
    // const val: boolean &#x3D; c.isSet(); //check for a previous value
    // c.setHeddle(true);

    // if(val){
    //   const newval:boolean &#x3D; this.computeCellValue(this.inks.getSelected(), c, val);
    //   console.log(&quot;setting to&quot;, newval);
    //   c.setHeddle(newval);
    // } 
  }

  /**
   * called by drawcell. Draws on screen based on the current ink
   * @param ink 
   * @param over 
   * @param under 
   * @returns 
   */
  private computeCellColor(ink: string, over: Cell, under: boolean): string{

    const res: boolean &#x3D; this.computeCellValue(ink, over, under);
    if(ink &#x3D;&#x3D;&#x3D; &#x27;unset&#x27; &amp;&amp; res &#x3D;&#x3D; true) return &quot;#cccccc&quot;; 
    if(res &#x3D;&#x3D;&#x3D;null) return &quot;#fafafa&quot;;
    if(res) return &quot;#000000&quot;;
    return &quot;#ffffff&quot;;      
  }

  /**
   * applies the filter betetween over and under and returns the result
   * @param ink the ink with which to compute the transition
   * @param over the value of the primary (top) cell
   * @param under the value of the intersecting (bottom) cell 
   * @returns 
   */
  private computeCellValue(ink: string, over: Cell, under: boolean): boolean{
    
    let res: boolean &#x3D; this.computeFilter(ink, over.getHeddle(), under);
    return res;   
  }

  /**
   * called when creating a subdraft from the drawing on the screen. Computes the resulting value based on
   * all intersections with the drawing
   * @param ndx the i,j location of the cell we are checking
   * @param ink the currently selected ink
   * @param over the Cell we are checking against
   * @returns true/false or null
   */
  private getScratchpadProduct(ndx: Interlacement, ink: string, over: Cell): boolean{
    
    switch(ink){
      case &#x27;neq&#x27;:
      case &#x27;and&#x27;:
      case &#x27;or&#x27;:

        const p &#x3D; {x: ndx.j * this.scale, y: ndx.i * this.scale};
        const isect &#x3D; this.getIntersectingSubdraftsForPoint(p);
  
        if(isect.length &gt; 0){
          const prev: boolean &#x3D; isect[0].resolveToValue(p);
          return this.computeCellValue(ink, over, prev);
        }else{
          return this.computeCellValue(ink, over, null);
        }
      break;

      default: 
        return this.computeCellValue(ink, over, null);
      break;
    }
   return null; 
  }
  /**
   * takes two booleans and returns their result based on the ink assigned
   * @param ink the name of the ink in question 
   * @param a the first (top) value 
   * @param b the second (under) value
   * @returns boolean result
   */
  public computeFilter(ink: string, a: boolean, b: boolean):boolean{
    switch(ink){
      case &#x27;neq&#x27;:
        if(a &#x3D;&#x3D;&#x3D; null) return b;
        if(b &#x3D;&#x3D;&#x3D; null) return a;
        return (a !&#x3D;&#x3D; b);
      break;

      case &#x27;up&#x27;:
        if(a &#x3D;&#x3D;&#x3D; null) return b;
        if(a &#x3D;&#x3D;&#x3D; true) return true;
        return false;
      break;

      case &#x27;down&#x27;:
        if(a &#x3D;&#x3D;&#x3D; null) return b;
        if(b &#x3D;&#x3D;&#x3D; null) return a;
        if(a &#x3D;&#x3D;&#x3D; false) return false;
        return b;
      break;

      case &#x27;unset&#x27;:
        if(a &#x3D;&#x3D;&#x3D; null) return b;
        if(b &#x3D;&#x3D;&#x3D; null) return a;
        if(a &#x3D;&#x3D;&#x3D; true) return null;
        else return b;
      break;

      case &#x27;and&#x27;:
      if(a &#x3D;&#x3D;&#x3D; null || b &#x3D;&#x3D;&#x3D; null) return null;
      return (a &amp;&amp; b)
      break;

      case &#x27;or&#x27;:
        if(a &#x3D;&#x3D;&#x3D; null) return b;
        if(b &#x3D;&#x3D;&#x3D; null) return a;
        return (a || b);
      break;

    }
  }

  /**
   * draw the cell at position ndx
   * @param ndx (i,j)
   */
  private drawCell(ndx: Interlacement){

    const c: Cell &#x3D; this.scratch_pad[ndx.i][ndx.j];
    this.cx.fillStyle &#x3D; &quot;#cccccc&quot;;
  
    const selected_ink:string &#x3D; this.inks.getSelected();

    switch(selected_ink){
      case &#x27;neq&#x27;:
      case &#x27;and&#x27;:
      case &#x27;or&#x27;:

        const p &#x3D; {x: ndx.j * this.scale, y: ndx.i * this.scale};
        const isect &#x3D; this.getIntersectingSubdraftsForPoint(p);

        if(isect.length &gt; 0){
          const prev: boolean &#x3D; isect[0].resolveToValue(p);
          this.cx.fillStyle &#x3D; this.computeCellColor(selected_ink, c, prev);
        }else{
          this.cx.fillStyle &#x3D;  this.computeCellColor(selected_ink, c, null);;
        }
      break;

      default: 
        this.cx.fillStyle &#x3D; this.computeCellColor(selected_ink, c, null);
      break;

    }

      this.cx.fillRect(ndx.j*this.scale, ndx.i*this.scale, this.scale, this.scale);      
  }

  /**
   * Deletes the subdraft that called this function.
   */
    onDeleteSubdraftCalled(obj: any){
      console.log(&quot;deleting &quot;+obj.id);
      if(obj &#x3D;&#x3D;&#x3D; null) return;
      const sd &#x3D; this.subdraft_refs.find((sr) &#x3D;&gt; (obj.id.toString() &#x3D;&#x3D;&#x3D; sr.canvas.id.toString()));
      this.removeSubdraft(sd);
   }

  /**
   * A mouse event, originated in a subdraft, has been started
   * checkes the design mode and handles the event as required
   * @param obj contains the id of the moving subdraft
   */
  subdraftStarted(obj: any){

    if(obj &#x3D;&#x3D;&#x3D; null) return;

    if(this.design_modes.isSelected(&quot;move&quot;)){
  
      //get the reference to the draft that&#x27;s moving
      const moving &#x3D; this.getSubdraft(obj.id);
      if(moving &#x3D;&#x3D;&#x3D; null) return; 
      this._snackBar.openFromComponent(SnackbarComponent, {
        data: moving
      });
      const isect:Array&lt;SubdraftComponent&gt; &#x3D; this.getIntersectingSubdrafts(moving);

      if(isect.length &#x3D;&#x3D; 0) return;
      
      const bounds: any &#x3D; this.getCombinedBounds(moving, isect);
      const temp: Draft &#x3D; this.getCombinedDraft(bounds, moving, isect);
      this.createAndSetPreview(temp);
      this.preview.drawDraft();
      this.preview.setComponentPosition(bounds.topleft);
     
    }else if(this.design_modes.isSelected(&quot;select&quot;)){
      this.selectionStarted();
    }else if(this.design_modes.isSelected(&quot;draw&quot;)){
      this.drawStarted();
    }

 }


 selectionStarted(){

  this.selection.start &#x3D; this.last;
  this.selection.active &#x3D; true;
  this._snackBar.openFromComponent(SnackbarComponent, {
    data: this.selection
  });
 }


/**
 * clears the scratchpad for the new drawing event
 */
drawStarted(){

  this.canvas_zndx &#x3D; this.layers.createLayer(); //bring this canvas forward
  this.scratch_pad &#x3D; [];
  for(let i &#x3D; 0; i &lt; this.canvas.height; i+&#x3D;this.scale ){
      const row &#x3D; [];
      for(let j &#x3D; 0; j&lt; this.canvas.width; j+&#x3D;this.scale ){
          row.push(new Cell(null));
      }
    this.scratch_pad.push(row);
    }
  }


  /**
   * gets the bounds of a drawing on the scratchpad, a drawing is represented by set cells
   * @returns an object representing the bounds in the format of i, j (the row, column index of the pad)
   */
  getScratchPadBounds(): Array&lt;Interlacement&gt;{
    let bottom: number &#x3D; 0;
    let right: number &#x3D; 0;
    let top: number &#x3D; this.scratch_pad.length-1;
    let left: number &#x3D; this.scratch_pad[0].length-1;

    for(let i &#x3D; 0; i &lt; this.scratch_pad.length; i++ ){
      for(let j &#x3D; 0; j&lt;  this.scratch_pad[0].length; j++){
        if((this.scratch_pad[i][j].isSet())){
          if(i &lt; top) top &#x3D; i;
          if(j &lt; left) left &#x3D; j;
          if(i &gt; bottom) bottom &#x3D; i;
          if(j &gt; right) right &#x3D; j;
        } 
      }
    }

    return [{i: top, j: left, si: -1}, {i: bottom, j: right, si: -1}];

  }

  /**
   * handles checks and actions to take when drawing event ends
   * gets the boudary of drawn segment and creates a subdraft containing that drawing
   * if the drawing sits on top of an existing subdraft, merge the drawing into that subdraft (extending the original if neccessary)
   * @returns 
   */
  processDrawingEnd(){

    this.canvas_zndx &#x3D; -1;

    if(this.scratch_pad &#x3D;&#x3D;&#x3D; undefined) return;
    if(this.scratch_pad[0] &#x3D;&#x3D;&#x3D; undefined) return;
    
    const corners: Array&lt;Interlacement&gt; &#x3D; this.getScratchPadBounds();

    const warps &#x3D; corners[1].j - corners[0].j + 1;
    const wefts &#x3D; corners[1].i - corners[0].i + 1;

  
    //there must be at least one cell selected
    if(warps &lt; 1 || wefts &lt; 1){
      this.scratch_pad &#x3D; undefined;
      return;
    } 

    //if this drawing does not intersect with any existing subdrafts, 
    const sd:SubdraftComponent &#x3D; this.createSubDraft(new Draft({wefts: wefts,  warps: warps}));
    const pos &#x3D; {
      topleft: {x: corners[0].j * this.scale, y: corners[0].i * this.scale},
      width: warps * this.scale,
      height: wefts * this.scale
    }

    sd.setComponentPosition(pos.topleft);
    sd.setComponentSize(pos.width, pos.height);
    sd.disableDrag();


    for(let i &#x3D; 0; i &lt; sd.draft.wefts; i++ ){
      for(let j &#x3D; 0; j&lt; sd.draft.warps; j++){
        const c &#x3D; this.scratch_pad[corners[0].i+i][corners[0].j+j];
        const b &#x3D; this.getScratchpadProduct({i:i, j:j, si:-1}, this.inks.getSelected(),c);
        sd.draft.pattern[i][j].setHeddle(b); 
      }
    }

    // const had_merge &#x3D; this.mergeSubdrafts(sd);
    // console.log(&quot;had a merge?&quot;, had_merge);

  }


 /**
  * handles actions to take when the mouse is down inside of the palette
  * @param event the mousedown event
  */
  @HostListener(&#x27;mousedown&#x27;, [&#x27;$event&#x27;])
    private onStart(event) {

      const ndx:any &#x3D; this.resolveCoordsToNdx({x: this.viewport.topleft.x + event.clientX, y:this.viewport.topleft.y+event.clientY});
      this.last &#x3D; ndx;
      this.selection.start &#x3D; this.last;
      this.removeSubscription();    
      
      this.moveSubscription &#x3D; 
      fromEvent(event.target, &#x27;mousemove&#x27;).subscribe(e &#x3D;&gt; this.onMove(e)); 

      if(this.design_modes.isSelected(&quot;select&quot;)){
          this.selectionStarted();
      }else if(this.design_modes.isSelected(&quot;draw&quot;)){
          this.drawStarted();    
          this.setCell(ndx);
          this.drawCell(ndx); 
        
      }
  }


  /**
   * called form the subscription created on start, checks the index of the location and returns null if its the same
   * @param event the event object
   */
  onMove(event){

    const ndx:Interlacement &#x3D; this.resolveCoordsToNdx({x: this.viewport.topleft.x + event.clientX, y:this.viewport.topleft.y+event.clientY});

    if(this.isSameNdx(this.last, ndx)) return;

    if(this.design_modes.isSelected(&quot;select&quot;)){

     this.drawSelection(ndx);
     const bounds &#x3D; this.getSelectionBounds(this.selection.start,  this.last);    
     this.selection.setPositionAndSize(bounds);
    
    }else if(this.design_modes.isSelected(&quot;draw&quot;)){
      this.setCell(ndx);
      this.drawCell(ndx);
    }
    
    this.last &#x3D; ndx;
  }

  

/**
 * Called when the mouse is up or leaves the boundary of the view
 * @param event 
 * @returns 
 */
  @HostListener(&#x27;mouseleave&#x27;, [&#x27;$event&#x27;])
  @HostListener(&#x27;mouseup&#x27;, [&#x27;$event&#x27;])
     private onEnd(event) {
      //if this.last is null, we have a mouseleave with no mousestart
      if(this.last &#x3D;&#x3D;&#x3D; undefined) return;

      this.removeSubscription();   
      this.cx.clearRect(0, 0, this.canvas.width, this.canvas.height);

      if(this.design_modes.isSelected(&quot;select&quot;)){
        if(this.selection.active)this.processSelection();
        this.changeDesignmode(&#x27;move&#x27;);
      }else if(this.design_modes.isSelected(&quot;draw&quot;)){
        this.processDrawingEnd();
        this.changeDesignmode(&#x27;move&#x27;);

      } 

      //unset vars that would have been created on press
      this.scratch_pad &#x3D; undefined;
      this.last &#x3D; undefined;
      this.selection.active &#x3D; false;
  }
  
 
  /**
   * Called when a selection operation ends. Checks to see if this selection intersects with any subdrafts and 
   * merges and or splits as required. 
   */
  processSelection(){

    this.closeSnackBar();

    //create the selection as subdraft
    const bounds:Bounds &#x3D; this.getSelectionBounds(this.selection.start,  this.last);    
    
    const sc:SubdraftComponent &#x3D; this.createSubDraft(new Draft({wefts: bounds.height/this.scale, warps: bounds.width/this.scale}));
    sc.setComponentBounds(bounds);
    sc.disableDrag();
    
    //get any subdrafts that intersect the one we just made
    const isect:Array&lt;SubdraftComponent&gt; &#x3D; this.getIntersectingSubdrafts(sc);

    if(isect.length &#x3D;&#x3D; 0) return;

    //get a draft that reflects only the poitns in the selection view
    const new_draft: Draft &#x3D; this.getCombinedDraft(bounds, sc, isect);
    sc.setNewDraft(new_draft);
    sc.drawDraft();

    isect.forEach(el &#x3D;&gt; {
      const ibound &#x3D; this.getIntersectionBounds(sc, el);

      if(el.isSameBoundsAs(ibound)){
         console.log(&quot;Component had same Bounds as Intersection, Consumed&quot;);
         this.removeSubdraft(el);
      }else{
         const sd_draft &#x3D; el.draft.pattern;
         for(let i &#x3D; 0; i &lt; sd_draft.length; i++){
           for(let j &#x3D; 0; j &lt; sd_draft[i].length; j++){
           
              let p:Point &#x3D; el.resolveNdxToPoint({i: i, j: j, si: -1});
              p.x +&#x3D; this.scale/2;
              p.y +&#x3D; this.scale/2;
              if(sc.hasPoint(p)) sd_draft[i][j].unsetHeddle();
           }
         }
         
        el.drawDraft();
        }
    });
  }






  subdraftMoved(obj: any){
      if(obj &#x3D;&#x3D;&#x3D; null) return;
  
      //get the reference to the draft that&#x27;s moving
      const moving &#x3D; this.getSubdraft(obj.id);
      if(moving &#x3D;&#x3D;&#x3D; null) return; 

      const isect:Array&lt;SubdraftComponent&gt; &#x3D; this.getIntersectingSubdrafts(moving);
      
      if(isect.length &#x3D;&#x3D; 0){
        if(this.hasPreview()) this.removePreview();
        return;
      } 

      //const bounds: Bounds &#x3D; this.getIntersectionBounds(moving, isect[0]);
      const bounds: Bounds &#x3D; this.getCombinedBounds(moving, isect);
      const temp: Draft &#x3D; this.getCombinedDraft(bounds, moving, isect);
      if(this.hasPreview()) this.preview.setNewDraft(temp);
      else this.createAndSetPreview(temp);
      
      this.preview.setComponentPosition(bounds.topleft);
      this.preview.drawDraft();
    }


   /**
    * checks if this subdraft has been dropped onto of another and merges them accordingly 
    * @param obj 
    * @returns 
    */
  subdraftDropped(obj: any){

    this.closeSnackBar();

     if(obj &#x3D;&#x3D;&#x3D; null) return;
  
      //creaet a subdraft of this intersection
      if(this.hasPreview()){
        const sd: SubdraftComponent &#x3D; this.createSubDraft(new Draft({wefts: this.preview.draft.wefts, warps: this.preview.draft.warps}));
        const to_right: Point &#x3D; this.preview.getTopleft();
        to_right.x +&#x3D; this.preview.bounds.width + 20;
        sd.draft.pattern &#x3D; cloneDeep(this.preview.draft.pattern);
        sd.setComponentPosition(to_right);
        sd.setComponentSize(this.preview.bounds.width, this.preview.bounds.height);
        sd.setAsPreview(); //this is a hack - get better way of brining tot fronott
        this.removePreview();
      } 
      
      //get the reference to the draft that&#x27;s moving
      const moving &#x3D; this.getSubdraft(obj.id);
      if(moving &#x3D;&#x3D;&#x3D; null) return; 

      //disable this too see what happens
      // const had_merge &#x3D; this.mergeSubdrafts(moving);
      // console.log(&quot;had merge&quot;, had_merge);
      // if(!had_merge) 
      // moving.drawDraft();

  }

  /**
   * merges a collection of subdraft components into the primary component, deletes the merged components
   * @param primary the draft to merge into
   * @returns true or false to describe if a merge took place. 
   */
  mergeSubdrafts(primary: SubdraftComponent): boolean{
    
    const isect:Array&lt;SubdraftComponent&gt; &#x3D; this.getIntersectingSubdrafts(primary);

      if(isect.length &#x3D;&#x3D; 0){
        return false;
      }   

      const bounds: Bounds &#x3D; this.getCombinedBounds(primary, isect);
      const temp: Draft &#x3D; this.getCombinedDraft(bounds, primary, isect);

      primary.setNewDraft(temp);
      primary.setComponentPosition(bounds.topleft);
      primary.drawDraft();

    //remove the intersecting drafts from the view containier and from subrefts
    isect.forEach(element &#x3D;&gt; {
      this.removeSubdraft(element);
    });
    return true;
  }

  computeHeddleValue(p:Point, main: SubdraftComponent, isect: Array&lt;SubdraftComponent&gt;):boolean{
    const a:boolean &#x3D; main.resolveToValue(p);
    //this may return an empty array, because the intersection might not have the point
    const b_array:Array&lt;SubdraftComponent&gt; &#x3D; isect.filter(el &#x3D;&gt; el.hasPoint(p));

    //should never have more than one value in barray
    // if(b_array.length &gt; 1) console.log(&quot;WARNING: Intersecting with Two Elements&quot;);

    const val:boolean &#x3D; b_array.reduce((acc:boolean, arr) &#x3D;&gt; arr.resolveToValue(p), null);   
    
    return this.computeFilter(main.ink, a, val);
  }

/**
 * check if the rectangles defined by the points overlap
 * @param l1 top left point of rectangle 1
 * @param r1 bottom right point of rectangle 1
 * @param l2 top left point of rectangle 2
 * @param r2 bottom right point of rectanble 2
 * @returns true or false in accordance to whether or not they overlap
 */
  doOverlap(l1:Point,  r1:Point,  l2:Point,  r2:Point){

    if (l1.x &#x3D;&#x3D; r1.x || l1.y &#x3D;&#x3D; r2.y || l2.x &#x3D;&#x3D; r2.x
        || l2.y &#x3D;&#x3D; r2.y) {
        // the line cannot have positive overlap
        return false;
    }
 
    // If one rectangle is on left side of other
    if (l1.x &gt;&#x3D; r2.x || l2.x &gt;&#x3D; r1.x){
        return false;
      }
 
    // If one rectangle is above other
    if (l1.y &gt;&#x3D; r2.y || l2.y &gt;&#x3D; r1.y){
        return false;
    }
    return true;
  }



  getLeftMost(main:SubdraftComponent,  isects:Array&lt;SubdraftComponent&gt;):SubdraftComponent{

    return isects.reduce((acc, isect) &#x3D;&gt; {
      if(isect.getTopleft().x &lt; acc.getTopleft().x) {
        acc &#x3D; isect;
      }
      return acc;
    }, main);    
  }



  getTopMost(main:SubdraftComponent,  isects:Array&lt;SubdraftComponent&gt;):SubdraftComponent{

    return isects.reduce((acc, isect) &#x3D;&gt; {
      if(isect.getTopleft().y &lt; acc.getTopleft().y) {
        acc &#x3D; isect;
      }
      return acc;
    }, main);    
  }



  getRightMost(main:SubdraftComponent,  isects:Array&lt;SubdraftComponent&gt;):SubdraftComponent{

    return isects.reduce((acc, isect) &#x3D;&gt; {
      if((isect.getTopleft().x + isect.bounds.width) &gt; (acc.getTopleft().x + acc.bounds.width)) {
        acc &#x3D; isect;
      }
      return acc;
    }, main);    
  }

  getBottomMost(main:SubdraftComponent,  isects:Array&lt;SubdraftComponent&gt;):SubdraftComponent{

    return isects.reduce((acc, isect) &#x3D;&gt; {
      if((isect.getTopleft().y + isect.bounds.height)&gt; (acc.getTopleft().y + acc.bounds.height)) {
        acc &#x3D; isect;
      }
      return acc;
    }, main);    
  }


  /**
   * returns the subdraft component associated with this id
   * @param id the unique draft id contined in the subdraft
   * @returns the subdraft Component
   */
  getSubdraft(id:number): SubdraftComponent {
    return  this.subdraft_refs.find(sr &#x3D;&gt; (sr.draft.id.toString() &#x3D;&#x3D;&#x3D; id.toString()));
  }


  getSubdraftsIntersectingSelection(selection: SelectionComponent){

    //find intersections between main and the others
    const isect:Array&lt;SubdraftComponent&gt; &#x3D; this.subdraft_refs.filter(sr &#x3D;&gt; (this.doOverlap(
      selection.bounds.topleft, 
      {x:  selection.bounds.topleft.x + selection.bounds.width, y: selection.bounds.topleft.y + selection.bounds.height}, 
      sr.getTopleft(), 
      {x: sr.getTopleft().x + sr.bounds.width, y: sr.getTopleft().y + sr.bounds.height}
      ) ? sr : null));

    return isect;
  
  }


 /**
   * get any subdrafts that intersect a given screen position
   * @param p the x, y position of this cell 
   * @returns 
   */
  getIntersectingSubdraftsForPoint(p: any){


    const primary_topleft &#x3D; {x:  p.x, y: p.y };
    const primary_bottomright &#x3D; {x:  p.x + this.scale, y: p.y + this.scale};

    const isect:Array&lt;SubdraftComponent&gt; &#x3D; [];
     this.subdraft_refs.forEach(sr &#x3D;&gt; {
      let sr_bottomright &#x3D; {x: sr.getTopleft().x + sr.bounds.width, y: sr.getTopleft().y + sr.bounds.height};
      const b: boolean &#x3D; this.doOverlap(primary_topleft, primary_bottomright, sr.getTopleft(), sr_bottomright);
      if(b) isect.push(sr);
     });

    return isect;
  }

  /**
   * get any subdrafts that intersect primary based on checks on their boundaries
   * @param primary 
   * @returns 
   */
  getIntersectingSubdrafts(primary: SubdraftComponent){

    const to_check:Array&lt;SubdraftComponent&gt; &#x3D;  this.subdraft_refs.filter(sr &#x3D;&gt; (sr.draft.id.toString() !&#x3D;&#x3D; primary.draft.id.toString()));
    const primary_bottomright &#x3D; {x:  primary.getTopleft().x + primary.bounds.width, y: primary.getTopleft().y + primary.bounds.height};


     const isect:Array&lt;SubdraftComponent&gt; &#x3D; [];
     to_check.forEach(sr &#x3D;&gt; {
      let sr_bottomright &#x3D; {x: sr.getTopleft().x + sr.bounds.width, y: sr.getTopleft().y + sr.bounds.height};
      const b: boolean &#x3D; this.doOverlap(primary.getTopleft(), primary_bottomright, sr.getTopleft(), sr_bottomright);
      if(b) isect.push(sr);
     });

    return isect;
  }

  getSelectionBounds(c1: any, c2: any): Bounds{
      let bottomright &#x3D; {x: 0, y:0};
      let bounds:Bounds &#x3D; {
        topleft:{x: 0, y:0},
        width: 0,
        height: 0
      }
      if(c1.i &lt; c2.i){
        bounds.topleft.y &#x3D; c1.i * this.scale;
        bottomright.y &#x3D; c2.i * this.scale;
      }else{
        bounds.topleft.y &#x3D; c2.i * this.scale;
        bottomright.y &#x3D; c1.i * this.scale;
      }

      if(c1.j &lt; c2.j){
        bounds.topleft.x &#x3D; c1.j * this.scale;
        bottomright.x &#x3D; c2.j * this.scale;
      }else{
        bounds.topleft.x &#x3D; c1.j * this.scale;
        bottomright.x &#x3D; c2.j * this.scale;
      }

      bounds.width &#x3D; bottomright.x - bounds.topleft.x;
      bounds.height &#x3D; bottomright.y - bounds.topleft.y;

      return bounds;
  }

  /**
   * returns a Bounds type that represents the intersection between primary and one intersecting subdraft
   * @param primary the rectangular area we are checking for intersections
   * @param isect an array of all the components that intersect
   * @returns the array of bounds of all intersections
   */
  getIntersectionBounds(primary: SubdraftComponent, isect: SubdraftComponent):Bounds{

    const left: number &#x3D; Math.max(primary.bounds.topleft.x, isect.bounds.topleft.x);
    const top: number &#x3D; Math.max(primary.bounds.topleft.y, isect.bounds.topleft.y);
    const right: number &#x3D; Math.min((primary.bounds.topleft.x + primary.bounds.width), (isect.bounds.topleft.x + isect.bounds.width));
    const bottom: number &#x3D; Math.min((primary.bounds.topleft.y + primary.bounds.height), (isect.bounds.topleft.y + isect.bounds.height));

    return {
      topleft: {x: left, y: top},
      width: right - left,
      height: bottom - top
    };

  }

  /**
   * gets the combined boundary of a Subdraft and any of its intersections
   * @param moving A SubdraftComponent that is our primary subdraft
   * @param isect  Any subdrafts that intersect with this component 
   * @returns the bounds of a rectangle that holds both components
   */
  getCombinedBounds(moving: SubdraftComponent, isect: Array&lt;SubdraftComponent&gt;):Bounds{
    
    const bounds: Bounds &#x3D; {
      topleft: {x: 0, y:0},
      width: 0,
      height: 0
    }

    bounds.topleft.x &#x3D; this.getLeftMost(moving, isect).getTopleft().x;
    bounds.topleft.y &#x3D; this.getTopMost(moving, isect).getTopleft().y;

    const rm &#x3D;  this.getRightMost(moving, isect);
    const bm &#x3D;  this.getBottomMost(moving, isect);

    bounds.width &#x3D; (rm.getTopleft().x + rm.bounds.width) - bounds.topleft.x;
    bounds.height &#x3D;(bm.getTopleft().y + bm.bounds.height) - bounds.topleft.y;

    return bounds;

  }

  /**
   * creates a draft in size bounds that contains all of the computed points of its intersections
   * @param bounds the boundary of all the intersections
   * @param primary the primary draft that we are checking for intersections
   * @param isect an Array of the intersecting components
   * @returns 
   */
  getCombinedDraft(bounds: Bounds, primary: SubdraftComponent, isect: Array&lt;SubdraftComponent&gt;):Draft{

    const temp: Draft &#x3D; new Draft({id: primary.draft.id, name: primary.draft.name, warps: Math.floor(bounds.width / primary.scale), wefts: Math.floor(bounds.height / primary.scale)});

    for(var i &#x3D; 0; i &lt; temp.wefts; i++){
      const top: number &#x3D; bounds.topleft.y + (i * primary.scale);
      for(var j &#x3D; 0; j &lt; temp.warps; j++){
        const left: number &#x3D; bounds.topleft.x + (j * primary.scale);

        const p &#x3D; {x: left, y: top};
        const val &#x3D; this.computeHeddleValue(p, primary, isect);
        if(val !&#x3D; null) temp.pattern[i][j].setHeddle(val);
        else temp.pattern[i][j].unsetHeddle();
      }
    }
    return temp;
  }

}</code></pre>
        </div>
    </div>










                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
           </div>
       </div>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/search/search.js"></script>
       <script src="../js/search/lunr.min.js"></script>
       <script src="../js/search/search-lunr.js"></script>

       <script src="../js/menu.js"></script>
       <script src="../js/libs/highlight.pack.js"></script>
       <script src="../js/libs/highlightjs-line-numbers.min.js"></script>
       <script src="../js/search/search_index.js"></script>
       <script>
            document.addEventListener('DOMContentLoaded', function() {
                hljs.initHighlightingOnLoad();
                hljs.initLineNumbersOnLoad();
            });
       </script>

    </body>
</html>
