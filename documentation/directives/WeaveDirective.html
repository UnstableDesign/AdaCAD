<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>adacad-weaver documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	      <link rel="stylesheet" href="../styles/style.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="../" class="navbar-brand">adacad-weaver documentation</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content directive">
                   <div class="content-data">






<ol class="breadcrumb">
  <li>Directives</li>
  <li>WeaveDirective</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="active">
            <a href="#info" role="tab" id="info-tab" data-toggle="tab" data-link="info">Info</a>
        </li>
        <li >
            <a href="#source" role="tab" id="source-tab" data-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="c-info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/app/core/directives/weave.directive.ts</code>
        </p>

            <p class="comment">
                <h3>Description</h3>
            </p>
            <p class="comment">
                <p>WeaveDirective handles the events and manipulation of the weave draft.</p>

            </p>


            <p class="comment">
                <h3>Example</h3>
            </p>
            <div class="io-description">
            </div>

        <section>
            <h3>Metadata</h3>
            <table class="table table-sm table-hover">
                <tbody>

                    <tr>
                        <td class="col-md-3">Selector</td>
                        <td class="col-md-9"><code>[weave]</code></td>
                    </tr>

                </tbody>
            </table>
        </section>

            <section>
    <h3 id="index">Index</h3>
    <table class="table table-sm table-bordered index-table">
        <tbody>
                <tr>
                    <td class="col-md-4">
                        <h6><b>Properties</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                <a href="#canvasEl">canvasEl</a>
                            </li>
                            <li>
                                <a href="#cx">cx</a>
                            </li>
                            <li>
                                <a href="#cxThreading">cxThreading</a>
                            </li>
                            <li>
                                <a href="#cxTieups">cxTieups</a>
                            </li>
                            <li>
                                <a href="#cxTreadling">cxTreadling</a>
                            </li>
                            <li>
                                <a href="#cxWarpMaterials">cxWarpMaterials</a>
                            </li>
                            <li>
                                <a href="#cxWarpSystems">cxWarpSystems</a>
                            </li>
                            <li>
                                <a href="#cxWeftMaterials">cxWeftMaterials</a>
                            </li>
                            <li>
                                <a href="#cxWeftSystems">cxWeftSystems</a>
                            </li>
                            <li>
                                <a href="#divViewFrames">divViewFrames</a>
                            </li>
                            <li>
                                <a href="#divWasy">divWasy</a>
                            </li>
                            <li>
                                <a href="#divWesy">divWesy</a>
                            </li>
                            <li>
                                <a href="#draftContainer">draftContainer</a>
                            </li>
                            <li>
                                <a href="#flag_history">flag_history</a>
                            </li>
                            <li>
                                <a href="#flag_recompute">flag_recompute</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#lastPos">lastPos</a>
                            </li>
                            <li>
                                <a href="#moveSubscription">moveSubscription</a>
                            </li>
                            <li>
                                <a href="#selection">selection</a>
                            </li>
                            <li>
                                <a href="#svgEl">svgEl</a>
                            </li>
                            <li>
                                <a href="#svgSelectCol">svgSelectCol</a>
                            </li>
                            <li>
                                <a href="#svgSelectRow">svgSelectRow</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#tempPattern">tempPattern</a>
                            </li>
                            <li>
                                <a href="#threadingCanvas">threadingCanvas</a>
                            </li>
                            <li>
                                <a href="#tieupsCanvas">tieupsCanvas</a>
                            </li>
                            <li>
                                <a href="#treadlingCanvas">treadlingCanvas</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#unsubscribe$">unsubscribe$</a>
                            </li>
                            <li>
                                <a href="#warpMaterialsCanvas">warpMaterialsCanvas</a>
                            </li>
                            <li>
                                <a href="#warpSystemsCanvas">warpSystemsCanvas</a>
                            </li>
                            <li>
                                <a href="#weftMaterialsCanvas">weftMaterialsCanvas</a>
                            </li>
                            <li>
                                <a href="#weftSystemsCanvas">weftSystemsCanvas</a>
                            </li>
                        </ul>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <h6><b>Methods</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                <a href="#clearSelection">clearSelection</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#copyArea">copyArea</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#drawBlank">drawBlank</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#drawCell">drawCell</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#drawDrawdown">drawDrawdown</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#drawGrid">drawGrid</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#drawLoomStates">drawLoomStates</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#drawOnDrawdown">drawOnDrawdown</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#drawOnMask">drawOnMask</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#drawOnThreading">drawOnThreading</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#drawOnTieups">drawOnTieups</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#drawOnTreadling">drawOnTreadling</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#drawOnWarpMaterials">drawOnWarpMaterials</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#drawOnWarpSelectors">drawOnWarpSelectors</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#drawOnWeftMaterials">drawOnWeftMaterials</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#drawOnWeftSelectors">drawOnWeftSelectors</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#drawWarpMaterialCell">drawWarpMaterialCell</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#drawWarpMaterials">drawWarpMaterials</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#drawWarps">drawWarps</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#drawWarpSelectorCell">drawWarpSelectorCell</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#drawWarpsOver">drawWarpsOver</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#drawWarpSystems">drawWarpSystems</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#drawWeftBottomLeft">drawWeftBottomLeft</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#drawWeftBottomRight">drawWeftBottomRight</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#drawWeftEnd">drawWeftEnd</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#drawWeftLeftUp">drawWeftLeftUp</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#drawWeftMaterialCell">drawWeftMaterialCell</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#drawWeftMaterials">drawWeftMaterials</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#drawWeftOver">drawWeftOver</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#drawWeftRightUp">drawWeftRightUp</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#drawWeftSelectorCell">drawWeftSelectorCell</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#drawWeftStart">drawWeftStart</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#drawWeftSystems">drawWeftSystems</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#drawWeftUnder">drawWeftUnder</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#drawWeftUp">drawWeftUp</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#isSame">isSame</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#maskArea">maskArea</a>
                            </li>
                            <li>
                                <a href="#ngOnDestroy">ngOnDestroy</a>
                            </li>
                            <li>
                                <a href="#ngOnInit">ngOnInit</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#onMove">onMove</a>
                            </li>
                            <li>
                                <a href="#onNewDraftLoaded">onNewDraftLoaded</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#onUndoRedo">onUndoRedo</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#printPattern">printPattern</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#recomputeLoom">recomputeLoom</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#redraw">redraw</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#redrawCol">redrawCol</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#redrawDraft">redrawDraft</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#redrawLoom">redrawLoom</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#redrawRow">redrawRow</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#redrawVisualView">redrawVisualView</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#redrawYarnView">redrawYarnView</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#removeSubscription">removeSubscription</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#rescale">rescale</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#saveADA">saveADA</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#saveBMP">saveBMP</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#savePNG">savePNG</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#savePrintableDraft">savePrintableDraft</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#saveWIF">saveWIF</a>
                            </li>
                            <li>
                                <a href="#setPosAndDraw">setPosAndDraw</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#unsetSelection">unsetSelection</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#updateLoomFromDraft">updateLoomFromDraft</a>
                            </li>
                        </ul>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <h6><b>Inputs</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                <a href="#copy">copy</a>
                            </li>
                            <li>
                                <a href="#design_mode">design_mode</a>
                            </li>
                            <li>
                                <a href="#draft">draft</a>
                            </li>
                            <li>
                                <a href="#render">render</a>
                            </li>
                            <li>
                                <a href="#timeline">timeline</a>
                            </li>
                        </ul>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <h6><b>Outputs</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                <a href="#onNewSelection">onNewSelection</a>
                            </li>
                        </ul>
                    </td>
                </tr>


                <tr>
                    <td class="col-md-4">
                        <h6><b>HostListeners</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                <a href="#mousedown">mousedown</a>
                            </li>
                            <li>
                                <a href="#mouseleave">mouseleave</a>
                            </li>
                        </ul>
                    </td>
                </tr>

        </tbody>
    </table>
</section>

            <section>
    <h3 id="constructor">Constructor</h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
<code>constructor(el: <a href="https://angular.io/api/core/ElementRef" target="_blank">ElementRef</a>)</code>
                    </td>
                </tr>
                        <tr>
                            <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="231" class="link-to-prism">src/app/core/directives/weave.directive.ts:231</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                            <div class="io-description"><p>Creates the element reference.</p>
</div>
                            <div>
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>el</td>
                                                  
                                                        <td>
                                                                        <code><a href="https://angular.io/api/core/ElementRef" target="_blank" >ElementRef</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                    </td>
                </tr>
            </tbody>
        </table>
</section>

            <section>
    <h3 id="inputs">Inputs</h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="copy"></a>
                        <b>copy</b>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>Array&lt;Array&lt;boolean&gt;&gt;</code>

                    </td>
                </tr>
                        <tr>
                            <td class="col-md-2" colspan="2">
                                    <div class="io-line">Defined in <a href="" data-line="68" class="link-to-prism">src/app/core/directives/weave.directive.ts:68</a></div>
                            </td>
                        </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="design_mode"></a>
                        <b>design_mode</b>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                    </td>
                </tr>
                        <tr>
                            <td class="col-md-2" colspan="2">
                                    <div class="io-line">Defined in <a href="" data-line="41" class="link-to-prism">src/app/core/directives/weave.directive.ts:41</a></div>
                            </td>
                        </tr>
                <tr>
                    <td class="col-md-4">
                        <div class="io-description"><p>Contains the name of the brush being used to manipulate the weave draft.
It is defined and inputed from the HTML declaration of the WeaveDirective.</p>
</div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="draft"></a>
                        <b>draft</b>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                    </td>
                </tr>
                        <tr>
                            <td class="col-md-2" colspan="2">
                                    <div class="io-line">Defined in <a href="" data-line="48" class="link-to-prism">src/app/core/directives/weave.directive.ts:48</a></div>
                            </td>
                        </tr>
                <tr>
                    <td class="col-md-4">
                        <div class="io-description"><p>The Draft object containing the pattern and shuttle information.
It is defined and inputed from the HTML declaration of the WeaveDirective.</p>
</div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="render"></a>
                        <b>render</b>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                    </td>
                </tr>
                        <tr>
                            <td class="col-md-2" colspan="2">
                                    <div class="io-line">Defined in <a href="" data-line="56" class="link-to-prism">src/app/core/directives/weave.directive.ts:56</a></div>
                            </td>
                        </tr>
                <tr>
                    <td class="col-md-4">
                        <div class="io-description"><p>The Render object containing the variables about zoom and cell sizes.
It is defined and inputed from the HTML declaration of the WeaveDirective.</p>
</div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="timeline"></a>
                        <b>timeline</b>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                    </td>
                </tr>
                        <tr>
                            <td class="col-md-2" colspan="2">
                                    <div class="io-line">Defined in <a href="" data-line="64" class="link-to-prism">src/app/core/directives/weave.directive.ts:64</a></div>
                            </td>
                        </tr>
                <tr>
                    <td class="col-md-4">
                        <div class="io-description"><p>The Timeline object containing state histories for undo and redo</p>
</div>
                    </td>
                </tr>
            </tbody>
        </table>
</section>
            <section>
    <h3 id="outputs">Outputs</h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="onNewSelection"></a>
                        <b>onNewSelection</b>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://angular.io/api/core/EventEmitter" target="_blank" >EventEmitter</a></code>

                    </td>
                </tr>
                        <tr>
                            <td class="col-md-2" colspan="2">
                                    <div class="io-line">Defined in <a href="" data-line="71" class="link-to-prism">src/app/core/directives/weave.directive.ts:71</a></div>
                            </td>
                        </tr>
            </tbody>
        </table>
</section>

            <section>
    <h3>HostListeners</h3>    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="mousedown"></a>
                    <span class="name">
                        <b>
                            mousedown
                        </b>
                        <a href="#mousedown"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <i>Arguments : </i><code>'$event' </code>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>mousedown(event)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="371"
                            class="link-to-prism">src/app/core/directives/weave.directive.ts:371</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Touch start event. Subscribes to the move event.</p>
</div>

                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="mouseleave"></a>
                    <span class="name">
                        <b>
                            mouseleave
                        </b>
                        <a href="#mouseleave"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <i>Arguments : </i><code>'$event' </code>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>mouseleave(event)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="616"
                            class="link-to-prism">src/app/core/directives/weave.directive.ts:616</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Event removes subscription when touch has ended.</p>
</div>

                </td>
            </tr>
        </tbody>
    </table>
</section>
            <section>
    
    <h3 id="methods">
        Methods
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="clearSelection"></a>
                    <span class="name">
                        <b>
                            clearSelection
                        </b>
                        <a href="#clearSelection"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>clearSelection()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="321"
                            class="link-to-prism">src/app/core/directives/weave.directive.ts:321</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="copyArea"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Private</span>
                            copyArea
                        </b>
                        <a href="#copyArea"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>copyArea()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="662"
                            class="link-to-prism">src/app/core/directives/weave.directive.ts:662</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Creates the copied pattern. Hack for warp and weft shuttles is that it creates a 2d arrray representing the 
threading or treadling with &quot;true&quot; in the frame/threadle associated with that col/row. </p>
</div>

                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="drawBlank"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Private</span>
                            drawBlank
                        </b>
                        <a href="#drawBlank"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>drawBlank(cx, canvas)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="920"
                            class="link-to-prism">src/app/core/directives/weave.directive.ts:920</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Draws the grid lines onto the canvas.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>cx</td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>canvas</td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="drawCell"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Private</span>
                            drawCell
                        </b>
                        <a href="#drawCell"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>drawCell(cx, i, j, type)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="1654"
                            class="link-to-prism">src/app/core/directives/weave.directive.ts:1654</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>cx</td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>i</td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>j</td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>type</td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="drawDrawdown"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Public</span>
                            drawDrawdown
                        </b>
                        <a href="#drawDrawdown"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>drawDrawdown()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="2419"
                            class="link-to-prism">src/app/core/directives/weave.directive.ts:2419</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="drawGrid"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Private</span>
                            drawGrid
                        </b>
                        <a href="#drawGrid"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>drawGrid(cx, canvas)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="932"
                            class="link-to-prism">src/app/core/directives/weave.directive.ts:932</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Draws the grid lines onto the canvas.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>cx</td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>canvas</td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="drawLoomStates"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Public</span>
                            drawLoomStates
                        </b>
                        <a href="#drawLoomStates"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>drawLoomStates(updates)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="2328"
                            class="link-to-prism">src/app/core/directives/weave.directive.ts:2328</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>updates</td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="drawOnDrawdown"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Private</span>
                            drawOnDrawdown
                        </b>
                        <a href="#drawOnDrawdown"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>drawOnDrawdown(currentPos: <a href="../classes/Point.html">Point</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="1197"
                            class="link-to-prism">src/app/core/directives/weave.directive.ts:1197</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Called when a single point &quot;draw&quot; event is called on the</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>currentPos</td>
                                    <td>
                                                <code><a href="../classes/Point.html" target="_self" >Point</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <ul>
<li>the current position of the mouse within draft.</li>
</ul>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="drawOnMask"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Private</span>
                            drawOnMask
                        </b>
                        <a href="#drawOnMask"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>drawOnMask(currentPos: <a href="../classes/Point.html">Point</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="1160"
                            class="link-to-prism">src/app/core/directives/weave.directive.ts:1160</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Draws, inverts, or erases a single rectangle on the mask. </p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>currentPos</td>
                                    <td>
                                                <code><a href="../classes/Point.html" target="_self" >Point</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <ul>
<li>the current position of the mouse within draft.</li>
</ul>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="drawOnThreading"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Private</span>
                            drawOnThreading
                        </b>
                        <a href="#drawOnThreading"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>drawOnThreading(currentPos: <a href="../classes/Point.html">Point</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="1290"
                            class="link-to-prism">src/app/core/directives/weave.directive.ts:1290</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Draws or erases a single rectangle on the canvas. Updates the threading.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>currentPos</td>
                                    <td>
                                                <code><a href="../classes/Point.html" target="_self" >Point</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <ul>
<li>the current position of the mouse within draft.</li>
</ul>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="drawOnTieups"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Private</span>
                            drawOnTieups
                        </b>
                        <a href="#drawOnTieups"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>drawOnTieups(currentPos: <a href="../classes/Point.html">Point</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="1254"
                            class="link-to-prism">src/app/core/directives/weave.directive.ts:1254</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Draws or erases a single rectangle on the canvas. Updates the tieups.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>currentPos</td>
                                    <td>
                                                <code><a href="../classes/Point.html" target="_self" >Point</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <ul>
<li>the current position of the mouse within draft.</li>
</ul>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="drawOnTreadling"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Private</span>
                            drawOnTreadling
                        </b>
                        <a href="#drawOnTreadling"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>drawOnTreadling(currentPos: <a href="../classes/Point.html">Point</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="1338"
                            class="link-to-prism">src/app/core/directives/weave.directive.ts:1338</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Draws or erases a single rectangle on the canvas. Updates the treadling.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>currentPos</td>
                                    <td>
                                                <code><a href="../classes/Point.html" target="_self" >Point</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <ul>
<li>the current position of the mouse within draft.</li>
</ul>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="drawOnWarpMaterials"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Private</span>
                            drawOnWarpMaterials
                        </b>
                        <a href="#drawOnWarpMaterials"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>drawOnWarpMaterials(currentPos: <a href="../classes/Point.html">Point</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="1129"
                            class="link-to-prism">src/app/core/directives/weave.directive.ts:1129</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Change column to next row in the list</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>currentPos</td>
                                    <td>
                                                <code><a href="../classes/Point.html" target="_self" >Point</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="drawOnWarpSelectors"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Private</span>
                            drawOnWarpSelectors
                        </b>
                        <a href="#drawOnWarpSelectors"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>drawOnWarpSelectors(currentPos: <a href="../classes/Point.html">Point</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="1101"
                            class="link-to-prism">src/app/core/directives/weave.directive.ts:1101</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Change column to next row in the list</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>currentPos</td>
                                    <td>
                                                <code><a href="../classes/Point.html" target="_self" >Point</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="drawOnWeftMaterials"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Private</span>
                            drawOnWeftMaterials
                        </b>
                        <a href="#drawOnWeftMaterials"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>drawOnWeftMaterials(currentPos: <a href="../classes/Point.html">Point</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="1071"
                            class="link-to-prism">src/app/core/directives/weave.directive.ts:1071</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Change shuttle of row to next in list.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>currentPos</td>
                                    <td>
                                                <code><a href="../classes/Point.html" target="_self" >Point</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="drawOnWeftSelectors"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Private</span>
                            drawOnWeftSelectors
                        </b>
                        <a href="#drawOnWeftSelectors"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>drawOnWeftSelectors(currentPos: <a href="../classes/Point.html">Point</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="1035"
                            class="link-to-prism">src/app/core/directives/weave.directive.ts:1035</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Change shuttle of row to next in list.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>currentPos</td>
                                    <td>
                                                <code><a href="../classes/Point.html" target="_self" >Point</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="drawWarpMaterialCell"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Private</span>
                            drawWarpMaterialCell
                        </b>
                        <a href="#drawWarpMaterialCell"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>drawWarpMaterialCell(cx, j)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="804"
                            class="link-to-prism">src/app/core/directives/weave.directive.ts:804</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>cx</td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>j</td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="drawWarpMaterials"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Private</span>
                            drawWarpMaterials
                        </b>
                        <a href="#drawWarpMaterials"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>drawWarpMaterials(cx, canvas)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="817"
                            class="link-to-prism">src/app/core/directives/weave.directive.ts:817</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>cx</td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>canvas</td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="drawWarps"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Public</span>
                            drawWarps
                        </b>
                        <a href="#drawWarps"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>drawWarps(cx)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="2523"
                            class="link-to-prism">src/app/core/directives/weave.directive.ts:2523</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>cx</td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="drawWarpSelectorCell"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Private</span>
                            drawWarpSelectorCell
                        </b>
                        <a href="#drawWarpSelectorCell"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>drawWarpSelectorCell(cx, j)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="878"
                            class="link-to-prism">src/app/core/directives/weave.directive.ts:878</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>cx</td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>j</td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="drawWarpsOver"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Public</span>
                            drawWarpsOver
                        </b>
                        <a href="#drawWarpsOver"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>drawWarpsOver()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="2262"
                            class="link-to-prism">src/app/core/directives/weave.directive.ts:2262</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="drawWarpSystems"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Private</span>
                            drawWarpSystems
                        </b>
                        <a href="#drawWarpSystems"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>drawWarpSystems(cx, canvas)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="896"
                            class="link-to-prism">src/app/core/directives/weave.directive.ts:896</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>cx</td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>canvas</td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="drawWeftBottomLeft"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Public</span>
                            drawWeftBottomLeft
                        </b>
                        <a href="#drawWeftBottomLeft"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>drawWeftBottomLeft(top, left, shuttle)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="1804"
                            class="link-to-prism">src/app/core/directives/weave.directive.ts:1804</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>top</td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>left</td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>shuttle</td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="drawWeftBottomRight"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Public</span>
                            drawWeftBottomRight
                        </b>
                        <a href="#drawWeftBottomRight"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>drawWeftBottomRight(top, left, shuttle)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="1830"
                            class="link-to-prism">src/app/core/directives/weave.directive.ts:1830</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>top</td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>left</td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>shuttle</td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="drawWeftEnd"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Public</span>
                            drawWeftEnd
                        </b>
                        <a href="#drawWeftEnd"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>drawWeftEnd(top, left, shuttle)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="1912"
                            class="link-to-prism">src/app/core/directives/weave.directive.ts:1912</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>top</td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>left</td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>shuttle</td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="drawWeftLeftUp"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Public</span>
                            drawWeftLeftUp
                        </b>
                        <a href="#drawWeftLeftUp"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>drawWeftLeftUp(top, left, shuttle)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="1753"
                            class="link-to-prism">src/app/core/directives/weave.directive.ts:1753</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>top</td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>left</td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>shuttle</td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="drawWeftMaterialCell"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Private</span>
                            drawWeftMaterialCell
                        </b>
                        <a href="#drawWeftMaterialCell"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>drawWeftMaterialCell(cx, i)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="770"
                            class="link-to-prism">src/app/core/directives/weave.directive.ts:770</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>cx</td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>i</td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="drawWeftMaterials"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Private</span>
                            drawWeftMaterials
                        </b>
                        <a href="#drawWeftMaterials"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>drawWeftMaterials(cx, canvas)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="782"
                            class="link-to-prism">src/app/core/directives/weave.directive.ts:782</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>cx</td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>canvas</td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="drawWeftOver"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Public</span>
                            drawWeftOver
                        </b>
                        <a href="#drawWeftOver"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>drawWeftOver(top, left, shuttle)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="1940"
                            class="link-to-prism">src/app/core/directives/weave.directive.ts:1940</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>top</td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>left</td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>shuttle</td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="drawWeftRightUp"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Public</span>
                            drawWeftRightUp
                        </b>
                        <a href="#drawWeftRightUp"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>drawWeftRightUp(top, left, shuttle)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="1778"
                            class="link-to-prism">src/app/core/directives/weave.directive.ts:1778</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>top</td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>left</td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>shuttle</td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="drawWeftSelectorCell"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Private</span>
                            drawWeftSelectorCell
                        </b>
                        <a href="#drawWeftSelectorCell"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>drawWeftSelectorCell(cx, i)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="838"
                            class="link-to-prism">src/app/core/directives/weave.directive.ts:838</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>cx</td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>i</td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="drawWeftStart"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Public</span>
                            drawWeftStart
                        </b>
                        <a href="#drawWeftStart"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>drawWeftStart(top, left, shuttle)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="1884"
                            class="link-to-prism">src/app/core/directives/weave.directive.ts:1884</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>top</td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>left</td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>shuttle</td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="drawWeftSystems"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Private</span>
                            drawWeftSystems
                        </b>
                        <a href="#drawWeftSystems"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>drawWeftSystems(cx, canvas)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="854"
                            class="link-to-prism">src/app/core/directives/weave.directive.ts:854</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>cx</td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>canvas</td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="drawWeftUnder"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Public</span>
                            drawWeftUnder
                        </b>
                        <a href="#drawWeftUnder"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>drawWeftUnder(top, left, shuttle)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="1968"
                            class="link-to-prism">src/app/core/directives/weave.directive.ts:1968</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>top</td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>left</td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>shuttle</td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="drawWeftUp"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Public</span>
                            drawWeftUp
                        </b>
                        <a href="#drawWeftUp"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>drawWeftUp(top, left, shuttle)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="1857"
                            class="link-to-prism">src/app/core/directives/weave.directive.ts:1857</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>top</td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>left</td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>shuttle</td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="isSame"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Private</span>
                            isSame
                        </b>
                        <a href="#isSame"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>isSame(p1: <a href="../classes/Point.html">Point</a>, p2: <a href="../classes/Point.html">Point</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="502"
                            class="link-to-prism">src/app/core/directives/weave.directive.ts:502</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>p1</td>
                                    <td>
                                                <code><a href="../classes/Point.html" target="_self" >Point</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>p2</td>
                                    <td>
                                                <code><a href="../classes/Point.html" target="_self" >Point</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="maskArea"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Private</span>
                            maskArea
                        </b>
                        <a href="#maskArea"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>maskArea(pattern: Array<Array<boolean>>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="1597"
                            class="link-to-prism">src/app/core/directives/weave.directive.ts:1597</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Fills in selected area of canvas. Updates the pattern within selection.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>pattern</td>
                                    <td>
                                            <code>Array&lt;Array&lt;boolean&gt;&gt;</code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="ngOnDestroy"></a>
                    <span class="name">
                        <b>
                            ngOnDestroy
                        </b>
                        <a href="#ngOnDestroy"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>ngOnDestroy()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="328"
                            class="link-to-prism">src/app/core/directives/weave.directive.ts:328</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="ngOnInit"></a>
                    <span class="name">
                        <b>
                            ngOnInit
                        </b>
                        <a href="#ngOnInit"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>ngOnInit()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="248"
                            class="link-to-prism">src/app/core/directives/weave.directive.ts:248</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="onMove"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Private</span>
                            onMove
                        </b>
                        <a href="#onMove"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>onMove(event)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="516"
                            class="link-to-prism">src/app/core/directives/weave.directive.ts:516</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Event called when mouse down and moved within the canvas.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>event</td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <ul>
<li>The mousemove event.</li>
</ul>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="onNewDraftLoaded"></a>
                    <span class="name">
                        <b>
                            onNewDraftLoaded
                        </b>
                        <a href="#onNewDraftLoaded"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>onNewDraftLoaded()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="290"
                            class="link-to-prism">src/app/core/directives/weave.directive.ts:290</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="onUndoRedo"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Public</span>
                            onUndoRedo
                        </b>
                        <a href="#onUndoRedo"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>onUndoRedo()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="2599"
                            class="link-to-prism">src/app/core/directives/weave.directive.ts:2599</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Resizes and then redraws the canvas on a change to the wefts or warps. </p>
</div>

                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="printPattern"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Public</span>
                            printPattern
                        </b>
                        <a href="#printPattern"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>printPattern(pattern)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="2609"
                            class="link-to-prism">src/app/core/directives/weave.directive.ts:2609</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Prints the pattern to the console.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>pattern</td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <ul>
<li>2D pattern array.</li>
</ul>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="recomputeLoom"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Public</span>
                            recomputeLoom
                        </b>
                        <a href="#recomputeLoom"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>recomputeLoom()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="2408"
                            class="link-to-prism">src/app/core/directives/weave.directive.ts:2408</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="redraw"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Public</span>
                            redraw
                        </b>
                        <a href="#redraw"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>redraw(flags: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="2436"
                            class="link-to-prism">src/app/core/directives/weave.directive.ts:2436</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>flags</td>
                                    <td>
                                                <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="redrawCol"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Private</span>
                            redrawCol
                        </b>
                        <a href="#redrawCol"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>redrawCol(x, i, cx)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="1742"
                            class="link-to-prism">src/app/core/directives/weave.directive.ts:1742</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>x</td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>i</td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>cx</td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="redrawDraft"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Public</span>
                            redrawDraft
                        </b>
                        <a href="#redrawDraft"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>redrawDraft()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="2481"
                            class="link-to-prism">src/app/core/directives/weave.directive.ts:2481</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Redraws the entire canvas based on weave pattern.</p>
</div>

                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="redrawLoom"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Public</span>
                            redrawLoom
                        </b>
                        <a href="#redrawLoom"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>redrawLoom()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="2361"
                            class="link-to-prism">src/app/core/directives/weave.directive.ts:2361</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="redrawRow"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Private</span>
                            redrawRow
                        </b>
                        <a href="#redrawRow"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>redrawRow(y, i, cx)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="1730"
                            class="link-to-prism">src/app/core/directives/weave.directive.ts:1730</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Redraws one row to avoid drawing the entire canvas.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>y</td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>i</td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>cx</td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="redrawVisualView"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Public</span>
                            redrawVisualView
                        </b>
                        <a href="#redrawVisualView"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>redrawVisualView()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="2564"
                            class="link-to-prism">src/app/core/directives/weave.directive.ts:2564</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Simulates the visual look of the weave pattern.</p>
</div>

                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="redrawYarnView"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Public</span>
                            redrawYarnView
                        </b>
                        <a href="#redrawYarnView"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>redrawYarnView()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="2292"
                            class="link-to-prism">src/app/core/directives/weave.directive.ts:2292</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="removeSubscription"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Private</span>
                            removeSubscription
                        </b>
                        <a href="#removeSubscription"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>removeSubscription()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="649"
                            class="link-to-prism">src/app/core/directives/weave.directive.ts:649</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Remove the subscription from the move event.</p>
</div>

                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="rescale"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Public</span>
                            rescale
                        </b>
                        <a href="#rescale"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>rescale()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="2016"
                            class="link-to-prism">src/app/core/directives/weave.directive.ts:2016</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="saveADA"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Public</span>
                            saveADA
                        </b>
                        <a href="#saveADA"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>saveADA(fileName, obj)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="2730"
                            class="link-to-prism">src/app/core/directives/weave.directive.ts:2730</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Saves the draft as a .ada file</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>fileName</td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <ul>
<li>name to save file as</li>
</ul>

                                    </td>
                                </tr>
                                <tr>
                                    <td>obj</td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="saveBMP"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Public</span>
                            saveBMP
                        </b>
                        <a href="#saveBMP"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>saveBMP(fileName, obj)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="2691"
                            class="link-to-prism">src/app/core/directives/weave.directive.ts:2691</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Saves the draft as a bitmap file</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>fileName</td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <ul>
<li>name to save file as</li>
</ul>

                                    </td>
                                </tr>
                                <tr>
                                    <td>obj</td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="savePNG"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Public</span>
                            savePNG
                        </b>
                        <a href="#savePNG"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>savePNG(fileName, obj)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="2629"
                            class="link-to-prism">src/app/core/directives/weave.directive.ts:2629</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Saves the draft as a bitmap file</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>fileName</td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <ul>
<li>name to save file as</li>
</ul>

                                    </td>
                                </tr>
                                <tr>
                                    <td>obj</td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="savePrintableDraft"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Public</span>
                            savePrintableDraft
                        </b>
                        <a href="#savePrintableDraft"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>savePrintableDraft(fileName, obj)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="2644"
                            class="link-to-prism">src/app/core/directives/weave.directive.ts:2644</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Saves the draft as a bitmap file</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>fileName</td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <ul>
<li>name to save file as</li>
</ul>

                                    </td>
                                </tr>
                                <tr>
                                    <td>obj</td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="saveWIF"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Public</span>
                            saveWIF
                        </b>
                        <a href="#saveWIF"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>saveWIF(fileName, obj)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="2751"
                            class="link-to-prism">src/app/core/directives/weave.directive.ts:2751</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Saves the draft as a .wif file</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>fileName</td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <ul>
<li>name to save file as</li>
</ul>

                                    </td>
                                </tr>
                                <tr>
                                    <td>obj</td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        <p>ld updated 3/27 to account for new file structure</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="setPosAndDraw"></a>
                    <span class="name">
                        <b>
                            setPosAndDraw
                        </b>
                        <a href="#setPosAndDraw"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>setPosAndDraw(target, currentPos: <a href="../classes/Point.html">Point</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="333"
                            class="link-to-prism">src/app/core/directives/weave.directive.ts:333</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>target</td>
                                    <td>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>currentPos</td>
                                    <td>
                                                <code><a href="../classes/Point.html" target="_self" >Point</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="unsetSelection"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Public</span>
                            unsetSelection
                        </b>
                        <a href="#unsetSelection"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>unsetSelection()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="2414"
                            class="link-to-prism">src/app/core/directives/weave.directive.ts:2414</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="updateLoomFromDraft"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Private</span>
                            updateLoomFromDraft
                        </b>
                        <a href="#updateLoomFromDraft"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>updateLoomFromDraft(currentPos)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="1381"
                            class="link-to-prism">src/app/core/directives/weave.directive.ts:1381</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>*
This function takes a point added to the draft and updates and redraws the loom states
It takes current position of a point on the currently visible draft
*</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>currentPos</td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</section>
            <section>
    
        <h3 id="inputs">
            Properties
        </h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="canvasEl"></a>
                        <span class="name">
                            <b>
                            canvasEl</b>
                            <a href="#canvasEl"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code>HTMLCanvasElement</code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="79" class="link-to-prism">src/app/core/directives/weave.directive.ts:79</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                        <div class="io-description"><p>The HTML canvas element within the weave draft.</p>
</div>
                    </td>
                </tr>

            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="cx"></a>
                        <span class="name">
                            <b>
                            cx</b>
                            <a href="#cx"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="104" class="link-to-prism">src/app/core/directives/weave.directive.ts:104</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                        <div class="io-description"><p>The 2D context of the canvas</p>
</div>
                    </td>
                </tr>

            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="cxThreading"></a>
                        <span class="name">
                            <b>
                            cxThreading</b>
                            <a href="#cxThreading"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="110" class="link-to-prism">src/app/core/directives/weave.directive.ts:110</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                        <div class="io-description"><p>The 2D context of the threading canvas</p>
</div>
                    </td>
                </tr>

            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="cxTieups"></a>
                        <span class="name">
                            <b>
                            cxTieups</b>
                            <a href="#cxTieups"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="122" class="link-to-prism">src/app/core/directives/weave.directive.ts:122</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                        <div class="io-description"><p>The 2D context of the treadling canvas</p>
</div>
                    </td>
                </tr>

            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="cxTreadling"></a>
                        <span class="name">
                            <b>
                            cxTreadling</b>
                            <a href="#cxTreadling"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="116" class="link-to-prism">src/app/core/directives/weave.directive.ts:116</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                        <div class="io-description"><p>The 2D context of the treadling canvas</p>
</div>
                    </td>
                </tr>

            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="cxWarpMaterials"></a>
                        <span class="name">
                            <b>
                            cxWarpMaterials</b>
                            <a href="#cxWarpMaterials"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="137" class="link-to-prism">src/app/core/directives/weave.directive.ts:137</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="cxWarpSystems"></a>
                        <span class="name">
                            <b>
                            cxWarpSystems</b>
                            <a href="#cxWarpSystems"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="134" class="link-to-prism">src/app/core/directives/weave.directive.ts:134</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                        <div class="io-description"><p>The 2D context of the warp_systems canvas</p>
</div>
                    </td>
                </tr>

            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="cxWeftMaterials"></a>
                        <span class="name">
                            <b>
                            cxWeftMaterials</b>
                            <a href="#cxWeftMaterials"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="141" class="link-to-prism">src/app/core/directives/weave.directive.ts:141</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="cxWeftSystems"></a>
                        <span class="name">
                            <b>
                            cxWeftSystems</b>
                            <a href="#cxWeftSystems"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="128" class="link-to-prism">src/app/core/directives/weave.directive.ts:128</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                        <div class="io-description"><p>The 2D context of the weft_systems canvas</p>
</div>
                    </td>
                </tr>

            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="divViewFrames"></a>
                        <span class="name">
                            <b>
                            divViewFrames</b>
                            <a href="#divViewFrames"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code>HTMLElement</code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="181" class="link-to-prism">src/app/core/directives/weave.directive.ts:181</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                        <div class="io-description"><p>The HTML div element used to show and hide the frames.</p>
</div>
                    </td>
                </tr>

            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="divWasy"></a>
                        <span class="name">
                            <b>
                            divWasy</b>
                            <a href="#divWasy"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code>HTMLElement</code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="174" class="link-to-prism">src/app/core/directives/weave.directive.ts:174</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                        <div class="io-description"><p>The HTML div element used to show the warp-systems text.</p>
</div>
                    </td>
                </tr>

            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="divWesy"></a>
                        <span class="name">
                            <b>
                            divWesy</b>
                            <a href="#divWesy"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code>HTMLElement</code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="168" class="link-to-prism">src/app/core/directives/weave.directive.ts:168</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                        <div class="io-description"><p>The HTML div element used to show the weft-systems text.</p>
</div>
                    </td>
                </tr>

            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="draftContainer"></a>
                        <span class="name">
                            <b>
                            draftContainer</b>
                            <a href="#draftContainer"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code>HTMLElement</code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="85" class="link-to-prism">src/app/core/directives/weave.directive.ts:85</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                        <div class="io-description"><p>the window holding the draft.</p>
</div>
                    </td>
                </tr>

            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="flag_history"></a>
                        <span class="name">
                            <b>
                            flag_history</b>
                            <a href="#flag_history"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="97" class="link-to-prism">src/app/core/directives/weave.directive.ts:97</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                        <div class="io-description"><p>flag defining if there needs to be a recomputation of the draft on Mouse Up</p>
</div>
                    </td>
                </tr>

            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="flag_recompute"></a>
                        <span class="name">
                            <b>
                            flag_recompute</b>
                            <a href="#flag_recompute"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="91" class="link-to-prism">src/app/core/directives/weave.directive.ts:91</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                        <div class="io-description"><p>flag defining if there needs to be a recomputation of the draft on Mouse Up</p>
</div>
                    </td>
                </tr>

            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="lastPos"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                            lastPos</b>
                            <a href="#lastPos"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>        <code><a href="../classes/Point.html" target="_self" >Point</a></code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="231" class="link-to-prism">src/app/core/directives/weave.directive.ts:231</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="moveSubscription"></a>
                        <span class="name">
                            <b>
                            moveSubscription</b>
                            <a href="#moveSubscription"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code>Subscription</code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="154" class="link-to-prism">src/app/core/directives/weave.directive.ts:154</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                        <div class="io-description"><p>Subscribes to move event after a touch event is started.</p>
</div>
                    </td>
                </tr>

            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="selection"></a>
                        <span class="name">
                            <b>
                            selection</b>
                            <a href="#selection"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>        <code><a href="../classes/Selection.html" target="_self" >Selection</a></code>

                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Default value : </i><code>new Selection()</code>
                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="148" class="link-to-prism">src/app/core/directives/weave.directive.ts:148</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                        <div class="io-description"><p>The current selection within the weave canvas.</p>
</div>
                    </td>
                </tr>

            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="svgEl"></a>
                        <span class="name">
                            <b>
                            svgEl</b>
                            <a href="#svgEl"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code>HTMLElement</code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="160" class="link-to-prism">src/app/core/directives/weave.directive.ts:160</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                        <div class="io-description"><p>The HTML SVG element used to show the selection.</p>
</div>
                    </td>
                </tr>

            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="svgSelectCol"></a>
                        <span class="name">
                            <b>
                            svgSelectCol</b>
                            <a href="#svgSelectCol"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code>HTMLElement</code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="195" class="link-to-prism">src/app/core/directives/weave.directive.ts:195</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                        <div class="io-description"><p>The HTML SVG element used to show the row</p>
</div>
                    </td>
                </tr>

            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="svgSelectRow"></a>
                        <span class="name">
                            <b>
                            svgSelectRow</b>
                            <a href="#svgSelectRow"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code>HTMLElement</code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="188" class="link-to-prism">src/app/core/directives/weave.directive.ts:188</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                        <div class="io-description"><p>The HTML SVG element used to show the row</p>
</div>
                    </td>
                </tr>

            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="tempPattern"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                            tempPattern</b>
                            <a href="#tempPattern"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code>Array&lt;Array&lt;boolean&gt;&gt;</code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="228" class="link-to-prism">src/app/core/directives/weave.directive.ts:228</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="threadingCanvas"></a>
                        <span class="name">
                            <b>
                            threadingCanvas</b>
                            <a href="#threadingCanvas"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code>HTMLCanvasElement</code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="203" class="link-to-prism">src/app/core/directives/weave.directive.ts:203</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                        <div class="io-description"><p>The HTML canvas element within the weave draft for threading.</p>
</div>
                    </td>
                </tr>

            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="tieupsCanvas"></a>
                        <span class="name">
                            <b>
                            tieupsCanvas</b>
                            <a href="#tieupsCanvas"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code>HTMLCanvasElement</code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="217" class="link-to-prism">src/app/core/directives/weave.directive.ts:217</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                        <div class="io-description"><p>The HTML canvas element within the weave draft for tieups.</p>
</div>
                    </td>
                </tr>

            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="treadlingCanvas"></a>
                        <span class="name">
                            <b>
                            treadlingCanvas</b>
                            <a href="#treadlingCanvas"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code>HTMLCanvasElement</code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="210" class="link-to-prism">src/app/core/directives/weave.directive.ts:210</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                        <div class="io-description"><p>The HTML canvas element within the weave draft for treadling.</p>
</div>
                    </td>
                </tr>

            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="unsubscribe$"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                            unsubscribe$</b>
                            <a href="#unsubscribe$"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Default value : </i><code>new Subject()</code>
                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="229" class="link-to-prism">src/app/core/directives/weave.directive.ts:229</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="warpMaterialsCanvas"></a>
                        <span class="name">
                            <b>
                            warpMaterialsCanvas</b>
                            <a href="#warpMaterialsCanvas"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code>HTMLCanvasElement</code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="226" class="link-to-prism">src/app/core/directives/weave.directive.ts:226</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="warpSystemsCanvas"></a>
                        <span class="name">
                            <b>
                            warpSystemsCanvas</b>
                            <a href="#warpSystemsCanvas"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code>HTMLCanvasElement</code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="222" class="link-to-prism">src/app/core/directives/weave.directive.ts:222</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="weftMaterialsCanvas"></a>
                        <span class="name">
                            <b>
                            weftMaterialsCanvas</b>
                            <a href="#weftMaterialsCanvas"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code>HTMLCanvasElement</code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="225" class="link-to-prism">src/app/core/directives/weave.directive.ts:225</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="weftSystemsCanvas"></a>
                        <span class="name">
                            <b>
                            weftSystemsCanvas</b>
                            <a href="#weftSystemsCanvas"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code>HTMLCanvasElement</code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="221" class="link-to-prism">src/app/core/directives/weave.directive.ts:221</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
</section>


    </div>


    <div class="tab-pane fade  tab-source-code" id="c-source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import { Directive, ElementRef, ViewChild, HostListener, Input, Output, EventEmitter, Renderer2 } from &#x27;@angular/core&#x27;;

import { Observable, Subscription, fromEvent, from } from &#x27;rxjs&#x27;;
import * as d3 from &quot;d3&quot;;
import {cloneDeep, now} from &#x27;lodash&#x27;;

import { Draft } from &#x27;../model/draft&#x27;;
import { Render } from &#x27;../model/render&#x27;;
import { Loom } from &#x27;../model/loom&#x27;;
import { Cell } from &#x27;../model/cell&#x27;;
import { Shuttle } from &#x27;../model/shuttle&#x27;;
import { Pattern } from &#x27;../model/pattern&#x27;;
import { Point } from &#x27;../model/point&#x27;;
import { Selection } from &#x27;../model/selection&#x27;;
import { Timeline } from &#x27;../model/timeline&#x27;;
import { CanvasToBMP } from &#x27;../model/canvas2image&#x27;;
import {Subject} from &#x27;rxjs&#x27;;
import {takeLast, takeUntil} from &#x27;rxjs/operators&#x27;;

const generateId &#x3D; () &#x3D;&gt; (Date.now().toString(36) + Math.random().toString(36).substr(2, 5)).toUpperCase();

/**
 * WeaveDirective handles the events and manipulation of the weave draft.
 * @class
 */
@Directive({
  selector: &#x27;[weave]&#x27;
})


export class WeaveDirective {



  /// ATTRIBUTES
  /**
   * Contains the name of the brush being used to manipulate the weave draft.
   * It is defined and inputed from the HTML declaration of the WeaveDirective.
   * @property {string}
   */
  @Input(&#x27;design_mode&#x27;) design_mode: any;

  /**
   * The Draft object containing the pattern and shuttle information.
   * It is defined and inputed from the HTML declaration of the WeaveDirective.
   * @property {Draft}
   */
  @Input(&#x27;draft&#x27;) weave: any;


/**
   * The Render object containing the variables about zoom and cell sizes.
   * It is defined and inputed from the HTML declaration of the WeaveDirective.
   * @property {Render}
  */
  @Input(&#x27;render&#x27;) render: any;



/**
   * The Timeline object containing state histories for undo and redo
   * @property {Render}
  */
  @Input(&#x27;timeline&#x27;) timeline: any;



  @Input() copy:  Array&lt;Array&lt;boolean&gt;&gt;;


  @Output() onNewSelection &#x3D; new EventEmitter();



/**
   * The HTML canvas element within the weave draft.
   * @property {HTMLCanvasElement}
  */ 
  canvasEl: HTMLCanvasElement;

/**
   * the window holding the draft.
   * @property {HTMLCanvasElement}
  */ 
  draftContainer: HTMLElement;


  /**
   * flag defining if there needs to be a recomputation of the draft on Mouse Up
   */
  flag_recompute: boolean;


  /**
   * flag defining if there needs to be a recomputation of the draft on Mouse Up
   */
  flag_history: boolean;


  /**
   * The 2D context of the canvas
   * @property {any}
   */
  cx: any;

  /**
   * The 2D context of the threading canvas
   * @property {any}
   */
  cxThreading: any;

  /**
   * The 2D context of the treadling canvas
   * @property {any}
   */
  cxTreadling: any;

  /**
   * The 2D context of the treadling canvas
   * @property {any}
   */
  cxTieups: any;

  /**
   * The 2D context of the weft_systems canvas
   * @property {any}
   */
  cxWeftSystems: any;

  /**
   * The 2D context of the warp_systems canvas
   * @property {any}
   */
  cxWarpSystems: any;


  cxWarpMaterials: any;



  cxWeftMaterials: any;


  /**
   * The current selection within the weave canvas.
   * @property {Selection}
   */
  selection: Selection &#x3D; new Selection();

  /**
   * Subscribes to move event after a touch event is started.
   * @property {Subscription}
   */
  moveSubscription: Subscription;

  /**
   * The HTML SVG element used to show the selection.
   * @property {HTMLElement}
   */
  svgEl: HTMLElement;



  /**
   * The HTML div element used to show the weft-systems text.
   * @property {HTMLElement}
   */
  divWesy: HTMLElement;

  /**
   * The HTML div element used to show the warp-systems text.
   * @property {HTMLElement}
   */
  divWasy: HTMLElement;


  /**
   * The HTML div element used to show and hide the frames.
   * @property {HTMLElement}
   */
  divViewFrames: HTMLElement;


 /**
   * The HTML SVG element used to show the row
   * @property {HTMLElement}
   */
  svgSelectRow: HTMLElement;


 /**
   * The HTML SVG element used to show the row
   * @property {HTMLElement}
   */
  svgSelectCol: HTMLElement;


  /**
   * The HTML canvas element within the weave draft for threading.
   * @property {HTMLCanvasElement}
   * 
   */
  threadingCanvas: HTMLCanvasElement;

    /**
   * The HTML canvas element within the weave draft for treadling.
   * @property {HTMLCanvasElement}
   * 
   */
  treadlingCanvas: HTMLCanvasElement;

  /**
   * The HTML canvas element within the weave draft for tieups.
   * @property {HTMLCanvasElement}
   * 
   */
  tieupsCanvas: HTMLCanvasElement;



  weftSystemsCanvas: HTMLCanvasElement;
  warpSystemsCanvas: HTMLCanvasElement;


  weftMaterialsCanvas: HTMLCanvasElement;
  warpMaterialsCanvas: HTMLCanvasElement;

  private tempPattern: Array&lt;Array&lt;boolean&gt;&gt;;
  private unsubscribe$ &#x3D; new Subject();

  private lastPos: Point;



  /// ANGULAR FUNCTIONS
  /**
   * Creates the element reference.
   * @constructor
   */
  constructor(private el: ElementRef) {

    this.flag_recompute &#x3D; false;
    this.flag_history &#x3D; false;
  }


  //this is called when the HTML &quot;weaveRef&quot; Element is loaded
  ngOnInit() {  

    console.log(&quot;element&quot;, this.el.nativeElement.children);

    // define the elements and context of the weave draft, threading, treadling, and tieups.
    this.canvasEl &#x3D; this.el.nativeElement.children[6];
    this.draftContainer &#x3D; this.el.nativeElement;


  
    //this is the selection
    this.svgEl &#x3D; this.el.nativeElement.children[8];
    this.svgSelectRow &#x3D; this.el.nativeElement.children[12];
    this.svgSelectCol &#x3D; this.el.nativeElement.children[13];
    this.divWesy &#x3D; this.el.nativeElement.children[10];
    this.divWasy &#x3D; this.el.nativeElement.children[11];
    this.divViewFrames &#x3D; this.el.nativeElement.children[9];

    this.threadingCanvas &#x3D; this.el.nativeElement.children[4];
    this.tieupsCanvas &#x3D; this.el.nativeElement.children[5];
    this.treadlingCanvas &#x3D; this.el.nativeElement.children[7];
    this.weftSystemsCanvas &#x3D; this.el.nativeElement.children[0];
    this.weftMaterialsCanvas &#x3D; this.el.nativeElement.children[1];
    this.warpSystemsCanvas &#x3D; this.el.nativeElement.children[2];
    this.warpMaterialsCanvas &#x3D; this.el.nativeElement.children[3];
    
    this.cx &#x3D; this.canvasEl.getContext(&#x27;2d&#x27;);
    this.cxThreading &#x3D; this.threadingCanvas.getContext(&#x27;2d&#x27;);
    this.cxTreadling &#x3D; this.treadlingCanvas.getContext(&#x27;2d&#x27;);
    this.cxTieups &#x3D; this.tieupsCanvas.getContext(&#x27;2d&#x27;);
    this.cxWarpSystems &#x3D; this.warpSystemsCanvas.getContext(&#x27;2d&#x27;);
    this.cxWeftSystems &#x3D; this.weftSystemsCanvas.getContext(&#x27;2d&#x27;);
    this.cxWarpMaterials &#x3D; this.warpMaterialsCanvas.getContext(&#x27;2d&#x27;);
    this.cxWeftMaterials &#x3D; this.weftMaterialsCanvas.getContext(&#x27;2d&#x27;);
    // set the width and height

    d3.select(this.svgEl).style(&#x27;display&#x27;, &#x27;none&#x27;);

    
  }

  //this is called anytime a new draft object is loaded. 
  onNewDraftLoaded() {  

    var dims &#x3D; this.render.getCellDims(&quot;base&quot;);

    this.canvasEl.width &#x3D; this.weave.warps * dims.w;
    this.canvasEl.height &#x3D; this.weave.wefts * dims.h;
    this.threadingCanvas.width &#x3D; this.weave.warps * dims.w;
    this.threadingCanvas.height &#x3D; this.weave.loom.min_frames * dims.h;
    this.treadlingCanvas.height &#x3D; this.weave.wefts * dims.h;
    this.treadlingCanvas.width &#x3D; this.weave.loom.min_treadles * dims.w;
    this.tieupsCanvas.width &#x3D; this.weave.loom.min_treadles*dims.w;
    this.tieupsCanvas.height &#x3D; this.weave.loom.min_frames * dims.h;


    this.weftSystemsCanvas.width &#x3D;  dims.w;
    this.weftSystemsCanvas.height &#x3D; this.weave.wefts * dims.h;
    this.weftMaterialsCanvas.width &#x3D;  dims.w;
    this.weftMaterialsCanvas.height &#x3D; this.weave.wefts * dims.h;

    this.warpSystemsCanvas.width &#x3D;  this.weave.warps * dims.w;
    this.warpSystemsCanvas.height &#x3D; dims.h;
    this.warpMaterialsCanvas.width &#x3D;  this.weave.warps * dims.w;
    this.warpMaterialsCanvas.height &#x3D; dims.h;


    // make the selection SVG invisible using d3
    d3.select(this.svgEl).style(&#x27;display&#x27;, &#x27;none&#x27;);


  }

  clearSelection(){
        this.selection.unsetParameters();
        d3.select(this.svgEl).style(&#x27;display&#x27;, &#x27;none&#x27;);
        d3.select(this.svgSelectCol).style(&#x27;display&#x27;, &#x27;none&#x27;);
        d3.select(this.svgSelectRow).style(&#x27;display&#x27;, &#x27;none&#x27;);
  }

  ngOnDestroy() {
     this.removeSubscription();
  }


  setPosAndDraw(target, currentPos:Point){

      if (target &amp;&amp; target.id &#x3D;&#x3D;&#x27;treadling&#x27;) {
        currentPos.i &#x3D; this.weave.visibleRows[currentPos.i];
        this.drawOnTreadling(currentPos);
      } else if (target &amp;&amp; target.id &#x3D;&#x3D;&#x3D; &#x27;tieups&#x27;) {
        currentPos.i &#x3D; this.weave.loom.frame_mapping[currentPos.i];
        this.drawOnTieups(currentPos);
      } else if (target &amp;&amp; target.id &#x3D;&#x3D;&#x3D; (&#x27;threading&#x27;)) {
        currentPos.i &#x3D; this.weave.loom.frame_mapping[currentPos.i];
        this.drawOnThreading(currentPos);
      } else if(target &amp;&amp; target.id &#x3D;&#x3D;&#x3D; (&#x27;weft-systems&#x27;)){
        currentPos.i &#x3D; this.weave.visibleRows[currentPos.i];
        this.drawOnWeftSelectors(currentPos);
      }else if(target &amp;&amp; target.id &#x3D;&#x3D;&#x3D; (&#x27;warp-systems&#x27;)){
        this.drawOnWarpSelectors(currentPos);
      }else if(target &amp;&amp; target.id &#x3D;&#x3D;&#x3D; (&#x27;weft-materials&#x27;)){
        currentPos.i &#x3D; this.weave.visibleRows[currentPos.i];
        this.drawOnWeftMaterials(currentPos);
      }else if(target &amp;&amp; target.id &#x3D;&#x3D;&#x3D; (&#x27;warp-materials&#x27;)){
        this.drawOnWarpMaterials(currentPos);
      } else{
        currentPos.i &#x3D; this.weave.visibleRows[currentPos.i];
        this.drawOnDrawdown(currentPos);
      }

      this.flag_history &#x3D; true;
    }



  /**
   * Touch start event. Subscribes to the move event.
   * @extends WeaveDirective
   * @param {Event} event - The mousedown event.
   * @returns {void}
   */
  @HostListener(&#x27;mousedown&#x27;, [&#x27;$event&#x27;])
  private onStart(event) {


    //get dimis based on zoom.
    let dims &#x3D;{
      w: this.warpSystemsCanvas.width / this.weave.warps,
      h: this.weftSystemsCanvas.height / this.weave.visibleRows.length
    }


    console.log(event.target.id);

    if (event.target.localName &#x3D;&#x3D;&#x3D; &#x27;canvas&#x27;) {
    
      this.removeSubscription();    
      
      this.moveSubscription &#x3D; 
        fromEvent(event.target, &#x27;mousemove&#x27;).subscribe(e &#x3D;&gt; this.onMove(e));   

      // set up the Point to be used.
      var screen_row &#x3D; Math.floor(event.offsetY / dims.h);

      const currentPos: Point &#x3D; {
        si: screen_row,
        i: screen_row, //row
        j: Math.floor((event.offsetX) / dims.w), //col
      };

      if(currentPos.i &lt; 0 || currentPos.i &gt;&#x3D; this.weave.visibleRows.length) return;
      if(currentPos.j &lt; 0 || currentPos.j &gt;&#x3D; this.weave.warps) return;

      if(event.target &amp;&amp; event.target.id&#x3D;&#x3D;&#x3D;&quot;drawdown&quot;){
        currentPos.si -&#x3D;1;
        currentPos.i -&#x3D;1;
        currentPos.j -&#x3D;1;
      }

      if(currentPos.i &lt; 0 || currentPos.i &gt;&#x3D; this.weave.visibleRows.length) return;
      if(currentPos.j &lt; 0 || currentPos.j &gt;&#x3D; this.weave.warps) return;
      
      // Save temp pattern
      this.tempPattern &#x3D; cloneDeep(this.weave.pattern);

      switch (this.design_mode.name) {
        case &#x27;toggle&#x27;:
          this.setPosAndDraw(event.target, currentPos);
          this.unsetSelection();
        break;

        case &#x27;up&#x27;:
        case &#x27;down&#x27;:
        case &#x27;material&#x27;:
          this.setPosAndDraw(event.target, currentPos);
          this.unsetSelection();
          this.flag_recompute &#x3D; true;

          break;
        case &#x27;maskpoint&#x27;:
        case &#x27;maskerase&#x27;:
        case&#x27;maskinvert&#x27;:
          this.drawOnMask(currentPos);
          break;
        case &#x27;select&#x27;:
        case &#x27;copy&#x27;:

          if(event.shiftKey){

            this.selection.end &#x3D; currentPos;
            this.selection.setParameters();
            this.rescale();

          }else{

            this.clearSelection();

            this.selection.start &#x3D; currentPos;
            this.selection.end &#x3D; currentPos;
            this.selection.width &#x3D; 0;
            this.selection.height &#x3D; 0;


            if (event.target &amp;&amp; event.target.id&#x3D;&#x3D;&#x3D;&quot;treadling&quot;) {
              this.selection.setTarget(this.treadlingCanvas);
              this.selection.start.j &#x3D; 0;
              this.selection.width &#x3D; this.weave.loom.num_treadles;

            } else if (event.target &amp;&amp; event.target.id &#x3D;&#x3D;&#x3D;&quot;tieups&quot;) {
              this.selection.setTarget(this.tieupsCanvas);
            } else if (event.target &amp;&amp; event.target.id &#x3D;&#x3D;&#x3D; &quot;threading&quot;) {
              this.selection.setTarget(this.threadingCanvas);
              this.selection.start.i &#x3D; 0;
              this.selection.start.si &#x3D; 0;
              this.selection.height &#x3D; this.weave.loom.num_frames;


            } else if(event.target &amp;&amp; event.target.id &#x3D;&#x3D;&#x3D; &quot;weft-systems&quot;){
              this.selection.width &#x3D; 1;
              this.selection.setTarget(this.weftSystemsCanvas);
            }else if(event.target &amp;&amp; event.target.id &#x3D;&#x3D;&#x3D; &quot;warp-systems&quot;){
              this.selection.setTarget(this.warpSystemsCanvas);
              this.selection.height &#x3D; 1;
            } else if(event.target &amp;&amp; event.target.id &#x3D;&#x3D;&#x3D; &quot;weft-materials&quot;){
              this.selection.width &#x3D; 1;
              this.selection.setTarget(this.weftMaterialsCanvas);
            }else if(event.target &amp;&amp; event.target.id &#x3D;&#x3D;&#x3D; &quot;warp-materials&quot;){
              this.selection.setTarget(this.warpMaterialsCanvas);
              this.selection.height &#x3D; 1;
            } else{
              this.selection.setTarget(this.canvasEl);
            }
          }
          break;
          default:
          break;
      }

      this.lastPos &#x3D; {
        si: currentPos.si,
        i: currentPos.i, //row
        j: currentPos.j //col
      };

      // this.segment &#x3D; {
      //   start: [currentPos.si, currentPos.i, currentPos.j],
      //   end: [currentPos.si, currentPos.i, currentPos.j],
      //   pattern: null,
      //   id: generateId(),
      // }
    }
  }

  private isSame(p1: Point, p2:Point){
    if(p1 &#x3D;&#x3D;&#x3D; undefined || p2 &#x3D;&#x3D;&#x3D; undefined ) return false
    return (p1.i &#x3D;&#x3D; p2.i &amp;&amp; p1.j &#x3D;&#x3D;&#x3D; p2.j);

  }



  /**
   * Event called when mouse down and moved within the canvas.
   * @extends WeaveDirective
   * @param {Event} event - The mousemove event.
   * @returns {void}
   */
  private onMove(event) {

    let dims &#x3D;{
      w: this.warpSystemsCanvas.width / this.weave.warps,
      h: this.weftSystemsCanvas.height /this.weave.visibleRows.length
    };    

    var offset &#x3D; this.render.getCellDims(this.design_mode.name);
  
    // set up the point based on touched square.
    var screen_row &#x3D; Math.floor((event.offsetY + offset.y) / dims.h);

    const currentPos: Point &#x3D; {
      si: screen_row,
      i:  screen_row,
      j:  Math.floor((event.offsetX + offset.x) / dims.w)
    };

   


    if(event.target &amp;&amp; event.target.id&#x3D;&#x3D;&#x3D;&quot;drawdown&quot;){
      currentPos.si -&#x3D;1;
      currentPos.i -&#x3D;1;
      currentPos.j -&#x3D;1;
    }

   

    //don&#x27;t call unless you&#x27;ve moved to a new spot
    if(this.isSame(currentPos, this.lastPos)) return;

    // determine action based on brush type. invert inactive on move.
    switch (this.design_mode.name) {
      case &#x27;up&#x27;:
      case &#x27;down&#x27;:
      case &#x27;material&#x27;:
       //this.unsetSelection();

        if(currentPos.i &lt; 0 || currentPos.i &gt;&#x3D; this.weave.visibleRows.length) return;
        if(currentPos.j &lt; 0 || currentPos.j &gt;&#x3D; this.weave.warps) return;


        this.setPosAndDraw(event.target, currentPos);
        this.flag_recompute &#x3D; true;


        
        break;

      case &#x27;maskpoint&#x27;:
      case &#x27;maskerase&#x27;:
      case&#x27;maskinvert&#x27;:
        this.drawOnMask(currentPos);
        break;


      case &#x27;select&#x27;:
      case &#x27;copy&#x27;:

        this.selection.end &#x3D; currentPos;
        if(currentPos.si &lt; 0) currentPos.si &#x3D; 0;
        if(currentPos.si &gt;&#x3D; this.weave.visibleRows.length) currentPos.si &#x3D; this.weave.visibleRows.length;
      
        if(currentPos.j &lt; 0 ) currentPos.j &#x3D; 0;
        if(currentPos.j &gt;&#x3D; this.weave.warps) currentPos.j &#x3D; this.weave.warps;


        if (event.target &amp;&amp; event.target.id &#x3D;&#x3D;&#x3D; (&#x27;treadling&#x27;)) {
          this.selection.end.j &#x3D; this.weave.loom.num_treadles;

        }else if(event.target &amp;&amp; event.target.id &#x3D;&#x3D;&#x3D; (&#x27;threading-container&#x27;)){
          this.selection.end.i &#x3D; this.weave.loom.num_frames;
          this.selection.end.si &#x3D; this.weave.loom.num_frames;
        }

        this.selection.setParameters();
        this.rescale();

        break;
      case &#x27;invert&#x27;:
      default:
        break;
    }

    this.lastPos &#x3D; {
        si: currentPos.si,
        i: currentPos.i, //row
        j: currentPos.j //col
      };
  }

  /**
   * Event removes subscription when touch has ended.
   * @extends WeaveDirective
   * @param {Event} event - The mouseleave or mouseup event.
   * @returns {void}
   */
  @HostListener(&#x27;mouseleave&#x27;, [&#x27;$event&#x27;])
  @HostListener(&#x27;mouseup&#x27;, [&#x27;$event&#x27;])
  private onEnd(event) {
     this.lastPos &#x3D; {
      si: -1,
      i: -1,
      j: -1
     }

     if(this.flag_history &amp;&amp; event.type &#x3D;&#x3D; &#x27;mouseup&#x27;){
        this.timeline.addHistoryState(this.weave);
        this.flag_history &#x3D; false;
      } 


     if(this.flag_recompute &amp;&amp; event.type &#x3D;&#x3D; &#x27;mouseup&#x27;){
      if(this.render.isYarnBasedView()) this.weave.computeYarnPaths();
      this.flag_recompute &#x3D; false;
     }



    // remove subscription unless it is leave event with select.
    if (!(event.type &#x3D;&#x3D;&#x3D; &#x27;mouseleave&#x27; &amp;&amp; (this.design_mode.name &#x3D;&#x3D;&#x3D; &#x27;select&#x27; || this.design_mode.name &#x3D;&#x3D;&#x3D;&#x27;copy&#x27;))) {
      this.removeSubscription();
      if(this.design_mode.name !&#x3D; &quot;copy&quot; &amp;&amp; this.selection.start !&#x3D;&#x3D; undefined) this.copyArea();
    }

  }

  /**
   * Remove the subscription from the move event.
   * @extends WeaveDirective
   * @returns {void}
   */
 private removeSubscription() {    
    if (this.moveSubscription) {
      this.moveSubscription.unsubscribe();
    }
  }

  /// PRIVATE FUNCTIONS
  /**
   * Creates the copied pattern. Hack for warp and weft shuttles is that it creates a 2d arrray representing the 
   * threading or treadling with &quot;true&quot; in the frame/threadle associated with that col/row. 
   * @extends WeaveDirective
   * @returns {void}
   */
  private copyArea() {


    var dims &#x3D; this.render.getCellDims(&quot;copy&quot;);


    const screen_i &#x3D; Math.min(this.selection.start.si, this.selection.end.si);    
    const draft_i &#x3D; Math.min(this.selection.start.i, this.selection.end.i);
    const draft_j &#x3D; Math.min(this.selection.start.j, this.selection.end.j);
    

    var w &#x3D; this.selection.width;
    var h &#x3D; this.selection.height;


    this.copy &#x3D; [];
     
    if(this.selection.target.id &#x3D;&#x3D;&#x3D; &#x27;weft-systems&#x27;){
      for(var i &#x3D; 0; i &lt; h; i++){
        this.copy.push([]);
        for(var j &#x3D; 0; j &lt; this.weave.weft_systems.length; j++){
          this.copy[i].push(false);
        }
      }
    }else if(this.selection.target.id &#x3D;&#x3D;&#x3D; &#x27;warp-systems&#x27;){
      for(var i &#x3D; 0; i &lt; this.weave.warp_systems.length; i++){
        this.copy.push([]);
        for(var j &#x3D; 0; j &lt; w; j++){
          this.copy[i].push(false);
        }
      }
    }else if(this.selection.target.id &#x3D;&#x3D;&#x3D; &#x27;weft-materials&#x27;){
      for(var i &#x3D; 0; i &lt; h; i++){
        this.copy.push([]);
        for(var j &#x3D; 0; j &lt; this.weave.shuttles.length; j++){
          this.copy[i].push(false);
        }
      }
    }else if(this.selection.target.id &#x3D;&#x3D;&#x3D; &#x27;warp-materials&#x27;){
      for(var i &#x3D; 0; i &lt; this.weave.shuttles.length; i++){
        this.copy.push([]);
        for(var j &#x3D; 0; j &lt; w; j++){
          this.copy[i].push(false);
        }
      }
    }else{
       for (var i &#x3D; 0; i &lt; h; i++){
        this.copy.push([]);
        for (var j &#x3D; 0; j &lt; w; j++){
          this.copy[i].push(false);
        }
       }
    }


    //iterate through the selection
    for (var i &#x3D; 0; i &lt; this.copy.length; i++) {
      for(var j &#x3D; 0; j &lt; this.copy[0].length; j++) {

        var screen_row &#x3D; screen_i + i;
        var draft_row &#x3D; this.weave.visibleRows[screen_row];
        var col &#x3D; draft_j + j;

        switch(this.selection.target.id){
          case &#x27;drawdown&#x27;:
              this.copy[i][j]&#x3D; this.weave.isUp(draft_row, col);
          break;
          case &#x27;threading&#x27;:
              var frame &#x3D; this.weave.loom.frame_mapping[screen_row];
              this.copy[i][j]&#x3D; this.weave.loom.isInFrame(col,frame);

          break;
          case &#x27;treadling&#x27;:
              this.copy[i][j] &#x3D; this.weave.loom.isInTreadle(screen_row,col);
          break;
          case &#x27;tieups&#x27;:
              var frame &#x3D; this.weave.loom.frame_mapping[screen_row];
              this.copy[i][j] &#x3D; this.weave.loom.hasTieup(frame, col);;
          break;  
          case &#x27;warp-systems&#x27;:
              this.copy[i][j]&#x3D; (this.weave.colSystemMapping[col] &#x3D;&#x3D; i);
          break;
          case &#x27;weft-systems&#x27;:
              this.copy[i][j]&#x3D; (this.weave.rowSystemMapping[draft_row] &#x3D;&#x3D; j);
          break;
          case &#x27;warp-materials&#x27;:
              this.copy[i][j]&#x3D; (this.weave.colShuttleMapping[col] &#x3D;&#x3D; i);
          break;
          case &#x27;weft-materials&#x27;:
              this.copy[i][j]&#x3D; (this.weave.rowShuttleMapping[draft_row] &#x3D;&#x3D; j);
          break;
          default:
          break;
        }

      }
    }

    this.onNewSelection.emit(this.copy);



  }





  private drawWeftMaterialCell(cx, i){
        var dims &#x3D; this.render.getCellDims(&quot;base&quot;);
        var margin &#x3D; this.render.zoom/50;

        cx.fillStyle &#x3D; this.weave.getColor(i);

        if(i &#x3D;&#x3D; this.weave.wefts-1) cx.fillRect(margin, (dims.h*i)+margin, dims.w, dims.h-(margin*2));
        else cx.fillRect(margin, (dims.h*i)+margin, dims.w, dims.h-(margin));
  
  }


  private drawWeftMaterials(cx, canvas){

      var dims &#x3D; this.render.getCellDims(&quot;base&quot;);
      var margin &#x3D; this.render.zoom/50;
      var top &#x3D; dims.h;

      cx.clearRect(0,0, cx.canvas.width, cx.canvas.height);


      canvas.width &#x3D;  dims.w;
      canvas.height &#x3D; this.weave.visibleRows.length * dims.h;

      cx.fillStyle &#x3D; &quot;white&quot;;
      cx.fillRect(0,0,canvas.width,this.weave.visibleRows.length*dims.h);

      for(var i &#x3D; 0 ; i &lt; this.weave.visibleRows.length; i++){
          this.drawWeftMaterialCell(cx, i);        
      }


  }

  private drawWarpMaterialCell(cx, j){


        var dims &#x3D; this.render.getCellDims(&quot;base&quot;);
        var margin &#x3D; this.render.zoom/50;
        cx.fillStyle &#x3D; this.weave.getColorCol(j);

        if(j &#x3D;&#x3D; this.weave.warps-1) cx.fillRect((dims.w*j)+margin, 0, dims.w-(margin*2), (dims.h) - margin);
        else cx.fillRect( (dims.w*j)+margin, 0, dims.w-margin, (dims.h) - margin);
  
  }


  private drawWarpMaterials(cx,canvas){

    var dims &#x3D; this.render.getCellDims(&quot;base&quot;);
    var margin &#x3D; this.render.zoom/50;

    this.warpMaterialsCanvas.width &#x3D;  this.weave.warps * dims.w;
    this.warpMaterialsCanvas.height &#x3D; dims.h;

    cx.fillStyle &#x3D; &quot;white&quot;;
    cx.fillRect(0,0,canvas.width,canvas.height);
  

    for(var j &#x3D; 0; j &lt; this.weave.warps; j++){
      this.drawWarpMaterialCell(cx, j);
    } 

  }




  private drawWeftSelectorCell(cx, i){

        var dims &#x3D; this.render.getCellDims(&quot;base&quot;);
        var margin &#x3D; this.render.zoom/50;

        cx.fillStyle &#x3D; &quot;#303030&quot;;
        if(i &#x3D;&#x3D; this.weave.wefts-1) cx.fillRect(margin, (dims.h*i)+margin, dims.w, dims.h-(margin*2));
        else cx.fillRect(margin, (dims.h*i)+margin, dims.w, dims.h-(margin));
         
         cx.fillStyle &#x3D; &quot;#ffffff&quot;;  
         cx.font &#x3D; &quot;10px Arial&quot;;
         cx.fillText(this.weave.getWeftSystemCode(i), dims.w/3, (dims.h*i)+3*dims.h/4);

  }


  private drawWeftSystems(cx, canvas){

    

      var dims &#x3D; this.render.getCellDims(&quot;base&quot;);
      var margin &#x3D; this.render.zoom/50;
      var top &#x3D; dims.h;

      cx.clearRect(0,0, cx.canvas.width, cx.canvas.height);


      canvas.width &#x3D;  dims.w;
      canvas.height &#x3D; this.weave.visibleRows.length * dims.h;

      cx.fillStyle &#x3D; &quot;white&quot;;
      cx.fillRect(0,0,canvas.width,this.weave.visibleRows.length*dims.h);

      for(var i &#x3D; 0 ; i &lt; this.weave.visibleRows.length; i++){
          this.drawWeftSelectorCell(cx, i);        
      }


  }

  private drawWarpSelectorCell(cx, j){


        var dims &#x3D; this.render.getCellDims(&quot;base&quot;);
        var margin &#x3D; this.render.zoom/50;
        cx.fillStyle &#x3D; &quot;#303030&quot;;

        if(j &#x3D;&#x3D; this.weave.warps-1) cx.fillRect((dims.w*j)+margin, 0, dims.w-(margin*2), (dims.h) - margin);
        else cx.fillRect( (dims.w*j)+margin, 0, dims.w-margin, (dims.h) - margin);
  
         cx.fillStyle &#x3D; &quot;#ffffff&quot;;  
         cx.font &#x3D; &quot;10px Arial&quot;;
         cx.fillText(this.weave.getWarpSystemCode(j),(dims.w*j)+dims.w/3, dims.w-(margin*3));


  }


  private drawWarpSystems(cx,canvas){

    var dims &#x3D; this.render.getCellDims(&quot;base&quot;);
    var margin &#x3D; this.render.zoom/50;

    this.warpSystemsCanvas.width &#x3D;  this.weave.warps * dims.w;
    this.warpSystemsCanvas.height &#x3D; dims.h;

    cx.fillStyle &#x3D; &quot;white&quot;;
    cx.fillRect(0,0,canvas.width,canvas.height);
  

    for(var j &#x3D; 0; j &lt; this.weave.warps; j++){
      this.drawWarpSelectorCell(cx, j);
    } 

  }


  /**
   * Draws the grid lines onto the canvas.
   * @extends WeaveDirective
   * @returns {void}
   */
  private drawBlank(cx,canvas) {

    cx.fillStyle &#x3D; &quot;#3d3d3d&quot;;
    cx.fillRect(0,0,canvas.width,canvas.height);
   
  }

  /**
   * Draws the grid lines onto the canvas.
   * @extends WeaveDirective
   * @returns {void}
   */
  private drawGrid(cx,canvas) {
    var i,j;

    var dims &#x3D; this.render.getCellDims(&quot;base&quot;);


    if(canvas.id&#x3D;&#x3D;&#x3D; &quot;threading&quot;){
      cx.fillStyle &#x3D; &quot;white&quot;;
      cx.fillRect(0,0,canvas.width,canvas.height);
      cx.fillStyle &#x3D; &quot;#cccccc&quot;;
      cx.fillRect(0, 0, canvas.width, (this.weave.loom.num_frames - this.weave.loom.min_frames)*dims.h);
    }
    else if (canvas.id&#x3D;&#x3D;&#x3D; &quot;treadling&quot;){
      cx.fillStyle &#x3D; &quot;white&quot;;
      cx.fillRect(0,0,canvas.width,canvas.height);
      cx.fillStyle &#x3D; &quot;#cccccc&quot;;
      var start &#x3D; this.weave.loom.min_treadles * dims.w;
      cx.fillRect(start, 0, canvas.width - start, canvas.height);

    }
    else if (canvas.id&#x3D;&#x3D;&#x3D; &quot;tieups&quot;){
      cx.fillStyle &#x3D; &quot;white&quot;;
      cx.fillRect(0,0,canvas.width,canvas.height);
      cx.fillStyle &#x3D; &quot;#cccccc&quot;;
      var start &#x3D; this.weave.loom.min_treadles * dims.w;
      cx.fillRect(start, 0, canvas.width - start, canvas.height);
      cx.fillRect(0, 0, canvas.width, (this.weave.loom.num_frames - this.weave.loom.min_frames)*dims.h);

    }


    cx.fillStyle&#x3D;&quot;black&quot;;
    cx.lineWidth &#x3D; .5;
    cx.lineCap &#x3D; &#x27;round&#x27;;
    cx.strokeStyle &#x3D; &#x27;#000&#x27;;

    //only draw the lines if the zoom is big enough to render them well
    if(this.render.zoom &gt; 25){

     //cx.lineWidth &#x3D; this.render.zoom/100;

     //cx.setLineDash([dims.w/20,dims.w/4]);

      // draw vertical lines
      for (i &#x3D; 0; i &lt;&#x3D; canvas.width; i +&#x3D; dims.w) {
        //if(canvas.id &#x3D;&#x3D;&#x3D; &quot;treadling&quot; &amp;&amp; i &#x3D;&#x3D;&#x3D; (this.weave.loom.min_treadles)*dims.w) cx.setLineDash([0]);
        //else if(canvas.id &#x3D;&#x3D;&#x3D; &quot;tieups&quot; &amp;&amp; i &#x3D;&#x3D;&#x3D; (this.weave.loom.min_treadles)*dims.w) cx.setLineDash([0]);
        
        //else  cx.setLineDash([dims.w/20,dims.w/4]);
        
          if(canvas.id &#x3D;&#x3D; &#x27;drawdown&#x27;){
            if(i &gt; dims.w &amp;&amp; i &lt; canvas.width - dims.w){
            cx.beginPath();
            cx.moveTo(i, dims.h);
            cx.lineTo(i, canvas.height-dims.h);
            cx.stroke();
            }
          }else{
            cx.beginPath();
            cx.moveTo(i, 0);
            cx.lineTo(i, canvas.height);
            cx.stroke();
          }
        

      }

      // draw horizontal lines
      for (i &#x3D; 0; i &lt;&#x3D; canvas.height; i +&#x3D; dims.h) {
        //if(canvas.id &#x3D;&#x3D;&#x3D; &quot;threading&quot; &amp;&amp; i &#x3D;&#x3D;&#x3D; (this.weave.loom.num_frames - this.weave.loom.min_frames)*dims.h) cx.setLineDash([0]);
        //else if(canvas.id &#x3D;&#x3D;&#x3D; &quot;tieups&quot; &amp;&amp; i &#x3D;&#x3D;&#x3D; (this.weave.loom.num_frames - this.weave.loom.min_frames)*dims.h) cx.setLineDash([0]);
        //else  cx.setLineDash([dims.w/20,dims.w/4]);

        if(canvas.id &#x3D;&#x3D; &quot;drawdown&quot;){
          if(i &gt; dims.h &amp;&amp; i &lt; canvas.height - dims.h){
          cx.beginPath();
          cx.moveTo(dims.w, i);
          cx.lineTo(canvas.width-dims.w, i);
          cx.stroke();
          }
        }else{
          cx.beginPath();
          cx.moveTo(0, i);
          cx.lineTo(canvas.width, i);
          cx.stroke();
        }
      }


      // reset the line dash.
      //cx.setLineDash([0]);
    }
  }




  /**
   * Change shuttle of row to next in list.
   * @extends WeaveComponent
   * @param {Point} the point of the interaction
   * @returns {void}
   */
  private drawOnWeftSelectors( currentPos: Point ) {

    var dims &#x3D; this.render.getCellDims(&quot;base&quot;);

    var updates;

    if (!this.cx || !currentPos) { return; }

    var draft_row &#x3D; currentPos.i; //need to offset this due to canvas padding
    var screen_row &#x3D; currentPos.si;

    if(screen_row &lt; 0){ return; }

    const len &#x3D; this.weave.weft_systems.length;
    var system_id &#x3D; this.weave.rowSystemMapping[draft_row];


    var newSystem &#x3D; (system_id + 1) % len;

    this.weave.rowSystemMapping[draft_row] &#x3D; newSystem;

    this.weave.updateSystemVisibility(&#x27;weft&#x27;);

    this.redraw({weft_systems: true});



  }


    /**
   * Change shuttle of row to next in list.
   * @extends WeaveComponent
   * @param {Point} the point of the interaction
   * @returns {void}
   */
  private drawOnWeftMaterials( currentPos: Point ) {

    var dims &#x3D; this.render.getCellDims(&quot;base&quot;);
    var updates;

    if (!this.cx || !currentPos) { return; }

    var draft_row &#x3D; currentPos.i; //need to offset this due to canvas padding
    var screen_row &#x3D; currentPos.si;

    if(screen_row &lt; 0){ return; }

    if(this.design_mode.name &#x3D;&#x3D;&#x3D; &#x27;material&#x27;){
      this.weave.rowShuttleMapping[draft_row] &#x3D; parseInt(this.design_mode.id);
    }else{
      const len &#x3D; this.weave.shuttles.length;
      var shuttle_id &#x3D; this.weave.rowShuttleMapping[draft_row];
      var newShuttle &#x3D; (shuttle_id + 1) % len;
      this.weave.rowShuttleMapping[draft_row] &#x3D; newShuttle;
    }
    this.redraw({weft_materials: true, drawdown:true});

  }

  /**
   * Change column to next row in the list
   * @extends WeaveComponent
   * @param {Point} the point of the interaction
   * @returns {void}
   */
  private drawOnWarpSelectors( currentPos: Point ) {

    var dims &#x3D; this.render.getCellDims(&quot;base&quot;);

    if (!this.cxWarpSystems || !currentPos) { return; }

    var col &#x3D; currentPos.j; //need to offset this due to canvas padding

    if(col &lt; 0){ return; }


    const len &#x3D; this.weave.warp_systems.length;
    var system_id &#x3D; this.weave.colSystemMapping[col];
    var newSys_id &#x3D; (system_id + 1) % len;
    this.weave.colSystemMapping[col] &#x3D; newSys_id;

    this.weave.updateSystemVisibility(&#x27;warp&#x27;);
    this.drawWarpSelectorCell(this.cxWarpSystems,(col));
    this.redraw({warp_systems: true});
  }


  /**
   * Change column to next row in the list
   * @extends WeaveComponent
   * @param {Point} the point of the interaction
   * @returns {void}
   */
  private drawOnWarpMaterials( currentPos: Point ) {

    var dims &#x3D; this.render.getCellDims(&quot;base&quot;);

    if (!this.cxWarpSystems || !currentPos) { return; }

    var col &#x3D; currentPos.j; //need to offset this due to canvas padding

    if(col &lt; 0){ return; }


    if(this.design_mode.name &#x3D;&#x3D;&#x3D; &#x27;material&#x27;){
        this.weave.colShuttleMapping[col] &#x3D; parseInt(this.design_mode.id);
    }else{
      const len &#x3D; this.weave.shuttles.length;
      var shuttle_id &#x3D; this.weave.colShuttleMapping[col];
      var newShuttle_id &#x3D; (shuttle_id + 1) % len;
      this.weave.colShuttleMapping[col] &#x3D; newShuttle_id;
    }

  
    this.drawWarpSelectorCell(this.cxWarpMaterials,col);
    this.redraw({warp_materials:true, drawdown:true}); //full redraw or just this column?
  }

 /**
   * Draws, inverts, or erases a single rectangle on the mask. 
   * @extends WeaveDirective
   * @param {Point} currentPos - the current position of the mouse within draft.
   * @returns {void}
   */
  private drawOnMask( currentPos: Point ) {
    var updates;
    var val;

    if (!this.cx || !currentPos) { return; }

    // Set the heddles based on the brush.
    switch (this.design_mode.name) {
      case &#x27;maskpoint&#x27;:
        val &#x3D; true;
        break;
      case &#x27;maskerase&#x27;:
        val &#x3D; false;
        break;
      case &#x27;maskinvert&#x27;:
         val &#x3D; !this.weave.isMask(currentPos.i,currentPos.j);
        break;        
      default:
        break;
    }

    this.weave.setMask(currentPos.i,currentPos.j,val);
    this.drawCell(this.cx,currentPos.si, currentPos.j, &quot;mask&quot;);
    this.redraw({mask: true});
  }





  /**
   * Called when a single point &quot;draw&quot; event is called on the
   * @extends WeaveDirective
   * @param {Point} currentPos - the current position of the mouse within draft.
   * @returns {void}
   */

  private drawOnDrawdown( currentPos: Point) {

    var updates;
    var val  &#x3D; false;


    if (!this.cx || !currentPos) { return; }


    if(this.weave.hasCell(currentPos.i, currentPos.j)){

      // Set the heddles based on the brush.
      switch (this.design_mode.name) {
        case &#x27;up&#x27;:
          val &#x3D; true;
          this.weave.setHeddle(currentPos.i,currentPos.j,val);
          break;
        case &#x27;down&#x27;:
          val &#x3D; false;
          this.weave.setHeddle(currentPos.i,currentPos.j,val);
          break;
        case &#x27;toggle&#x27;:
           val &#x3D; !this.weave.isUp(currentPos.i,currentPos.j);
           this.weave.setHeddle(currentPos.i,currentPos.j,val);

          break;
        case &#x27;material&#x27;:
          this.drawOnWeftMaterials(currentPos);
          this.drawOnWarpMaterials(currentPos)
        break;        
        default:
          break;
      }


      // if(this.render.getCurrentView() &#x3D;&#x3D; &#x27;pattern&#x27;){
      //   this.drawCell(this.cx,currentPos.si, currentPos.j, &quot;drawdown&quot;);
      // }else{
      //   this.drawYarn(currentPos.si, currentPos.j, val);
      // }

        
      if(this.design_mode.name !&#x3D;&#x3D; &#x27;material&#x27;)
        if(this.render.showingFrames()) this.updateLoomFromDraft(currentPos);
      
      this.redraw({drawdown:true, loom:true});
      
    }
    
  }

  /**
   * Draws or erases a single rectangle on the canvas. Updates the tieups.
   * @extends WeaveDirective
   * @param {Point} currentPos - the current position of the mouse within draft.
   * @returns {void}
   */
  private drawOnTieups( currentPos: Point ) {
    var updates;
    var val &#x3D; false;
    
    if (!this.cxTieups || !currentPos) { return; }

    if (this.weave.loom.inTieupRange(currentPos.i, currentPos.j)) {
      switch (this.design_mode.name) {
        case &#x27;up&#x27;:
            val &#x3D; true;
          break;
        case &#x27;down&#x27;:
          val &#x3D; false;
          break;
        case &#x27;toggle&#x27;:
          val &#x3D; !this.weave.loom.tieup[currentPos.i][currentPos.j];
          break;
        default:
          break;
      }
    
    updates &#x3D; this.weave.loom.updateTieup(currentPos.i, currentPos.j, val);
    this.weave.updateDraftFromTieup(updates);
    //this.drawCell(this.cxTieups, currentPos.i, currentPos.j, &quot;tieup&quot;);
    this.redraw({drawdown:true, loom:true});
    
    
    }
  }

  /**
   * Draws or erases a single rectangle on the canvas. Updates the threading.
   * @extends WeaveDirective
   * @param {Point} currentPos - the current position of the mouse within draft.
   * @returns {void}
   */
  private drawOnThreading( currentPos: Point ) {
    if (!this.cxThreading || !currentPos) { return; }

    if (this.weave.loom.inThreadingRange(currentPos.i, currentPos.j)){

      var val &#x3D; false;

      switch (this.design_mode.name) {
        case &#x27;up&#x27;:
          val &#x3D; true;
          break;
        case &#x27;down&#x27;:
          val &#x3D; false;
          break;
        case &#x27;toggle&#x27;:
          val &#x3D; !(this.weave.loom.threading[currentPos.j] &#x3D;&#x3D; currentPos.i);
          break;
        default:
          break;
      }

  
      var updates &#x3D; this.weave.loom.updateThreading(currentPos.i, currentPos.j, val);
      this.weave.updateDraftFromThreading(updates);
      
      if(this.weave.loom.min_frames &lt; this.weave.loom.num_frames){
        this.weave.loom.updateUnused(this.weave.loom.threading, this.weave.loom.min_frames, this.weave.loom.num_frames, &quot;threading&quot;)
      }  

      this.redraw({drawdown:true, loom:true});

      //temporarily disabled, as it causes errors, for now, just redraw the whole state
      // for(var u in updates){
      //   this.drawCell(this.cxThreading,updates[u].i, updates[u].j, &quot;threading&quot;);
      // }
          
     // if(unused) this.redrawLoom();

    }
  }


  /**
   * Draws or erases a single rectangle on the canvas. Updates the treadling.
   * @extends WeaveDirective
   * @param {Point} currentPos - the current position of the mouse within draft.
   * @returns {void}
   */
  private drawOnTreadling( currentPos: Point ) {


    if (!this.cxTreadling || !currentPos) { return; }
    
    var val &#x3D; false;

    if(this.weave.loom.inTreadlingRange(currentPos.i, currentPos.j)){
      switch (this.design_mode.name) {
        case &#x27;up&#x27;:
          val &#x3D; true;
          break;
        case &#x27;down&#x27;:
          val &#x3D; false;
          break;
        case &#x27;toggle&#x27;:
          val &#x3D; !(this.weave.loom.treadling[currentPos.i] &#x3D;&#x3D;&#x3D; currentPos.j);
          break;
        default:
          break;
      }


      //this updates the value in the treadling
      var updates &#x3D; this.weave.loom.updateTreadling(currentPos.i, currentPos.j, val);
      this.weave.updateDraftFromTreadling(updates);

      // for(var u in updates){
      //   this.drawCell(this.cxTreadling,updates[u].i, updates[u].j, &quot;treadling&quot;);
      // }
      if( this.weave.loom.min_treadles &lt;  this.weave.loom.num_treadles){
        this.weave.loom.updateUnused(this.weave.loom.treadling, this.weave.loom.min_treadles, this.weave.loom.num_treadles, &quot;treadling&quot;)
      }
      //if(unused) this.redrawLoom();
      this.redraw({drawdown:true, loom:true});

    }
   }

   /***
   This function takes a point added to the draft and updates and redraws the loom states
   It takes current position of a point on the currently visible draft
   ***/
   private updateLoomFromDraft(currentPos):boolean{

    if(!this.render.showingFrames()) return false;

    this.weave.updateLoomFromDraft(currentPos);
    // var updates &#x3D; this.weave.loom.updateFromDrawdown(currentPos.i,currentPos.j, this.weave.pattern);
    // var u_threading &#x3D; this.weave.loom.updateUnused(this.weave.loom.threading, this.weave.loom.min_frames, this.weave.loom.num_frames, &quot;threading&quot;);
    // var u_treadling &#x3D; this.weave.loom.updateUnused(this.weave.loom.treadling, this.weave.loom.min_treadles, this.weave.loom.num_treadles, &quot;treadling&quot;);

    // return true;
      
   }

  /**
   * Fills in selected area of canvas. Updates the pattern within selection.
   * @extends WeaveDirective
   * @param {Selection} selection - defined user selected area to fill.
   * @param {Array&lt;Array&lt;boolean&gt;&gt;} - the pattern used to fill the area.
   * @param {string} - the type of logic used to fill selected area.
   * @returns {void}
   */
  // private fillArea(
  //   selection: Selection, 
  //   pattern: Array&lt;Array&lt;boolean&gt;&gt;, 
  //   type: string
  // ) {

  //   console.log(&quot;fill area called&quot;);
  //   console.log(selection, pattern, type);

  //   var dims &#x3D; this.render.getCellDims(&quot;base&quot;);
  //   var updates &#x3D; [];
    
  //   var screen_i &#x3D; Math.min(selection.start.si, selection.end.si)
  //   const draft_i &#x3D; Math.min(selection.start.i, selection.end.i);
  //   const draft_j &#x3D; Math.min(selection.start.j, selection.end.j);
  
  //   const rows &#x3D; pattern.length;
  //   const cols &#x3D; pattern[0].length;

  //   var w,h;

  //   w &#x3D; Math.ceil(selection.width);
  //   h &#x3D; Math.ceil(selection.height);


  //   if(selection.target.id &#x3D;&#x3D;&#x3D; &quot;warp-systems&quot;){
  //     h &#x3D; pattern.length;
  //     screen_i &#x3D; 0;
  //   } 
  //   if(selection.target.id &#x3D;&#x3D;&#x3D; &quot;weft-systems&quot;){
  //     w &#x3D; pattern[0].length;
  //   } 

  //   if(selection.target.id &#x3D;&#x3D;&#x3D; &quot;warp-materials&quot;){
  //      h &#x3D; pattern.length;
  //      screen_i &#x3D; 0;
  //   }
  //   if(selection.target.id &#x3D;&#x3D;&#x3D; &quot;weft-materials&quot;){
  //     w &#x3D; pattern[0].length;
  //   } 

  //   //cycle through each visible row/column of the selection
  //   for (var i &#x3D; 0; i &lt; h; i++ ) {
  //     for (var j &#x3D; 0; j &lt; w; j++ ) {

  //       var row &#x3D; i + screen_i;
  //       var col &#x3D; j + draft_j;


  //       var temp &#x3D; pattern[i % rows][j % cols];
       
  //       var prev &#x3D; false; 
  //       switch(selection.target.id){

  //         case &#x27;drawdown&#x27;:
  //             var draft_row &#x3D; this.weave.visibleRows[row];
  //             prev &#x3D; this.weave.pattern[draft_row][col].isUp();

  //         break;
  //         case &#x27;threading&#x27;:
  //             var frame &#x3D; this.weave.loom.frame_mapping[row];
  //             prev &#x3D; this.weave.loom.isInFrame(col, frame);
          
  //         break;
  //         case &#x27;treadling&#x27;:
  //             var draft_row &#x3D; this.weave.visibleRows[row];
  //             prev &#x3D; (this.weave.loom.isInTreadle(draft_row, col)); 
  //         break;
  //         case &#x27;tieups&#x27;:
  //             var frame &#x3D; this.weave.loom.frame_mapping[row];
  //             prev &#x3D; this.weave.loom.hasTieup(frame,col); 
          
  //         break;
  //         default:
  //         break;
  //       }

  //       if (prev !&#x3D;&#x3D; null){

  //         var val &#x3D; false;
  //         switch (type) {
  //           case &#x27;invert&#x27;:
  //            val &#x3D; !temp;
  //             break;
  //           case &#x27;mask&#x27;:
  //            val &#x3D; temp &amp;&amp; prev;
  //             break;
  //           case &#x27;mirrorX&#x27;:
  //             val &#x3D; pattern[(h - i - 1) % rows][j % cols];
  //             break;
  //           case &#x27;mirrorY&#x27;:
  //             val &#x3D; pattern[i % rows][(w - j - 1) % cols];
  //             break;
  //           default:
  //             val &#x3D; temp;
  //             break;
  //         }


  //         var updates &#x3D; [];

  //         switch(selection.target.id){
           
  //          case &#x27;drawdown&#x27;:
  //          var draft_row &#x3D; this.weave.visibleRows[row];

  //           if(this.weave.hasCell(draft_row,col)){

  //               var p &#x3D; new Point(); 
  //               p.si &#x3D; row;
  //               p.i &#x3D; this.weave.visibleRows[row];
  //               p.j &#x3D; col;
              
  //               this.weave.setHeddle(p.i,p.j,val);
  //               this.updateLoomFromDraft(p);
  //             }

  //           break;
            
  //           case &#x27;threading&#x27;:
  //           var frame &#x3D; this.weave.loom.frame_mapping[row];

  //             if(this.weave.loom.inThreadingRange(frame,col)){ 
  //               updates &#x3D; this.weave.loom.updateThreading(frame, col, val);
  //               this.weave.updateDraftFromThreading(updates); 
  //             }
  //           break;

  //           case &#x27;treadling&#x27;:
              
  //            var draft_row &#x3D; this.weave.visibleRows[row];
  //            if(this.weave.loom.inTreadlingRange(draft_row,col)){ 
  //               updates &#x3D; this.weave.loom.updateTreadling(draft_row, col, val);
  //               this.weave.updateDraftFromTreadling(updates);
  //             }
  //           break;
  //           case &#x27;tieups&#x27;:
  //             var frame &#x3D; this.weave.loom.frame_mapping[row];

  //             if(this.weave.loom.inTieupRange(frame, col)){
  //               updates &#x3D; this.weave.loom.updateTieup(frame, col, val);
  //               this.weave.updateDraftFromTieup(updates);
  //             }
  //           break;
  //           case &#x27;weft-systems&#x27;:
  //             var draft_row &#x3D; this.weave.visibleRows[row];
  //             val &#x3D; pattern[i % rows][j % cols];
  //             if(val &amp;&amp; col &lt; this.weave.weft_systems.length) this.weave.rowSystemMapping[draft_row] &#x3D; col;
            
  //           break;
  //           case &#x27;warp-systems&#x27;:
  //             val &#x3D; pattern[i % rows][j % cols];
  //             if(val &amp;&amp; row &lt; this.weave.warp_systems.length){
  //                 this.weave.colSystemMapping[col] &#x3D; row;
  //             }
  //           break;
  //           case &#x27;weft-materials&#x27;:
  //             var draft_row &#x3D; this.weave.visibleRows[row];
  //             val &#x3D; pattern[i % rows][j % cols];
  //             if(val &amp;&amp; col &lt; this.weave.shuttles.length) this.weave.rowShuttleMapping[draft_row] &#x3D; col;
            
  //           break;
  //           case &#x27;warp-materials&#x27;:
  //             val &#x3D; pattern[i % rows][j % cols];
  //             if(val &amp;&amp; row &lt; this.weave.shuttles.length){
  //                 this.weave.colShuttleMapping[col] &#x3D; row;
  //             }
  //           break;
  //           default:
  //           break;
  //         }
  //       }


  //     }
  //   }

  //   var u_threading &#x3D; this.weave.loom.updateUnused(this.weave.loom.threading, this.weave.loom.min_frames, this.weave.loom.num_frames, &quot;threading&quot;);
  //   var u_treadling &#x3D; this.weave.loom.updateUnused(this.weave.loom.treadling, this.weave.loom.min_treadles, this.weave.loom.num_treadles, &quot;treadling&quot;);
  //   this.addHistoryState();
  //   this.redraw();
  //   this.redrawLoom();

  // }



  /**
   * Fills the visible regions of the mask with the stitch
   * @extends WeaveDirective
   * @param {Array&lt;Array&lt;boolean&gt;&gt;} - the pattern used to fill the area.
   * @returns {void}
   */


  private maskArea(pattern: Array&lt;Array&lt;boolean&gt;&gt;) {
   

    // var dims &#x3D; this.render.getCellDims(&quot;base&quot;);
    // var updates &#x3D; [];

    // const rows &#x3D; pattern.length;
    // const cols &#x3D; pattern[0].length;


    // //iterate through cell
    // for (var i &#x3D; 0; i &lt; this.weave.pattern.length; i++ ) {
    //   for (var j &#x3D; 0; j &lt; this.weave.pattern[0].length; j++ ) {
        
    //     var row &#x3D; this.weave.visibleRows[i];
    //     var col &#x3D; j;
    //     var temp &#x3D; pattern[i % rows][j % cols];
    //     var prev &#x3D; this.weave.mask[row][col];
    //     var val &#x3D; temp &amp;&amp; prev;

    //     var p &#x3D; new Point(); 
    //     p.i &#x3D; row;
    //     p.j &#x3D; col;
        
    //     this.weave.setHeddle(p.i,p.j,val);
    //     this.drawCell(this.cx,p.i, p.j, &quot;drawdown&quot;);
    //   }
    // }

   // this.redraw();

   }


//   //This function draws whatever the current value is at screen coordinates cell i, J
// private drawYarn(i, j, value){

//   if(this.weave.yarn_paths.length &#x3D;&#x3D; 0) return;
      
//       let p &#x3D; this.weave.yarn_paths[i][j+1];
//       let s &#x3D; this.weave.shuttles[p.getShuttle()];
//       p.setHeddle(value);

//       //check no poles

//       //no matter what, draw this cell up or down
//       if(p.isUp() &amp;&amp; this.render.isFront() || !p.isUp() &amp;&amp; !this.render.isFront()){
//           this.drawWeftUnder(i, j, s);
//         }
//         else{
//           this.drawWeftOver(i, j, s);
//       }

//   }


//This function draws whatever the current value is at screen coordinates cell i, J
  private drawCell(cx, i, j, type){


    var base_dims &#x3D; this.render.getCellDims(&quot;base&quot;);
    var base_fill &#x3D; this.render.getCellDims(&quot;base_fill&quot;);
    var has_mask &#x3D; false;
    var is_up &#x3D; false;
    var color &#x3D; &quot;#FFFFFF&quot;;
    var beyond &#x3D; false;

    var top &#x3D; 0; 
    var left &#x3D; 0;



    switch(type){
      case &#x27;drawdown&#x27;:
      case &#x27;mask&#x27;:
        var row &#x3D; this.weave.visibleRows[i];
        
        is_up &#x3D; this.weave.isUp(row,j);
        if(!this.render.isFront()) is_up &#x3D; !is_up;
        has_mask &#x3D; this.weave.isMask(row,j);

        if(is_up) color &#x3D; &quot;#333333&quot;;
        else if(has_mask) color &#x3D; &quot;#CCCCCC&quot;;

        top &#x3D; base_dims.h;
        left &#x3D; base_dims.w;

      break;
      case &#x27;threading&#x27;:
        if(!this.render.isFront()) return;
        var frame &#x3D; this.weave.loom.threading[j];
        is_up &#x3D; (frame &#x3D;&#x3D; i);
        beyond &#x3D; frame &gt; this.weave.loom.min_frames; 
        has_mask &#x3D; false;
        
        if(is_up)  color &#x3D; &quot;#333333&quot;;
        i &#x3D; this.weave.loom.frame_mapping[frame];

      break;
      case &#x27;tieup&#x27;:
        if(!this.render.isFront()) return;
        is_up &#x3D; (this.weave.loom.tieup[i][j]);
        beyond &#x3D; i &gt; this.weave.loom.min_frames; 
        has_mask &#x3D; false;
        if(is_up) color &#x3D; &quot;#333333&quot;;
        i &#x3D; this.weave.loom.frame_mapping[i];

      break;
      case &#x27;treadling&#x27;:
        if(!this.render.isFront()) return;
        //i and j is going to come from the UI which is only showing visible rows
        var row &#x3D; this.weave.visibleRows[i];
        beyond &#x3D; this.weave.loom.treadling[row] &gt; this.weave.loom.min_treadles; 
        is_up &#x3D; (this.weave.loom.treadling[row] &#x3D;&#x3D; j);
        has_mask &#x3D; false;
        if(is_up)  color &#x3D; &quot;#333333&quot;;

      break;

    }

     //cx.fillStyle &#x3D; color;
     cx.fillStyle &#x3D; color;
     cx.fillRect(left+j*base_dims.w + base_fill.x, top+i*base_dims.h + base_fill.y, base_fill.w, base_fill.h);


  }

  /**
   * Redraws one row to avoid drawing the entire canvas.
   * @extends WeaveDirective
   * @returns {void}
   */
  private redrawRow(y, i, cx) {
 
    for (var j &#x3D; 0; j &lt; this.weave.warps; j++) {
      this.drawCell(this.cx, i, j, &quot;drawdown&quot;);
    }
  }

  //   /**
  //  * Redraws one row to avoid drawing the entire canvas.
  //  * @extends WeaveDirective
  //  * @returns {void}
  //  */
  private redrawCol(x, i,cx) {
    // var color &#x3D; &#x27;#000000&#x27;

    // // Gets color of col.
    // color &#x3D; this.weave.getColorCol(i);
    // cx.fillStyle &#x3D; color;
  }




  public drawWeftLeftUp(top, left, shuttle){
      var dims &#x3D; this.render.getCellDims(&quot;base&quot;);
      var cx &#x3D; this.cx;
      var view &#x3D; this.render.getCurrentView();

      if(left &lt; -1 || left &gt; this.weave.warps) return;

      left &#x3D; (left+1)*dims.w;
      top &#x3D;  (top + 1) * dims.h;

      top +&#x3D; dims.h/2;


      cx.lineWidth &#x3D; shuttle.getThickness()/100 * .9*dims.h;
      cx.strokeStyle &#x3D; (view &#x3D;&#x3D;&#x3D; &quot;yarn&quot; &amp;&amp; shuttle.type &#x3D;&#x3D;&#x3D; 0) ? shuttle.getColor()+&quot;10&quot; : shuttle.getColor();
      cx.shadowColor &#x3D; &#x27;white&#x27;;
      cx.shadowOffsetX &#x3D; 0;
      cx.shadowOffsetY &#x3D; .5;

      cx.beginPath();
      cx.moveTo(left,top);
      cx.arcTo(left+dims.w/2, top, left+dims.w/2, top - dims.h/2, dims.w/2);
      cx.stroke();
  }

  public drawWeftRightUp(top, left, shuttle){
      //console.log(&quot;draw right up&quot;, top, left);
      var dims &#x3D; this.render.getCellDims(&quot;base&quot;);
      var cx &#x3D; this.cx;
      var view &#x3D; this.render.getCurrentView();

      if(left &lt; -1 || left &gt; this.weave.warps) return;

      left &#x3D; (left+1)*dims.w;
      top &#x3D;  (top + 1) * dims.h;

      top +&#x3D; dims.h/2;


      cx.lineWidth &#x3D; shuttle.getThickness()/100 * .9*dims.h;
      cx.strokeStyle &#x3D; (view &#x3D;&#x3D;&#x3D; &quot;yarn&quot; &amp;&amp; shuttle.type &#x3D;&#x3D;&#x3D; 0) ? shuttle.getColor()+&quot;10&quot; : shuttle.getColor();
      cx.shadowColor &#x3D; &#x27;white&#x27;;
      cx.shadowOffsetX &#x3D; 0;
      cx.shadowOffsetY &#x3D; .5;

      cx.beginPath();
      cx.moveTo(left+dims.w,top);
      cx.arcTo(left+dims.w/2, top, left+dims.w/2, top-dims.h/2, dims.w/2);
      cx.stroke();
  }

  public drawWeftBottomLeft(top, left, shuttle){
      //console.log(&quot;draw bottom left&quot;, top, left);
      var dims &#x3D; this.render.getCellDims(&quot;base&quot;);
      var cx &#x3D; this.cx;
      var view &#x3D; this.render.getCurrentView();

      if(left &lt; -1 || left &gt; this.weave.warps) return;

      left &#x3D; (left+1)*dims.w;
      top &#x3D;  (top + 1) * dims.h;

      top +&#x3D; dims.h/2;


      cx.lineWidth &#x3D; shuttle.getThickness()/100 * .9*dims.h;
      cx.strokeStyle &#x3D; (view &#x3D;&#x3D;&#x3D; &quot;yarn&quot; &amp;&amp; shuttle.type &#x3D;&#x3D;&#x3D; 0) ? shuttle.getColor()+&quot;10&quot; : shuttle.getColor();
      cx.shadowColor &#x3D; &#x27;white&#x27;;
      cx.shadowOffsetX &#x3D; .5;
      cx.shadowOffsetY &#x3D; 0;

      cx.beginPath();
      cx.moveTo(left+dims.w/2,top+dims.h/2);
      cx.arcTo(left+dims.w/2, top, left, top, dims.w/2);
      cx.stroke();
  }

  public drawWeftBottomRight(top, left, shuttle){
      //console.log(&quot;draw bottom right&quot;, top, left);
      var dims &#x3D; this.render.getCellDims(&quot;base&quot;);
      var cx &#x3D; this.cx;
      var view &#x3D; this.render.getCurrentView();

      if(left &lt; -1 || left &gt; this.weave.warps) return;

      left &#x3D; (left+1)*dims.w;
      top &#x3D;  (top + 1) * dims.h;

      top +&#x3D; dims.h/2;


      cx.lineWidth &#x3D; shuttle.getThickness()/100 * .9*dims.h;
      cx.strokeStyle &#x3D; (view &#x3D;&#x3D;&#x3D; &quot;yarn&quot; &amp;&amp; shuttle.type &#x3D;&#x3D;&#x3D; 0) ? shuttle.getColor()+&quot;10&quot; : shuttle.getColor();
      cx.shadowColor &#x3D; &#x27;white&#x27;;
      cx.shadowOffsetX &#x3D; .5;
      cx.shadowOffsetY &#x3D; 0;

      cx.beginPath();
      cx.moveTo(left+dims.w/2,top+dims.h/2);
      cx.arcTo(left+dims.w/2, top, left+dims.w, top, dims.w/2);
              cx.stroke();
  }


  public drawWeftUp(top, left, shuttle){
     //console.log(&quot;draw under&quot;, top, left);
      var dims &#x3D; this.render.getCellDims(&quot;base&quot;);
      var cx &#x3D; this.cx;
      var view &#x3D; this.render.getCurrentView();

      if(left &lt; -1 || left &gt; this.weave.warps) return;

      left &#x3D; (left+1)*dims.w;
      top &#x3D;  (top + 1) * dims.h;

      left +&#x3D; dims.w/2

      var width &#x3D; shuttle.getThickness()/100 * .9*dims.w;
      cx.strokeStyle &#x3D; (view &#x3D;&#x3D;&#x3D; &quot;yarn&quot; &amp;&amp; shuttle.type &#x3D;&#x3D;&#x3D; 0) ? shuttle.getColor()+&quot;10&quot; : shuttle.getColor()
      cx.lineWidth &#x3D; width;
      cx.shadowColor &#x3D; &#x27;white&#x27;;
      cx.shadowOffsetX &#x3D; .5;
      cx.shadowOffsetY &#x3D; 0;

      cx.beginPath();
      cx.moveTo(left, top);
      cx.lineTo(left, top+dims.h);
      cx.stroke();

  }

  public drawWeftStart(top, left, shuttle){
 //console.log(&quot;draw over&quot;, top, left);
      var dims &#x3D; this.render.getCellDims(&quot;base&quot;);
      var cx &#x3D; this.cx;
      var view &#x3D; this.render.getCurrentView();

      if(left &lt; -1 || left &gt; this.weave.warps) return;

      left &#x3D; (left+1)*dims.w;
      top &#x3D;  (top + 1) * dims.h;


      top +&#x3D; dims.h/2;


      cx.lineWidth &#x3D; shuttle.getThickness()/100 * .9*dims.h;
      cx.strokeStyle &#x3D; (view &#x3D;&#x3D;&#x3D; &quot;yarn&quot; &amp;&amp; shuttle.type &#x3D;&#x3D;&#x3D; 0) ? shuttle.getColor()+&quot;10&quot; : shuttle.getColor();
      cx.fillStyle &#x3D; (view &#x3D;&#x3D;&#x3D; &quot;yarn&quot; &amp;&amp; shuttle.type &#x3D;&#x3D;&#x3D; 0) ? shuttle.getColor()+&quot;10&quot; : shuttle.getColor();


      cx.beginPath();
      var circle &#x3D; new Path2D();
      circle.arc(left+dims.w/2, top, dims.h/2, 0, 2 * Math.PI);
      cx.fill(circle);


}

public drawWeftEnd(top, left, shuttle){
 //console.log(&quot;draw over&quot;, top, left);
      var dims &#x3D; this.render.getCellDims(&quot;base&quot;);
      var cx &#x3D; this.cx;
      var view &#x3D; this.render.getCurrentView();

      if(left &lt; -1 || left &gt; this.weave.warps) return;

      left &#x3D; (left+1)*dims.w;
      top &#x3D;  (top + 1) * dims.h;


      top +&#x3D; dims.h/2;


      cx.lineWidth &#x3D; 1;
      cx.strokeStyle &#x3D; (view &#x3D;&#x3D;&#x3D; &quot;yarn&quot; &amp;&amp; shuttle.type &#x3D;&#x3D;&#x3D; 0) ? shuttle.getColor()+&quot;10&quot; : shuttle.getColor();
      cx.fillStyle &#x3D; (view &#x3D;&#x3D;&#x3D; &quot;yarn&quot; &amp;&amp; shuttle.type &#x3D;&#x3D;&#x3D; 0) ? shuttle.getColor()+&quot;10&quot; : shuttle.getColor();

      cx.beginPath();
      var circle &#x3D; new Path2D();
      circle.arc(left+dims.w/2, top, dims.h/2, 0, 2 * Math.PI);
      cx.stroke(circle);


}

 //break down all cells into the various kinds of drawings
  public drawWeftOver(top, left, shuttle){
      //console.log(&quot;draw over&quot;, top, left);
      var dims &#x3D; this.render.getCellDims(&quot;base&quot;);
      var cx &#x3D; this.cx;
      var view &#x3D; this.render.getCurrentView();

      if(left &lt; -1 || left &gt; this.weave.warps) return;

      left &#x3D; (left+1)*dims.w;
      top &#x3D;  (top + 1) * dims.h;

      top +&#x3D; dims.h/2;


      cx.lineWidth &#x3D; shuttle.getThickness()/100 * .9*dims.h;
      cx.strokeStyle &#x3D; (view &#x3D;&#x3D;&#x3D; &quot;yarn&quot; &amp;&amp; shuttle.type &#x3D;&#x3D;&#x3D; 0) ? shuttle.getColor()+&quot;10&quot; : shuttle.getColor();
      cx.shadowColor &#x3D; &#x27;white&#x27;;
      cx.shadowOffsetX &#x3D; 0;
      cx.shadowOffsetY &#x3D; .5;

      cx.beginPath();
      cx.moveTo(left, top);
      cx.lineTo(left+dims.w, top);
      cx.stroke();

  }

   //break down all cells into the various kinds of drawings
  public drawWeftUnder(top, left, shuttle){
      //console.log(&quot;draw under&quot;, top, left);
      var dims &#x3D; this.render.getCellDims(&quot;base&quot;);
      var warp_shuttle &#x3D; this.weave.shuttles[this.weave.colShuttleMapping[left]];
      var cx &#x3D; this.cx;
      var view &#x3D; this.render.getCurrentView();

      if(left &lt; -1 || left &gt; this.weave.warps) return;

      left &#x3D; (left+1)*dims.w;
      top &#x3D;  (top + 1) * dims.h;

      top +&#x3D; dims.h/2

      var warp_width &#x3D; warp_shuttle.getThickness()/100 * .9*dims.w;
      var stroke_width &#x3D; shuttle.getThickness()/100 * .9*dims.h;
      var margin &#x3D; (.9*dims.w - warp_width)/2;

      cx.lineWidth &#x3D; stroke_width;
      cx.strokeStyle &#x3D; (view &#x3D;&#x3D;&#x3D; &quot;yarn&quot; &amp;&amp; shuttle.type &#x3D;&#x3D;&#x3D; 0) ? shuttle.getColor()+&quot;10&quot; : shuttle.getColor();
      cx.shadowColor &#x3D; &#x27;white&#x27;;
      cx.shadowOffsetX &#x3D; 0;
      cx.shadowOffsetY &#x3D; .5;

      cx.fillStyle &#x3D; &quot;#393939&quot;;
      cx.fillRect(left, top-dims.h/2, dims.w, dims.h);

      cx.beginPath();
      cx.moveTo(left, top);
      cx.lineTo(left+margin, top);
      cx.stroke();
  
      cx.beginPath();
      cx.moveTo(left+margin+warp_width, top);
      cx.lineTo(left+dims.w, top);
      cx.stroke();
     
      cx.lineWidth &#x3D; warp_width;
      cx.strokeStyle &#x3D; (view &#x3D;&#x3D;&#x3D; &quot;yarn&quot; &amp;&amp; warp_shuttle.type &#x3D;&#x3D;&#x3D; 0) ? warp_shuttle.getColor()+&quot;10&quot; : warp_shuttle.getColor();

      cx.beginPath();
      cx.moveTo(left+dims/2, top-dims.h/2);
      cx.lineTo(left+dims/2, top+dims.h/2);
      cx.stroke();

  }

  //this does not draw on canvas but just rescales the canvas
  public rescale(){
  
    //var dims &#x3D; this.render.getCellDims(&quot;base&quot;);

    let dims &#x3D;{
      w: this.warpSystemsCanvas.width / this.weave.warps,
      h: this.weftSystemsCanvas.height / this.weave.visibleRows.length
    }

    let offset &#x3D; this.render.getCellDims(&quot;select&quot;);

    let scroll_left &#x3D; this.draftContainer.offsetParent.scrollLeft;
    let scroll_top &#x3D; this.draftContainer.offsetParent.scrollTop;
    let draft_width &#x3D; this.draftContainer.offsetWidth;

    let top &#x3D; 0;
    let left &#x3D; 0;


   // var scaleToFit &#x3D; Math.min(scaleX, scaleY);
    var scaleToFit &#x3D; this.render.getZoom() /50;
  //  var scaleToCover &#x3D; Math.max(scaleX, scaleY);


    if(!this.render.view_frames){

        this.threadingCanvas.height &#x3D; 0;
        this.threadingCanvas.width &#x3D; 0;

        this.treadlingCanvas.height &#x3D; 0;
        this.treadlingCanvas.width &#x3D; 0;

        this.tieupsCanvas.height &#x3D; 0;
        this.tieupsCanvas.width &#x3D; 0;

    }

    
    if(this.selection.hasSelection()){

        var x &#x3D; dims.w / 4;
        var y &#x3D; dims.h;
        var anchor &#x3D; &#x27;start&#x27;;

        //styling for the text
        if (this.selection.start.j &lt; this.selection.end.j) {
            x &#x3D; this.selection.width*dims.w ;
            anchor &#x3D; &#x27;end&#x27;;
         }

         if (this.selection.start.i &lt; this.selection.end.i) {
           y &#x3D; this.selection.height*dims.h;
         }


        var fs &#x3D; this.render.zoom * .18;
        var fw &#x3D; this.render.zoom * 9;
        this.svgEl.style.transformOrigin &#x3D; &#x27;0 0&#x27;;

        d3.select(this.svgEl)
          .style(&#x27;display&#x27;, &#x27;initial&#x27;)
          .style(&#x27;width&#x27;, (this.selection.width) * dims.w)
          .style(&#x27;height&#x27;, (this.selection.height) * dims.h)

          d3.select(this.svgEl)
          .select(&#x27;text&#x27;)
          .attr(&#x27;fill&#x27;, &#x27;#424242&#x27;)
          .attr(&#x27;font-weight&#x27;, 900)
          .attr(&#x27;font-size&#x27;, fs)
          .attr(&#x27;stroke&#x27;, &#x27;white&#x27;)
          .attr(&#x27;stroke-width&#x27;, 1)
          .attr(&#x27;x&#x27;, x)
          .attr(&#x27;y&#x27;, y)
          .attr(&#x27;text-anchor&#x27;, anchor)
          .text(this.selection.width +&#x27; x &#x27;+ this.selection.height);
    }


    //render threading
    let threading_top &#x3D; dims.h*10;

    top &#x3D; threading_top;
    left&#x3D; dims.w;

    this.threadingCanvas.style.transformOrigin &#x3D; &#x27;0 0&#x27;;
    this.threadingCanvas.style.transform &#x3D; &#x27;scale(&#x27; + scaleToFit + &#x27;) translate(&#x27;+left+&#x27;px,&#x27;+top+&#x27;px)&#x27;;

 
    if(this.selection.hasSelection() &amp;&amp; this.selection.getTargetId()&#x3D;&#x3D;&#x3D; &#x27;threading&#x27;){
      
       top +&#x3D; this.selection.getTop()*dims.h;
       left +&#x3D; this.selection.getLeft()*dims.w;
       this.svgEl.style.transform &#x3D; &#x27;scale(&#x27; + scaleToFit + &#x27;) translate(&#x27;+left+&#x27;px,&#x27;+top+&#x27;px)&#x27;;
    } 

    //render drawdown
    let drawdown_top &#x3D; threading_top + this.threadingCanvas.height + dims.h;

    top &#x3D; drawdown_top;
    left&#x3D; 0;

    this.canvasEl.style.transformOrigin &#x3D; &#x27;0 0&#x27;; //scale from top left
    this.canvasEl.style.transform &#x3D; &#x27;scale(&#x27; + scaleToFit + &#x27;) translate(&#x27;+left+&#x27;px,&#x27;+top+&#x27;px)&#x27;;

    if(this.render.isFront()) this.canvasEl.style.transform &#x3D; &#x27;scale(&#x27; + scaleToFit + &#x27;) translate(&#x27;+left+&#x27;px,&#x27;+top+&#x27;px)&#x27;;
    else  this.canvasEl.style.transform &#x3D; &#x27;scale(&#x27; + scaleToFit + &#x27;) translate(&#x27;+left+&#x27;px,&#x27;+top+&#x27;px) scale(-1, 1) translateX(-&#x27;+this.canvasEl.width+&#x27;px)&#x27;;


    if(this.selection.hasSelection() &amp;&amp; this.selection.getTargetId()&#x3D;&#x3D;&#x3D; &#x27;drawdown&#x27;){
      
       top +&#x3D; (this.selection.getTop()+1)*dims.h;
       left +&#x3D; ((this.selection.getLeft()+1)*dims.w);
       

       this.svgEl.style.transform &#x3D; &#x27;scale(&#x27; + scaleToFit + &#x27;) translate(&#x27;+left+&#x27;px,&#x27;+top+&#x27;px)&#x27;;

    } 

    //render treadling
    top &#x3D; drawdown_top + dims.h;
    left&#x3D; this.canvasEl.width+dims.w;

    this.treadlingCanvas.style.transformOrigin &#x3D; &#x27;0 0&#x27;;
    this.treadlingCanvas.style.transform &#x3D; &#x27;scale(&#x27; + scaleToFit + &#x27;) translate(&#x27;+left+&#x27;px,&#x27;+top+&#x27;px)&#x27;;
    if(this.selection.hasSelection() &amp;&amp; this.selection.getTargetId()&#x3D;&#x3D;&#x3D; &#x27;treadling&#x27;){
        
        top +&#x3D; (this.selection.getTop())*dims.h;
        left +&#x3D; this.selection.getLeft()*dims.w;
        this.svgEl.style.transform &#x3D; &#x27;scale(&#x27; + scaleToFit + &#x27;) translate(&#x27;+left+&#x27;px,&#x27;+top+&#x27;px)&#x27;;
      } 

    //render tieups
    top &#x3D; threading_top;
    left&#x3D; this.canvasEl.width+dims.w;

    this.tieupsCanvas.style.transformOrigin &#x3D; &#x27;0 0&#x27;;
    this.tieupsCanvas.style.transform &#x3D; &#x27;scale(&#x27; + scaleToFit + &#x27;) translate(&#x27;+left+&#x27;px, &#x27;+top+&#x27;px)&#x27;;

    if(this.selection.hasSelection() &amp;&amp; this.selection.getTargetId()&#x3D;&#x3D;&#x3D; &#x27;tieups&#x27;){
        
        top +&#x3D;  this.selection.getTop()*dims.h;
        left +&#x3D; this.selection.getLeft()*dims.w;
        this.svgEl.style.transform &#x3D; &#x27;scale(&#x27; + scaleToFit + &#x27;) translate(&#x27;+left+&#x27;px,&#x27;+top+&#x27;px)&#x27;;
    }

    //render view frames button
    top &#x3D; threading_top - dims.h*2;
    left&#x3D; this.canvasEl.width+this.treadlingCanvas.width+dims.w*3;

    this.divViewFrames.style.transformOrigin &#x3D; &#x27;0 0&#x27;;
    this.divViewFrames.style.transform &#x3D; &#x27;scale(&#x27; + scaleToFit + &#x27;) translate(&#x27;+left+&#x27;px, &#x27;+top+&#x27;px)&#x27;;



    //render weft systems
    // top &#x3D; (this.threadingCanvas.height+dims.h*2);
    // left&#x3D; this.canvasEl.width+this.treadlingCanvas.width+dims.w*2;

    top &#x3D; drawdown_top+dims.h;
    left &#x3D; (scroll_left+draft_width) - (dims.w*7);
    left /&#x3D; scaleToFit;
    left &#x3D; Math.min(left, (this.canvasEl.width+this.treadlingCanvas.width+dims.w*3));



    this.weftSystemsCanvas.style.transformOrigin &#x3D; &#x27;0 0&#x27;;
    this.weftSystemsCanvas.style.transform &#x3D; &#x27;scale(&#x27; + scaleToFit + &#x27;) translate(&#x27;+left+&#x27;px,&#x27;+top+&#x27;px)&#x27;;
    
    left +&#x3D; dims.w;
    this.divWesy.style.transformOrigin &#x3D; &#x27;0 0&#x27;;
    this.divWesy.style.transform &#x3D; &#x27;scale(&#x27; + scaleToFit + &#x27;) translate(&#x27;+left+&#x27;px,&#x27;+top+&#x27;px)&#x27;;

    if(this.selection.hasSelection() &amp;&amp; this.selection.getTargetId()&#x3D;&#x3D;&#x3D; &#x27;weft-systems&#x27;){
        
        top +&#x3D;  this.selection.getTop()*dims.h;
        left +&#x3D; this.selection.getLeft()*dims.w;
        this.svgEl.style.transform &#x3D; &#x27;scale(&#x27; + scaleToFit + &#x27;) translate(&#x27;+left+&#x27;px,&#x27;+top+&#x27;px)&#x27;;
    } 



    //render weft materials
     top &#x3D; drawdown_top+dims.h;
    // left&#x3D; (this.canvasEl.width+this.treadlingCanvas.width+dims.w*3);
    
    left &#x3D; scroll_left+draft_width-(dims.w*8);
    left /&#x3D; scaleToFit;

    left &#x3D; Math.min(left, (this.canvasEl.width+this.treadlingCanvas.width+dims.w*2));

    this.weftMaterialsCanvas.style.transformOrigin &#x3D; &#x27;0 0&#x27;;
    this.weftMaterialsCanvas.style.transform &#x3D;  &#x27;scale(&#x27; + scaleToFit + &#x27;) translate(&#x27;+left+&#x27;px,&#x27;+top+&#x27;px)&#x27;;

    if(this.selection.hasSelection() &amp;&amp; this.selection.getTargetId()&#x3D;&#x3D;&#x3D; &#x27;weft-materials&#x27;){
        
        top +&#x3D;  this.selection.getTop()*dims.h;
        left +&#x3D; this.selection.getLeft()*dims.w;
        this.svgEl.style.transform &#x3D; &#x27;scale(&#x27; + scaleToFit + &#x27;) translate(&#x27;+left+&#x27;px,&#x27;+top+&#x27;px)&#x27;;
    }



    top &#x3D; scroll_top+dims.h*8;
    top /&#x3D; scaleToFit;
    top &#x3D; Math.max(top, (threading_top-dims.h*2));

  //render warp materials
   // top &#x3D; (-dims.h*3);
    left&#x3D; dims.w;

    this.warpMaterialsCanvas.style.transformOrigin &#x3D; &#x27;0 0&#x27;;
    this.warpMaterialsCanvas.style.transform &#x3D; &#x27;scale(&#x27; + scaleToFit + &#x27;) translate(&#x27;+left+&#x27;px,&#x27;+top+&#x27;px)&#x27;;
 
    if(this.selection.hasSelection() &amp;&amp; this.selection.getTargetId()&#x3D;&#x3D;&#x3D; &#x27;warp-materials&#x27;){
          
          top +&#x3D;  this.selection.getTop()*dims.h;
          left +&#x3D; this.selection.getLeft()*dims.w;


          this.svgEl.style.transform &#x3D; &#x27;scale(&#x27; + scaleToFit + &#x27;) translate(&#x27;+left+&#x27;px,&#x27;+top+&#x27;px)&#x27;;
    }





    //render warp systems
    top &#x3D; scroll_top+dims.h;
    top /&#x3D; scaleToFit;
    left&#x3D; dims.w;

    this.divWasy.style.transformOrigin &#x3D; &#x27;0 0&#x27;;
    this.divWasy.style.transform &#x3D; &#x27;scale(&#x27; + scaleToFit + &#x27;) translate(&#x27;+(left)+&#x27;px,&#x27;+top+&#x27;px)&#x27;;
     
    this.warpSystemsCanvas.style.transformOrigin &#x3D; &#x27;0 0&#x27;;
    this.warpSystemsCanvas.style.transform &#x3D; &#x27;scale(&#x27; + scaleToFit + &#x27;) translate(&#x27;+left+&#x27;px,&#x27;+(top+6*dims.h)+&#x27;px)&#x27;;
   

    if(this.selection.hasSelection() &amp;&amp; this.selection.getTargetId()&#x3D;&#x3D;&#x3D; &#x27;warp-systems&#x27;){
          top +&#x3D;  this.selection.getTop()*dims.h;
          left +&#x3D; this.selection.getLeft()*dims.w;
          this.svgEl.style.transform &#x3D; &#x27;scale(&#x27; + scaleToFit + &#x27;) translate(&#x27;+left+&#x27;px,&#x27;+top+&#x27;px)&#x27;;
    }
  }


  public drawWarpsOver(){


    for (var i &#x3D; 0; i &lt; this.weave.visibleRows.length ; i++) {
       
        const row_index &#x3D; this.weave.visibleRows[i];
        const row_values &#x3D; this.weave.pattern[row_index];
        

        let overs &#x3D; [];
        if(this.render.isFront()){
          overs &#x3D; row_values.reduce((overs, v, idx) &#x3D;&gt; v.isUp() ? overs.concat([idx]) : overs, []);
        }else{
          overs &#x3D; row_values.reduce((overs, v, idx) &#x3D;&gt; !v.isUp() ? overs.concat([idx]) : overs, []);
        }

        for(var o in overs){
            const shuttle_id &#x3D; this.weave.colShuttleMapping[overs[o]];
            const system_id &#x3D; this.weave.colSystemMapping[overs[o]];
            if(this.weave.warp_systems[system_id].isVisible()) this.drawWeftUp(i, overs[o], this.weave.shuttles[shuttle_id]);
        }

    }


  }

  


  public redrawYarnView(){

    let started:boolean &#x3D; false;

    for(let i &#x3D; 0; i &lt; this.weave.visibleRows.length; i++){

      let index_row &#x3D; this.weave.visibleRows[i];

      let row_values &#x3D; this.weave.pattern[index_row];

      let shuttle_id &#x3D; this.weave.rowShuttleMapping[index_row];

      let s &#x3D; this.weave.shuttles[shuttle_id];

      //iterate through the rows
      for(let j &#x3D; 0; j &lt; row_values.length; j++){
        
        let p &#x3D; row_values[j];

        if(p.isEastWest())  this.drawWeftOver(i,j,s);
        if(p.isSouthWest()) this.drawWeftBottomLeft(i,j,s);
       // if(p.isNorthSouth())this.drawWeftUp(i, j, s);
        if(p.isSouthEast()) this.drawWeftBottomRight(i,j,s);
        if(p.isNorthWest()) this.drawWeftLeftUp(i,j,s);
        if(p.isNorthEast()) this.drawWeftRightUp(i, j, s);

      }
    }

  }

 


 //draws any updates from a change in a part of the drawdown on the threading, tieup, and treadling
 //will update height if a new row/column is added but for zoom, call redrawLoomSize
  public drawLoomStates(updates) {

    var dims &#x3D; this.render.getCellDims(&quot;base&quot;);

    //if the new value in outside of the visible range, redraw the entire loom
    if((this.weave.loom.num_frames)*dims.h &gt; (this.cxThreading.canvas.height)){ 
      this.redrawLoom();
      return;
    }

    for(var u in updates.threading){    
       this.drawCell( this.cxThreading, updates.threading[u].i, updates.threading[u].j, &quot;threading&quot;);
    }

   
    if((this.weave.loom.num_treadles)*dims.w &gt; this.cxTreadling.canvas.width){ 
      this.redrawLoom();
      return;
    }

    for(var u in updates.treadling){   
      this.drawCell( this.cxTreadling, updates.treadling[u].i, updates.treadling[u].j, &quot;treadling&quot;);
    }

    for(var u in updates.tieup){
      for(var j in updates.tieup[u]){
        this.drawCell( this.cxTieups, updates.tieup[u][j].i, updates.tieup[u][j].j, &quot;tieup&quot;);
      }
    }
  }



  public redrawLoom() {

    var base_dims &#x3D; this.render.getCellDims(&quot;base&quot;);
    var front &#x3D; this.render.isFront();

    this.cxThreading.clearRect(0,0, this.cxThreading.canvas.width, this.cxThreading.canvas.height);
    this.cxTreadling.clearRect(0,0, this.cxTreadling.canvas.width, this.cxTreadling.canvas.height);
    this.cxTieups.clearRect(0,0, this.cxTieups.canvas.width, this.cxTieups.canvas.height);


    this.cxThreading.canvas.width &#x3D; base_dims.w * this.weave.loom.threading.length;
    this.cxThreading.canvas.height &#x3D; base_dims.h * this.weave.loom.num_frames;
    if(front) this.drawGrid(this.cxThreading,this.threadingCanvas);
    else this.drawBlank(this.cxThreading,this.threadingCanvas);

    this.cxTreadling.canvas.width &#x3D; base_dims.w * this.weave.loom.num_treadles;
    this.cxTreadling.canvas.height &#x3D; base_dims.h * this.weave.visibleRows.length;
    if(front) this.drawGrid(this.cxTreadling,this.treadlingCanvas);
    else this.drawBlank(this.cxTreadling,this.treadlingCanvas);

    this.cxTieups.canvas.width &#x3D; base_dims.w * this.weave.loom.tieup[0].length;
    this.cxTieups.canvas.height &#x3D; base_dims.h * this.weave.loom.tieup.length;
    if(front) this.drawGrid(this.cxTieups,this.tieupsCanvas);
    else this.drawBlank(this.cxTieups,this.tieupsCanvas);
    


    for (var j &#x3D; 0; j &lt; this.weave.loom.threading.length; j++) {
      this.drawCell(this.cxThreading, this.weave.loom.threading[j], j, &quot;threading&quot;);
    }

    //only cycle through the visible rows
    for (var i &#x3D; 0; i &lt; this.weave.visibleRows.length; i++) {
       this.drawCell(this.cxTreadling, i, this.weave.loom.treadling[this.weave.visibleRows[i]], &quot;treadling&quot;);
    }

    for (var i &#x3D; 0; i &lt; this.weave.loom.tieup.length; i++) {
      for(var j &#x3D; 0; j &lt; this.weave.loom.tieup[i].length; j++){
        if(this.weave.loom.tieup[i][j]){
          this.drawCell(this.cxTieups, i, j, &quot;tieup&quot;);
        }
      }
    }

  }

//callled when frames become visible or drawdown without frame info is loaded
  public recomputeLoom(){

    this.weave.recomputeLoom();
  }


  public unsetSelection(){
    d3.select(this.svgEl).style(&#x27;display&#x27;, &#x27;none&#x27;);

  }

public drawDrawdown(){
   switch(this.render.getCurrentView()){
      case &#x27;pattern&#x27;:
      this.redrawDraft();
      break;

      case &#x27;yarn&#x27;:
      this.redrawVisualView();
      break;

      case &#x27;visual&#x27;:
      this.redrawVisualView();
      break;
    }
}

//takes inputs about what, exactly to redraw
public redraw(flags:any){


    var base_dims &#x3D; this.render.getCellDims(&quot;base&quot;);

    if(flags.drawdown !&#x3D;&#x3D; undefined){
        this.cx.clearRect(0,0, this.canvasEl.width, this.canvasEl.height);   
        this.cx.canvas.width &#x3D; base_dims.w * (this.weave.pattern[0].length+2);
        this.cx.canvas.height &#x3D; base_dims.h * (this.weave.visibleRows.length+2);
       
        this.cx.fillStyle &#x3D; &quot;#3d3d3d&quot;;
        this.cx.fillRect(0,0,this.canvasEl.width,this.canvasEl.height);
        this.drawDrawdown();
    }

    if(flags.weft_systems !&#x3D;&#x3D; undefined){
      this.drawWeftSystems(this.cxWeftSystems, this.weftSystemsCanvas);
    }

    if(flags.weft_materials !&#x3D;&#x3D; undefined){
      this.drawWeftMaterials(this.cxWeftMaterials, this.weftMaterialsCanvas);
    }

    if(flags.warp_systems !&#x3D;&#x3D; undefined){
      this.drawWarpSystems(this.cxWarpSystems, this.warpSystemsCanvas);
    }

    if(flags.warp_materials !&#x3D;&#x3D; undefined){
      this.drawWarpMaterials(this.cxWarpMaterials, this.warpMaterialsCanvas);
    }

    if(flags.loom !&#x3D;&#x3D; undefined &amp;&amp; this.render.showingFrames()){
       this.redrawLoom();
    }


    this.rescale();
  }
  

  /**
   * Redraws the entire canvas based on weave pattern.
   * @extends WeaveDirective
   * @returns {void}
   */
  public redrawDraft() {
    
    var base_dims &#x3D; this.render.getCellDims(&quot;base&quot;);
    this.cx.fillStyle &#x3D; &quot;white&quot;;
    this.cx.fillRect(base_dims.w,base_dims.h,this.canvasEl.width - base_dims.w*2,this.canvasEl.height-base_dims.h*2);

    var i,j;

    this.drawGrid(this.cx,this.canvasEl);
    

    var color &#x3D; &#x27;#000000&#x27;;
    this.cx.fillStyle &#x3D; color;
    for (i &#x3D; 0; i &lt; this.weave.visibleRows.length; i++) {
      this.redrawRow(i * base_dims.h, i, this.cx);
    }


     for (var x &#x3D; 0; x &lt; this.weave.colShuttleMapping.length; x++) {
     
      var id &#x3D; this.weave.colShuttleMapping[x];
      var system &#x3D; this.weave.warp_systems[this.weave.colSystemMapping[x]];
      var shuttle &#x3D; this.weave.shuttles[id];

        if(!system.visible){
          var c &#x3D; &quot;#3d3d3d&quot;;
          var t &#x3D; 100;

          var width &#x3D; base_dims.w;
          var w_margin &#x3D; base_dims.w;
          this.cx.fillStyle &#x3D; c;
          this.cx.fillRect(x*base_dims.w+w_margin, 0, width, base_dims.h*this.weave.visibleRows.length);

        }
    }   
  }






  public drawWarps(cx){
    //draw all the warps

    var base_dims &#x3D; this.render.getCellDims(&quot;base&quot;);
    var schematic &#x3D; (this.render.getCurrentView() &#x3D;&#x3D;&#x3D; &quot;yarn&quot;);
    for (var x &#x3D; 0; x &lt; this.weave.colShuttleMapping.length; x++) {
     
      var id &#x3D; this.weave.colShuttleMapping[x];
      var system &#x3D; this.weave.warp_systems[this.weave.colSystemMapping[x]];
      var shuttle &#x3D; this.weave.shuttles[id];

      if(system.visible){
          var c &#x3D; shuttle.getColor();
          var t &#x3D; shuttle.getThickness();
          var center &#x3D; base_dims.w/2;


          cx.lineWidth &#x3D; t/100 * .9*base_dims.w;
          cx.strokeStyle &#x3D; (shuttle.type &gt; 0 || !schematic) ? c : c+&quot;10&quot;;
          cx.shadowColor &#x3D; &#x27;white&#x27;;
          cx.shadowOffsetX &#x3D; 0.5;
          cx.shadowOffsetY &#x3D; 0;

          cx.beginPath();
          cx.moveTo((x+1)*base_dims.w + center, 0);
          cx.lineTo((x+1)*base_dims.w + center, base_dims.h*(this.weave.visibleRows.length+2));
          cx.stroke();

      }
    }
  }





  /**
   * Simulates the visual look of the weave pattern.
   * @extends WeaveDirective
   * @returns {void}
   */
  public redrawVisualView() {

    var base_dims &#x3D; this.render.getCellDims(&quot;base&quot;);
    var back &#x3D; this.render.view_back;

    this.cx.fillStyle &#x3D; &quot;#3d3d3d&quot;;
    this.cx.fillRect(0,0,this.canvasEl.width,this.canvasEl.height);

    this.drawWarps(this.cx);
    
    this.redrawYarnView();

    if(this.render.getCurrentView() &#x3D;&#x3D;&#x3D; &#x27;visual&#x27;){
      this.drawWarpsOver();
    }

    this.cx.strokeStyle &#x3D; &quot;#000&quot;;
    this.cx.fillStyle &#x3D; &quot;#000&quot;;
  }

  /**
   * Resizes and then redraws the canvas on a change to the wefts or warps. 
   * @extends WeaveDirective
   * @returns {void}
   */
  // public updateSize() {
  //   var base_dims &#x3D; this.render.getCellDims(&quot;base&quot;);

  //   // set the updated width and height
  //   this.canvasEl.width &#x3D; this.weave.warps * base_dims.h;
  //   this.canvasEl.height &#x3D; this.weave.visibleRows.length * base_dims.w;
  // }



  public onUndoRedo() {

  }

  /**
   * Prints the pattern to the console.
   * @extends WeaveDirective
   * @param {Array&lt;Array&lt;boolean&gt;&gt;} pattern - 2D pattern array.
   * @returns {void}
   */
  public printPattern(pattern) {
    for (var i &#x3D; 0; i &lt; pattern.length; i++) {
      var s &#x3D; &quot;&quot;;
      for (var j &#x3D; 0; j &lt; pattern[0].length; j++) {
        if (pattern[i][j]) {
          s +&#x3D; &#x27;x&#x27;;
        } else {
          s +&#x3D; &#x27;o&#x27;
        }
      }
      console.log(s);
    }
  }

  /**
   * Saves the draft as a bitmap file
   * @extends WeaveDirective
   * @param {string} fileName - name to save file as
   * @returns {void}
   */
  public savePNG(fileName, obj) {
    let link &#x3D; obj.downloadLink.nativeElement;

    link.href &#x3D; this.canvasEl.toDataURL(&quot;image/png&quot;);
    link.download &#x3D; fileName + &quot;.png&quot;;
    console.log(link);
  }


   /**
   * Saves the draft as a bitmap file
   * @extends WeaveDirective
   * @param {string} fileName - name to save file as
   * @returns {void}
   */
  public savePrintableDraft(fileName, obj) {


    let dims &#x3D; this.render.getCellDims(&quot;base&quot;);

    let b &#x3D; obj.bitmap.nativeElement;
    let context &#x3D; b.getContext(&#x27;2d&#x27;);

    b.width &#x3D; (this.weave.warps + this.weave.loom.num_treadles + 6) * dims.w;
    b.height &#x3D; (this.weave.wefts + this.weave.loom.num_frames + 6) * dims.h;
    
    context.fillStyle &#x3D; &quot;white&quot;;
    context.fillRect(0,0,b.width,b.height);
    
    //use this to solve 0 width errors on drawIMage
    if(this.render.showingFrames()){

      context.drawImage(this.threadingCanvas, 0, dims.h*3);
      context.drawImage(this.tieupsCanvas, (this.weave.warps +1)* dims.w, 3*dims.h);
      context.drawImage(this.treadlingCanvas, (this.weave.warps +1)* dims.w, (this.weave.loom.num_frames + 4)*dims.h);

    }

    //systems
    context.drawImage(this.warpSystemsCanvas, 0, 0);
    context.drawImage(this.warpMaterialsCanvas, 0, dims.h);

    context.drawImage(this.canvasEl, -dims.w, (this.weave.loom.num_frames+3)*dims.h);
   
    context.drawImage(this.weftMaterialsCanvas,(this.weave.warps+ this.weave.loom.num_treadles +1)* dims.w, (this.weave.loom.num_frames + 4)*dims.h);
    context.drawImage(this.weftSystemsCanvas,(this.weave.warps+ this.weave.loom.num_treadles +2)* dims.w, (this.weave.loom.num_frames + 4)*dims.h);

    //can add info here to add to the drawing about weft and warp systems, etc. 

    let link &#x3D; obj.downloadLink.nativeElement;
    link.href &#x3D; b.toDataURL(&quot;image/jpg&quot;);
    link.download &#x3D; fileName + &quot;.jpg&quot;;
    console.log(link);

  }

  /**
   * Saves the draft as a bitmap file
   * @extends WeaveDirective
   * @param {string} fileName - name to save file as
   * @returns {void}
   */
  public saveBMP(fileName, obj) {
    let b &#x3D; obj.bitmap.nativeElement;
    let context &#x3D; b.getContext(&#x27;2d&#x27;);
    let draft &#x3D; this.weave.pattern;
    var i,j;

    b.width &#x3D; this.weave.warps;
    b.height &#x3D; this.weave.wefts;
    context.fillStyle &#x3D; &quot;white&quot;;
    context.fillRect(0,0,b.width,b.height);

    context.fillStyle &#x3D; &quot;black&quot;;

    for( i &#x3D; 0; i &lt; b.height; i++) {
      for( j&#x3D;0; j &lt; b.width; j++) {
        let up &#x3D; draft[i][j].isUp();
        if(up) {
          context.fillRect(j,i,1,1)
        }
      }
    }

    let link &#x3D; obj.downloadLink.nativeElement;

    console.log(&quot;link&quot;, link);

    link.href &#x3D; CanvasToBMP.toDataURL(b);
    link.download &#x3D; fileName + &quot;.bmp&quot;;
  }



//UPDATE THIS TO INCLUDE THE MATERIALS INFORMATION - 3/19
  /**
   * Saves the draft as a .ada file
   * @extends WeaveDirective
   * @param {string} fileName - name to save file as
   * @returns {void}
   */
  public saveADA(fileName, obj) {


    console.log(&quot;save ADA&quot;, this.weave);

    var theJSON &#x3D; JSON.stringify(this.weave);
    console.log(theJSON);
    var uri &#x3D; &quot;data:application/json;charset&#x3D;UTF-8,&quot; + encodeURIComponent(theJSON);
    console.log(uri);
    let link &#x3D; obj.downloadLink.nativeElement;
    link.href &#x3D; uri;
    link.download &#x3D; fileName + &quot;.ada&quot;;
  } 

  /**
   * Saves the draft as a .wif file
   * @extends WeaveDirective
   * @param {string} fileName - name to save file as
   * @returns {void}
   * ld updated 3/27 to account for new file structure
   */
  public saveWIF(fileName, obj) {
    //will need to import the obj for draft2wif.ts and then use it and pass this.weave for fileContents
    var fileContents &#x3D; &quot;[WIF]\nVersion&#x3D;1.1\nDate&#x3D;November 6, 2020\nDevelopers&#x3D;Unstable Design Lab at the University of Colorado Boulder\nSource Program&#x3D;AdaCAD\nSource Version&#x3D;3.0\n[CONTENTS]&quot;;
    var fileType &#x3D; &quot;text/plain&quot;;

    fileContents +&#x3D; &quot;\nCOLOR PALETTE&#x3D;yes\nWEAVING&#x3D;yes\nWARP&#x3D;yes\nWEFT&#x3D;yes\nTIEUP&#x3D;yes\nCOLOR TABLE&#x3D;yes\nTHREADING&#x3D;yes\nWARP COLORS&#x3D;yes\nTREADLING&#x3D;yes\nWEFT COLORS&#x3D;yes\n&quot;;
    
    fileContents +&#x3D; &quot;[COLOR PALETTE]\n&quot;;
    fileContents +&#x3D; &quot;Entries&#x3D;&quot; + (this.weave.shuttles.length).toString() +&quot;\n&quot;;
    fileContents +&#x3D; &quot;Form&#x3D;RGB\nRange&#x3D;0,255\n&quot;;

    fileContents +&#x3D; &quot;[WEAVING]\nShafts&#x3D;&quot;;
    fileContents +&#x3D; this.weave.loom.min_frames.toString();
    fileContents +&#x3D; &quot;\nTreadles&#x3D;&quot;;
    fileContents +&#x3D; this.weave.loom.min_treadles.toString();
    fileContents +&#x3D; &quot;\nRising Shed&#x3D;yes\n&quot;;
    fileContents +&#x3D; &quot;[WARP]\nThreads&#x3D;&quot;;
    fileContents +&#x3D; this.weave.warps.toString();
    
    var warpColors &#x3D; [];
    for (var i &#x3D; 0; i &lt; this.weave.colShuttleMapping.length; i++) {
      if (!warpColors.includes(this.weave.colShuttleMapping[i])) {
        warpColors.push(this.weave.colShuttleMapping[i]);
      }
    }
    fileContents +&#x3D; &quot;\nColors&#x3D;&quot; + warpColors.length.toString();

    fileContents +&#x3D; &quot;\n[WEFT]\nThreads&#x3D;&quot;;
    fileContents +&#x3D; this.weave.wefts.toString();
    var weftColors &#x3D; [];
    for (var i &#x3D; 0; i &lt; this.weave.colShuttleMapping.length; i++) {
      if (!weftColors.includes(this.weave.colShuttleMapping[i])) {
        weftColors.push(this.weave.colShuttleMapping[i]);
      }
    }
    fileContents +&#x3D; &quot;\nColors&#x3D;&quot; + weftColors.length.toString();

    fileContents +&#x3D; &quot;\n[TIEUP]\n&quot;;

    var treadles &#x3D; [];
    for (var i &#x3D;0; i &lt; this.weave.loom.tieup.length;i++) {
      for (var j &#x3D; 0; j &lt; this.weave.loom.tieup[i].length;j++) {
        if (this.weave.loom.tieup[i][j] &amp;&amp; !treadles.includes(j)) {
          treadles.push(j);
        }
      }
    }
    for (var i &#x3D;0; i &lt; treadles.length; i++) {
      fileContents +&#x3D; (treadles[i]+1).toString() + &quot;&#x3D;&quot;;
      var lineMarked &#x3D; false;
      for (var j &#x3D; 0; j &lt; this.weave.loom.tieup.length; j++){
        if (this.weave.loom.tieup[j][treadles[i]]) { 
          if (lineMarked) {
            fileContents +&#x3D; &quot;,&quot;;
          }
          fileContents +&#x3D; (j+1).toString();
          lineMarked&#x3D;true;
        }
      }
      fileContents +&#x3D; &quot;\n&quot;;
    }

    fileContents+&#x3D; &quot;[COLOR TABLE]\n&quot;;
    //Reference: https://css-tricks.com/converting-color-spaces-in-javascript/ for conversion for hex to RGB
    var counter &#x3D; 1;
    for (var i &#x3D; 0; i &lt; this.weave.shuttles.length; i++) {
      fileContents+&#x3D; (counter).toString();
      counter &#x3D; counter + 1;
      fileContents+&#x3D; &quot;&#x3D;&quot;;
      var hex &#x3D; this.weave.shuttles[i].color;
      if (hex.length &#x3D;&#x3D; 7) {
        var r &#x3D; &quot;0x&quot; + hex[1] + hex[2];
        var g &#x3D; &quot;0x&quot; + hex[3] + hex[4];
        var b &#x3D; &quot;0x&quot; + hex[5] + hex[6];

        fileContents +&#x3D; (+r).toString() + &quot;,&quot; + (+g).toString() + &quot;,&quot; + (+b).toString() + &quot;\n&quot;;
      }
    }
    
    fileContents +&#x3D; &quot;[THREADING]\n&quot;;
    for (var i&#x3D;0; i &lt;this.weave.loom.threading.length; i++) {
      var frame &#x3D; this.weave.loom.threading[i];
      if (frame !&#x3D; -1) {
        fileContents +&#x3D; (this.weave.loom.threading.length-i).toString() + &quot;&#x3D;&quot; + (frame+1).toString() + &quot;\n&quot;;
      }
    }

    fileContents +&#x3D; &quot;[WARP COLORS]\n&quot;;
    for (var i &#x3D; 0; i &lt; this.weave.colShuttleMapping.length; i++) {
      fileContents +&#x3D; (i+1).toString() + &quot;&#x3D;&quot; + (this.weave.colShuttleMapping[(this.weave.colShuttleMapping.length)-(i+1)]+1).toString() + &quot;\n&quot;;
    }

    fileContents +&#x3D; &quot;[TREADLING]\n&quot;;
    for (var i &#x3D; 0; i &lt; this.weave.loom.treadling.length; i++) {
      if (this.weave.loom.treadling[i] !&#x3D; null &amp;&amp; this.weave.loom.treadling[i] !&#x3D; -1){
        fileContents +&#x3D; (i+1).toString() + &quot;&#x3D;&quot; + (this.weave.loom.treadling[i]+1).toString() + &quot;\n&quot;;
      }
    }

    fileContents +&#x3D; &quot;[WEFT COLORS]\n&quot;;
    for (var i &#x3D; 0; i &lt; this.weave.rowShuttleMapping.length; i++) { // will likely have to change the way I import too
      fileContents +&#x3D; (i+1).toString() + &quot;&#x3D;&quot; + (this.weave.rowShuttleMapping[i]+1).toString() + &quot;\n&quot;;
    }

    let link &#x3D; obj.downloadLink.nativeElement;
    link.href&#x3D; &quot;data:&quot; + fileType +&quot;;base64,&quot; + btoa(fileContents);

    console.log(&quot;link:&quot;, link);
    link.download &#x3D; fileName +&quot;.wif&quot;;
  }









}
</code></pre>
    </div>

</div>








                   




                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> result-matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'directive';
            var COMPODOC_CURRENT_PAGE_URL = 'WeaveDirective.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>
       <!-- Required to polyfill modern browsers as code is ES5 for IE... -->
       <script src="../js/libs/custom-elements-es5-adapter.js" charset="utf-8" defer></script>
       <script src="../js/menu-wc.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
