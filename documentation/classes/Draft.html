<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>adacad-weaver documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	    <link rel="stylesheet" href="../styles/style.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="../" class="navbar-brand">adacad-weaver documentation</a>
            <button type="button" class="btn btn-default btn-menu fa fa-bars" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
            <div id="book-search-input" role="search">
                <input type="text" placeholder="Type to search">
            </div>
            <nav>
            
                <ul class="list">
            
                    <li class="title">
                        <a href="../">adacad-weaver documentation</a>
                    </li>
            
                    <li class="divider"></li>
            
            
                    <li class="chapter">
                        <a data-type="chapter-link" href="../"><span class="fa fa-home"></span>Getting started</a>
                        <ul class="links">
                                <li class="link">
                                    <a href="../" ><span class="fa fa-file-text-o"></span>README</a>
                                </li>
                                <li class="link">
                                    <a 
                                        
                                         href="../overview.html" 
                                         href="../overview.html" 
                                        >
                                        <span class="fa fa-th"></span>Overview
                                    </a>
                                </li>
                        </ul>
                    </li>
            
                    <li class="chapter">
                        <a data-type="chapter-link" href="./modules.html" >
                            <span class="fa fa-archive"></span>
                            <span>Modules</span>
                            <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                    data-target="#xs-modules-links"
                            ></span>
                        </a>
                        <ul class="links collapse in"
                                id="xs-modules-links"
                            >
                                <li class="link">
                                    <a href="../modules/AppModule.html" >AppModule</a>
                                </li>
                                <li class="link">
                                    <a href="../modules/AppRoutingModule.html" >AppRoutingModule</a>
                                </li>
                                <li class="link">
                                    <a href="../modules/CoreModule.html" >CoreModule</a>
                                </li>
                                <li class="link">
                                    <a href="../modules/MixerModule.html" >MixerModule</a>
                                </li>
                                <li class="link">
                                    <a href="../modules/WeaverModule.html" >WeaverModule</a>
                                </li>
                        </ul>
                    </li>
            
                    <li class="chapter">
                        <div class="simple">
                            <span class="fa fa-cogs"></span>
                            <span>Components</span>
                            <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                    data-target="#xs-components-links"
                                ></span>
                        </div>
                        <ul class="links collapse in"
                                id="xs-components-links"
                            >
                                <li class="link">
                                    <a href="../components/AboutModal.html" >AboutModal</a>
                                </li>
                                <li class="link">
                                    <a href="../components/AppComponent.html" >AppComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/ConnectionComponent.html" >ConnectionComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/ConnectionModal.html" >ConnectionModal</a>
                                </li>
                                <li class="link">
                                    <a href="../components/FlowComponent.html" >FlowComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/InitModal.html" >InitModal</a>
                                </li>
                                <li class="link">
                                    <a href="../components/LabelModal.html" >LabelModal</a>
                                </li>
                                <li class="link">
                                    <a href="../components/LoomComponent.html" >LoomComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/MasksComponent.html" >MasksComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/MaterialModal.html" >MaterialModal</a>
                                </li>
                                <li class="link">
                                    <a href="../components/MaterialsComponent.html" >MaterialsComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/MixerComponent.html" >MixerComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/MixerDesignComponent.html" >MixerDesignComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/MixerPatternsComponent.html" >MixerPatternsComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/MixerViewComponent.html" >MixerViewComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/NotesComponent.html" >NotesComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/OperationComponent.html" >OperationComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/PaletteComponent.html" >PaletteComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/PatternModal.html" >PatternModal</a>
                                </li>
                                <li class="link">
                                    <a href="../components/PatternsComponent.html" >PatternsComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/SchematicComponent.html" >SchematicComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/ShuttlesModal.html" >ShuttlesModal</a>
                                </li>
                                <li class="link">
                                    <a href="../components/SnackbarComponent.html" >SnackbarComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/SubdraftComponent.html" >SubdraftComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/SystemsComponent.html" >SystemsComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/TopbarComponent.html" >TopbarComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/TreeComponent.html" >TreeComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/UploadFormComponent.html" >UploadFormComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/WeaverComponent.html" >WeaverComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/WeaverDesignComponent.html" >WeaverDesignComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/WeaverPatternsComponent.html" >WeaverPatternsComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/WeaverViewComponent.html" >WeaverViewComponent</a>
                                </li>
                        </ul>
                    </li>
            
                    <li class="chapter">
                        <div class="simple">
                            <span class="fa fa-code"></span>
                            <span>Directives</span>
                            <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                    data-target="#xs-directives-links"
                                ></span>
                        </div>
                        <ul class="links collapse in"
                                id="xs-directives-links"
                            >
                                <li class="link">
                                    <a href="../directives/SelectionComponent.html" >SelectionComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../directives/WeaveDirective.html" >WeaveDirective</a>
                                </li>
                        </ul>
                    </li>
            
                    <li class="chapter">
                        <div class="simple">
                            <span class="fa fa-file-code-o"></span>
                            <span>Classes</span>
                            <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                    data-target="#xs-classes-links"
                                ></span>
                        </div>
                        <ul class="links collapse in"
                                id="xs-classes-links"
                            >
                                <li class="link">
                                    <a href="../classes/AdaCADWeaverPage.html" >AdaCADWeaverPage</a>
                                </li>
                                <li class="link">
                                    <a href="../classes/Cell.html" >Cell</a>
                                </li>
                                <li class="link">
                                    <a href="../classes/Connection.html" >Connection</a>
                                </li>
                                <li class="link">
                                    <a href="../classes/Draft.html"  class="active" >Draft</a>
                                </li>
                                <li class="link">
                                    <a href="../classes/Loom.html" >Loom</a>
                                </li>
                                <li class="link">
                                    <a href="../classes/Pattern.html" >Pattern</a>
                                </li>
                                <li class="link">
                                    <a href="../classes/Point.html" >Point</a>
                                </li>
                                <li class="link">
                                    <a href="../classes/Render.html" >Render</a>
                                </li>
                                <li class="link">
                                    <a href="../classes/Selection.html" >Selection</a>
                                </li>
                                <li class="link">
                                    <a href="../classes/Shape.html" >Shape</a>
                                </li>
                                <li class="link">
                                    <a href="../classes/Shuttle.html" >Shuttle</a>
                                </li>
                                <li class="link">
                                    <a href="../classes/System.html" >System</a>
                                </li>
                                <li class="link">
                                    <a href="../classes/Timeline.html" >Timeline</a>
                                </li>
                                <li class="link">
                                    <a href="../classes/Upload.html" >Upload</a>
                                </li>
                                <li class="link">
                                    <a href="../classes/Util.html" >Util</a>
                                </li>
                        </ul>
                    </li>
            
                    <li class="chapter">
                        <a data-type="chapter-link" href="../routes.html" ><span class="fa fa-code-fork"></span>Routes</a>
                    </li>
            
                    <li class="chapter">
                        <div class="simple">
                            <span class="fa fa-long-arrow-down"></span>
                            <span>Injectables</span>
                            <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                    data-target="#xs-injectables-links"
                                ></span>
                        </div>
                        <ul class="links collapse in"
                                id="xs-injectables-links"
                            >
                                <li class="link">
                                    <a href="../injectables/DesignmodesService.html" >DesignmodesService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/InkService.html" >InkService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/LayersService.html" >LayersService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/OperationService.html" >OperationService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/PatternService.html" >PatternService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/TreeService.html" >TreeService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/UploadService.html" >UploadService</a>
                                </li>
                        </ul>
                    </li>
            
                    <li class="chapter">
                        <div class="simple">
                            <span class="fa fa-info"></span>
                            <span>Interfaces</span>
                            <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                    data-target="#xs-interfaces-links"
                                ></span>
                        </div>
                        <ul class="links collapse in"
                                id="xs-interfaces-links"
                            >
                                <li class="link">
                                    <a href="../interfaces/Bounds.html" >Bounds</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/DensityUnits.html" >DensityUnits</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/DesignActions.html" >DesignActions</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/DesignActions.html" >DesignActions</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/DesignMode.html" >DesignMode</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/DesignModes.html" >DesignModes</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/DraftInterface.html" >DraftInterface</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/DraftMap.html" >DraftMap</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/HistoryState.html" >HistoryState</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/Ink.html" >Ink</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/Interlacement.html" >Interlacement</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/InterlacementVal.html" >InterlacementVal</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/LoomCoords.html" >LoomCoords</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/LoomTypes.html" >LoomTypes</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/LoomUpdate.html" >LoomUpdate</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/MaterialTypes.html" >MaterialTypes</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/Node.html" >Node</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/Operation.html" >Operation</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/OperationParams.html" >OperationParams</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/Point.html" >Point</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/StartOptions.html" >StartOptions</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/TreeNode.html" >TreeNode</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/ViewModes.html" >ViewModes</a>
                                </li>
                        </ul>
                    </li>
            
                    <li class="chapter">
                        <div class="simple">
                            <span class="fa fa-plus"></span>
                            <span>Pipes</span>
                            <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                    data-target="#xs-pipes-links"
                                ></span>
                        </div>
                        <ul class="links collapse in"
                                id="xs-pipes-links"
                            >
                                <li class="link">
                                    <a href="../pipes/FilterPipe.html" >FilterPipe</a>
                                </li>
                        </ul>
                    </li>
            
                    <li class="chapter">
                        <a data-type="chapter-link" href="../miscellaneous.html" ><span class="fa fa-cubes"></span>Miscellaneous</a>
                    </li>
            
                    <li class="chapter">
                        <a data-type="chapter-link" href="../coverage.html" ><span class="fa fa-tasks"></span>Documentation coverage</a>
                    </li>
            
                    <li class="divider"></li>
                    <li class="copyright">
                            Documentation generated using <a href="https://compodoc.github.io/compodoc/" target="_blank">
                                        <img src="..//images/compodoc-vectorise.svg" class="img-responsive">
                            </a>
                    </li>
            
                </ul>
            
            </nav>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <nav>
                   
                       <ul class="list">
                   
                           <li class="title">
                               <a href="../">adacad-weaver documentation</a>
                           </li>
                   
                           <li class="divider"></li>
                   
                               <div id="book-search-input" role="search">
                                   <input type="text" placeholder="Type to search">
                               </div>
                   
                           <li class="chapter">
                               <a data-type="chapter-link" href="../"><span class="fa fa-home"></span>Getting started</a>
                               <ul class="links">
                                       <li class="link">
                                           <a href="../" ><span class="fa fa-file-text-o"></span>README</a>
                                       </li>
                                       <li class="link">
                                           <a 
                                               
                                                href="../overview.html" 
                                                href="../overview.html" 
                                               >
                                               <span class="fa fa-th"></span>Overview
                                           </a>
                                       </li>
                               </ul>
                           </li>
                   
                           <li class="chapter">
                               <a data-type="chapter-link" href="./modules.html" >
                                   <span class="fa fa-archive"></span>
                                   <span>Modules</span>
                                   <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                           data-target="#modules-links"
                                   ></span>
                               </a>
                               <ul class="links collapse in"
                                       id="modules-links"
                   >
                                       <li class="link">
                                           <a href="../modules/AppModule.html" >AppModule</a>
                                       </li>
                                       <li class="link">
                                           <a href="../modules/AppRoutingModule.html" >AppRoutingModule</a>
                                       </li>
                                       <li class="link">
                                           <a href="../modules/CoreModule.html" >CoreModule</a>
                                       </li>
                                       <li class="link">
                                           <a href="../modules/MixerModule.html" >MixerModule</a>
                                       </li>
                                       <li class="link">
                                           <a href="../modules/WeaverModule.html" >WeaverModule</a>
                                       </li>
                               </ul>
                           </li>
                   
                           <li class="chapter">
                               <div class="simple">
                                   <span class="fa fa-cogs"></span>
                                   <span>Components</span>
                                   <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                           data-target="#components-links"
                   ></span>
                               </div>
                               <ul class="links collapse in"
                                       id="components-links"
                   >
                                       <li class="link">
                                           <a href="../components/AboutModal.html" >AboutModal</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/AppComponent.html" >AppComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/ConnectionComponent.html" >ConnectionComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/ConnectionModal.html" >ConnectionModal</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/FlowComponent.html" >FlowComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/InitModal.html" >InitModal</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/LabelModal.html" >LabelModal</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/LoomComponent.html" >LoomComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/MasksComponent.html" >MasksComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/MaterialModal.html" >MaterialModal</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/MaterialsComponent.html" >MaterialsComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/MixerComponent.html" >MixerComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/MixerDesignComponent.html" >MixerDesignComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/MixerPatternsComponent.html" >MixerPatternsComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/MixerViewComponent.html" >MixerViewComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/NotesComponent.html" >NotesComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/OperationComponent.html" >OperationComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/PaletteComponent.html" >PaletteComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/PatternModal.html" >PatternModal</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/PatternsComponent.html" >PatternsComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/SchematicComponent.html" >SchematicComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/ShuttlesModal.html" >ShuttlesModal</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/SnackbarComponent.html" >SnackbarComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/SubdraftComponent.html" >SubdraftComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/SystemsComponent.html" >SystemsComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/TopbarComponent.html" >TopbarComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/TreeComponent.html" >TreeComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/UploadFormComponent.html" >UploadFormComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/WeaverComponent.html" >WeaverComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/WeaverDesignComponent.html" >WeaverDesignComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/WeaverPatternsComponent.html" >WeaverPatternsComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/WeaverViewComponent.html" >WeaverViewComponent</a>
                                       </li>
                               </ul>
                           </li>
                   
                           <li class="chapter">
                               <div class="simple">
                                   <span class="fa fa-code"></span>
                                   <span>Directives</span>
                                   <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                           data-target="#directives-links"
                   ></span>
                               </div>
                               <ul class="links collapse in"
                                       id="directives-links"
                   >
                                       <li class="link">
                                           <a href="../directives/SelectionComponent.html" >SelectionComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../directives/WeaveDirective.html" >WeaveDirective</a>
                                       </li>
                               </ul>
                           </li>
                   
                           <li class="chapter">
                               <div class="simple">
                                   <span class="fa fa-file-code-o"></span>
                                   <span>Classes</span>
                                   <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                           data-target="#classes-links"
                   ></span>
                               </div>
                               <ul class="links collapse in"
                                       id="classes-links"
                   >
                                       <li class="link">
                                           <a href="../classes/AdaCADWeaverPage.html" >AdaCADWeaverPage</a>
                                       </li>
                                       <li class="link">
                                           <a href="../classes/Cell.html" >Cell</a>
                                       </li>
                                       <li class="link">
                                           <a href="../classes/Connection.html" >Connection</a>
                                       </li>
                                       <li class="link">
                                           <a href="../classes/Draft.html"  class="active" >Draft</a>
                                       </li>
                                       <li class="link">
                                           <a href="../classes/Loom.html" >Loom</a>
                                       </li>
                                       <li class="link">
                                           <a href="../classes/Pattern.html" >Pattern</a>
                                       </li>
                                       <li class="link">
                                           <a href="../classes/Point.html" >Point</a>
                                       </li>
                                       <li class="link">
                                           <a href="../classes/Render.html" >Render</a>
                                       </li>
                                       <li class="link">
                                           <a href="../classes/Selection.html" >Selection</a>
                                       </li>
                                       <li class="link">
                                           <a href="../classes/Shape.html" >Shape</a>
                                       </li>
                                       <li class="link">
                                           <a href="../classes/Shuttle.html" >Shuttle</a>
                                       </li>
                                       <li class="link">
                                           <a href="../classes/System.html" >System</a>
                                       </li>
                                       <li class="link">
                                           <a href="../classes/Timeline.html" >Timeline</a>
                                       </li>
                                       <li class="link">
                                           <a href="../classes/Upload.html" >Upload</a>
                                       </li>
                                       <li class="link">
                                           <a href="../classes/Util.html" >Util</a>
                                       </li>
                               </ul>
                           </li>
                   
                           <li class="chapter">
                               <a data-type="chapter-link" href="../routes.html" ><span class="fa fa-code-fork"></span>Routes</a>
                           </li>
                   
                           <li class="chapter">
                               <div class="simple">
                                   <span class="fa fa-long-arrow-down"></span>
                                   <span>Injectables</span>
                                   <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                           data-target="#injectables-links"
                   ></span>
                               </div>
                               <ul class="links collapse in"
                                       id="injectables-links"
                   >
                                       <li class="link">
                                           <a href="../injectables/DesignmodesService.html" >DesignmodesService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/InkService.html" >InkService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/LayersService.html" >LayersService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/OperationService.html" >OperationService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/PatternService.html" >PatternService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/TreeService.html" >TreeService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/UploadService.html" >UploadService</a>
                                       </li>
                               </ul>
                           </li>
                   
                           <li class="chapter">
                               <div class="simple">
                                   <span class="fa fa-info"></span>
                                   <span>Interfaces</span>
                                   <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                           data-target="#interfaces-links"
                   ></span>
                               </div>
                               <ul class="links collapse in"
                                       id="interfaces-links"
                   >
                                       <li class="link">
                                           <a href="../interfaces/Bounds.html" >Bounds</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/DensityUnits.html" >DensityUnits</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/DesignActions.html" >DesignActions</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/DesignActions.html" >DesignActions</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/DesignMode.html" >DesignMode</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/DesignModes.html" >DesignModes</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/DraftInterface.html" >DraftInterface</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/DraftMap.html" >DraftMap</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/HistoryState.html" >HistoryState</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/Ink.html" >Ink</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/Interlacement.html" >Interlacement</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/InterlacementVal.html" >InterlacementVal</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/LoomCoords.html" >LoomCoords</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/LoomTypes.html" >LoomTypes</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/LoomUpdate.html" >LoomUpdate</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/MaterialTypes.html" >MaterialTypes</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/Node.html" >Node</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/Operation.html" >Operation</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/OperationParams.html" >OperationParams</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/Point.html" >Point</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/StartOptions.html" >StartOptions</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/TreeNode.html" >TreeNode</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/ViewModes.html" >ViewModes</a>
                                       </li>
                               </ul>
                           </li>
                   
                           <li class="chapter">
                               <div class="simple">
                                   <span class="fa fa-plus"></span>
                                   <span>Pipes</span>
                                   <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                           data-target="#pipes-links"
                   ></span>
                               </div>
                               <ul class="links collapse in"
                                       id="pipes-links"
                   >
                                       <li class="link">
                                           <a href="../pipes/FilterPipe.html" >FilterPipe</a>
                                       </li>
                               </ul>
                           </li>
                   
                           <li class="chapter">
                               <a data-type="chapter-link" href="../miscellaneous.html" ><span class="fa fa-cubes"></span>Miscellaneous</a>
                           </li>
                   
                           <li class="chapter">
                               <a data-type="chapter-link" href="../coverage.html" ><span class="fa fa-tasks"></span>Documentation coverage</a>
                           </li>
                   
                           <li class="divider"></li>
                           <li class="copyright">
                                   Documentation generated using <a href="https://compodoc.github.io/compodoc/" target="_blank">
                                               <img src="..//images/compodoc-vectorise.svg" class="img-responsive">
                                   </a>
                           </li>
                   
                       </ul>
                   
                   </nav>
               </div>
               <div class="content class">
                   <div class="content-data">






<ol class="breadcrumb">
  <li>Classes</li>
  <li>Draft</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
    <li class="active">
        <a href="#infos" id="infos-tab" role="tab" data-toggle="tab">Infos</a>
    </li>
    <li>
        <a href="#source" role="tab" id="source-tab" data-toggle="tab">Source</a>
    </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="infos">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/app/core/model/draft.ts</code>
        </p>

            <p class="comment">
                <h3>Description</h3>
            </p>
            <p class="comment">
                <p>Definition and implementation of draft object.</p>

            </p>

            <section>
                <h3 id="constructor">Constructor</h3>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <code>constructor(undefined: { [x: string]: any; })</code>
                                </td>
                            </tr>
            
                        </tbody>
                    </table>
            </section>

            <section>
                <h3 id="methods">Methods</h3>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> reload</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>reload(undefined: { [x: string]: any; })</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description"><p>a method to import the parameters from one draft into another<br>used when we need to maintain the id of a parent draft, but load new values</p>
            </div>
                                        <div class="io-description">
                                                <b>Parameters :</b>
                                                <ul class="jsdoc-params">
                                                        <li>
                                                            <div>
                                                                <b>param0</b>
                                                            </div>
                                                            <div>
                                                                
                                                            </div>
                                                        </li>
                                                </ul>
                                        </div>
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                            <div class="io-description">
                                                
                                            </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> reloadForMixer</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>reloadForMixer(undefined: { [x: string]: any; })</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description"><p>reload for mixer runs when updating drafts on moves and is scaled down to its most limited functionality<br>to ensure speed</p>
            </div>
                                        <div class="io-description">
                                                <b>Parameters :</b>
                                                <ul class="jsdoc-params">
                                                        <li>
                                                            <div>
                                                                <b>param0</b>
                                                            </div>
                                                            <div>
                                                                
                                                            </div>
                                                        </li>
                                                </ul>
                                        </div>
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                            <div class="io-description">
                                                
                                            </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> makeRandomPattern</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>makeRandomPattern(w: number, h: number)</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> recomputeWidth</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>recomputeWidth()</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> hasCell</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>hasCell(i: number, j: number)</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>boolean</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> isUp</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>isUp(i: number, j: number)</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>boolean</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> isSet</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>isSet(i: number, j: number)</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>boolean</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> updateWarpSystemsFromPattern</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>updateWarpSystemsFromPattern(pattern: number[])</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> updateWeftSystemsFromPattern</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>updateWeftSystemsFromPattern(pattern: number[])</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> updateWeftShuttlesFromPattern</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>updateWeftShuttlesFromPattern(pattern: number[])</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> updateWarpShuttlesFromPattern</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>updateWarpShuttlesFromPattern(pattern: number[])</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> isMask</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>isMask(i: number, j: number)</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>boolean</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> setMask</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>setMask(i: number, j: number, bool: boolean)</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> setHeddle</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>setHeddle(i: number, j: number, bool: boolean)</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> rowToSystem</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>rowToSystem(screen_row: number)</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> rowToShuttle</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>rowToShuttle(screen_row: number)</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> colToSystem</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>colToSystem(col: number)</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> colToShuttle</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>colToShuttle(col: number)</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> updateVisible</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>updateVisible()</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> addLabel</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>addLabel(row: number, label: any)</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> createConnection</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>createConnection(shuttle: <a href="../classes/Shuttle.html" >Shuttle</a>, line: any)</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> deleteConnection</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>deleteConnection(lineId: number)</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> trimUnsetRows</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>trimUnsetRows()</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description"><p>removes any boundary rows that are unset</p>
            </div>
                                        <div class="io-description">
                                        </div>
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>boolean</code>
            
                                        </div>
                                            <div class="io-description">
                                                
                                            </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> trimUnsetCols</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>trimUnsetCols()</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description"><p>removes any boundary cols that are unset</p>
            </div>
                                        <div class="io-description">
                                        </div>
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                            <div class="io-description">
                                                
                                            </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> deleteNRowsFromFront</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>deleteNRowsFromFront(n: number)</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> deleteNRowsFromBack</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>deleteNRowsFromBack(n: number)</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> insertRows</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>insertRows(amount: number)</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> insertRow</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>insertRow(i: number, shuttleId: number, systemId: number)</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> cloneRow</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>cloneRow(i: number, c: number, shuttleId: number, systemId: number)</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> deleteRow</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>deleteRow(i: number)</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> insertSingleRow</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>insertSingleRow(si: number)</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> deleteSingleRow</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>deleteSingleRow(si: number)</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> deleteRows</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>deleteRows(amount: number)</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> insertCol</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>insertCol(i: number, shuttleId: number, systemId: number)</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> cloneCol</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>cloneCol(i: number, shuttleId: number, systemId: number)</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> deleteCol</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>deleteCol(i: number)</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> addShuttle</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>addShuttle(shuttle: any)</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> addWeftSystem</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>addWeftSystem(system: any)</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> addWarpSystem</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>addWarpSystem(system: any)</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> getWeftSystemCode</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>getWeftSystemCode(index: any)</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> getWarpSystemCode</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>getWarpSystemCode(index: any)</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> getColor</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>getColor(index: any)</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> getColorCol</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>getColorCol(index: any)</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> updateDraftFromThreading</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>updateDraftFromThreading(updates: any)</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> updateDraftFromTreadling</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>updateDraftFromTreadling(updates: any)</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> updateDraftFromTieup</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>updateDraftFromTieup(updates: any)</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> recalculateDraft</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>recalculateDraft(tieup: any, treadling: any, threading: any)</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> getDirection</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>getDirection(neighbors: number, is_up: boolean)</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>string</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> updatePoles</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>updatePoles(i: number, j: number)</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> pingNeighbors</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>pingNeighbors(i: number, j: number)</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>number</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> hasWestNeighbor</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>hasWestNeighbor(i: number, j: number)</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>boolean</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> setWestNeighbors</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>setWestNeighbors(i: number, j: number)</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> unsetWestNeighbors</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>unsetWestNeighbors(i: number, j: number)</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> hasEastNeighbor</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>hasEastNeighbor(i: number, j: number)</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>boolean</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> setEastNeighbors</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>setEastNeighbors(i: number, j: number)</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> unsetEastNeighbors</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>unsetEastNeighbors(i: number, j: number)</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> hasNorthNeighbor</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>hasNorthNeighbor(i: number, j: number, shuttle_id: number)</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>boolean</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> setNorthNeighbors</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>setNorthNeighbors(i: number, j: number, shuttle_id: number)</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>boolean</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> hasSouthNeighbor</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>hasSouthNeighbor(i: number, j: number, shuttle_id: number)</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>boolean</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> recomputeLoom</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>recomputeLoom()</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> updateSystemVisibility</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>updateSystemVisibility(type: string)</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> setNorthSouth</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>setNorthSouth(row: number, i: number)</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> setEastWest</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>setEastWest(row: number, i: number)</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> setSouth</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>setSouth(row: number, i: number)</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> setNorth</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>setNorth(row: number, i: number)</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> setEast</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>setEast(row: number, i: number)</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> setWest</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>setWest(row: number, i: number)</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> getNextPath</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>getNextPath(paths: any, i: any)</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> computeYarnPaths</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>computeYarnPaths()</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b><span class="modifier">Public</span> fillArea</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <span class="modifier-icon method fa fa-play circle">
                                            <span class="fa fa-circle"></span>
                                        </span>
                                    <code>fillArea(selection: <a href="../classes/Selection.html" >Selection</a>, pattern: <a href="../classes/Pattern.html" >Pattern</a>, type: string)</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description"><p>Fills in selected area of canvas. Updates the pattern within selection.- the pattern used to fill the area.- the type of logic used to fill selected area.</p>
            </div>
                                        <div class="io-description">
                                                <b>Parameters :</b>
                                                <ul class="jsdoc-params">
                                                        <li>
                                                            <div>
                                                                <b>selection</b>
                                                                    :     <code><a href="../classes/Selection.html" target="_self" >Selection</a></code>
            
                                                            </div>
                                                            <div>
                                                                <ul>
            <li>defined user selected area to fill.</li>
            </ul>
            
                                                            </div>
                                                        </li>
                                                </ul>
                                        </div>
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                            <div class="io-description">
                                                
                                            </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b><span class="modifier">Public</span> fill</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <span class="modifier-icon method fa fa-play circle">
                                            <span class="fa fa-circle"></span>
                                        </span>
                                    <code>fill(pattern: <a href="../classes/Cell.html" >Cell[][]</a>, type: string)</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description"><p>Fills in the entire draft- the pattern used to fill the area.- the type of logic used to fill selected area.</p>
            </div>
                                        <div class="io-description">
                                        </div>
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                            <div class="io-description">
                                                
                                            </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b><span class="modifier">Private</span> updateLoomFromDraft</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <span class="modifier-icon method fa fa-play lock">
                                            <span class="fa fa-lock"></span>
                                        </span>
                                    <code>updateLoomFromDraft(currentPos: any)</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>boolean</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
            </section>


            <section>
                <h3 id="inputs">Properties</h3>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> colShuttleMapping</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <code>colShuttleMapping:     <code>number[]</code>
            </bcode>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> colShuttlePattern</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <code>colShuttlePattern:     <code>number[]</code>
            </bcode>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> colSystemMapping</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <code>colSystemMapping:     <code>number[]</code>
            </bcode>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> colSystemPattern</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <code>colSystemPattern:     <code>number[]</code>
            </bcode>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> connections</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <code>connections:     <code>any[]</code>
            </bcode>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> epi</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <code>epi:     <code>number</code>
            </bcode>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> id</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <code>id:     <code>number</code>
            </bcode>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> labels</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <code>labels:     <code>any[]</code>
            </bcode>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> loom</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <code>loom:     <code><a href="../classes/Loom.html" target="_self" >Loom</a></code>
            </bcode>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> masks</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <code>masks:     <code>String[]</code>
            </bcode>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> name</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <code>name:     <code>string</code>
            </bcode>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> notes</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <code>notes:     <code>string</code>
            </bcode>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> pattern</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <code>pattern:     <code><a href="../classes/Cell.html" target="_self" >Cell[][]</a></code>
            </bcode>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> patterns</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <code>patterns:     <code><a href="../classes/Pattern.html" target="_self" >Pattern[]</a></code>
            </bcode>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> rowShuttleMapping</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <code>rowShuttleMapping:     <code>number[]</code>
            </bcode>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> rowShuttlePattern</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <code>rowShuttlePattern:     <code>number[]</code>
            </bcode>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> rowSystemMapping</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <code>rowSystemMapping:     <code>number[]</code>
            </bcode>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> rowSystemPattern</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <code>rowSystemPattern:     <code>number[]</code>
            </bcode>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> shuttles</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <code>shuttles:     <code><a href="../classes/Shuttle.html" target="_self" >Shuttle[]</a></code>
            </bcode>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> units</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <code>units:     <code>string</code>
            </bcode>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> visibleRows</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <code>visibleRows:     <code>number[]</code>
            </bcode>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> warp_systems</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <code>warp_systems:     <code><a href="../classes/System.html" target="_self" >System[]</a></code>
            </bcode>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> warps</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <code>warps:     <code>number</code>
            </bcode>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> weft_systems</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <code>weft_systems:     <code><a href="../classes/System.html" target="_self" >System[]</a></code>
            </bcode>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> wefts</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <code>wefts:     <code>number</code>
            </bcode>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> width</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <code>width:     <code>number</code>
            </bcode>
                                </td>
                            </tr>
                        </tbody>
                    </table>
            </section>
    </div>
    <div class="tab-pane fade tab-source-code" id="source">
        <pre><code class="hljs javascript">import { Shuttle } from &#x27;./shuttle&#x27;;
import { System } from &#x27;./system&#x27;;
import { Loom } from &#x27;./loom&#x27;;
import { Cell } from &#x27;./cell&#x27;;
import { Pattern } from &#x27;./pattern&#x27;;
import { Selection } from &#x27;../../weaver/model/selection&#x27;;
import { Point, Interlacement } from &#x27;./datatypes&#x27;;

import * as _ from &#x27;lodash&#x27;;

/**
 * Definition of draft interface.
 * @interface inteface to a draft object
 */
export interface DraftInterface {

  id: number;
  name: string;
  notes: string;

  pattern: Array&lt;Array&lt;Cell&gt;&gt;; // the single design pattern
  shuttles: Array&lt;Shuttle&gt;;    //the shuttles used in this draft 
  
  //tracks stores row/col index, shuttle index
  rowShuttleMapping: Array&lt;number&gt;;
  colShuttleMapping: Array&lt;number&gt;;  
  rowShuttlePattern: Array&lt;number&gt;;
  colShuttlePattern: Array&lt;number&gt;;

  rowSystemMapping: Array&lt;number&gt;;
  colSystemMapping: Array&lt;number&gt;;
  rowSystemPattern: Array&lt;number&gt;;
  colSystemPattern: Array&lt;number&gt;;

  visibleRows: Array&lt;number&gt;; //this seems to be something that can belong to the renderer
  patterns: Array&lt;Pattern&gt;; //the collection of smaller subpatterns from the pattern bar 
 
  masks: Array&lt;String&gt;; //associates a mask id with a name
  
  weft_systems: Array&lt;System&gt;; //weft-systems
  warp_systems: Array&lt;System&gt;; //warp-systems


  connections: Array&lt;any&gt;;
  labels: Array&lt;any&gt;;
  
  wefts: number;
  warps: number;
  width: number;
  epi: number;
  units: string;
  loom: Loom;


}

/**
 * Definition and implementation of draft object.
 * @class stores the draft 
 * @param a user defined for this draft used for saving
 * @param a unique id for this draft
 */
export class Draft implements DraftInterface {
  name: string;
  id: number;

  pattern: Array&lt;Array&lt;Cell&gt;&gt;; // the single design pattern
  shuttles: Array&lt;Shuttle&gt;;    //the shuttles used in this draft 
  notes: string;

  //tracks stores row/col index, shuttle index
  rowShuttleMapping: Array&lt;number&gt;;
  colShuttleMapping: Array&lt;number&gt;;  
  rowShuttlePattern: Array&lt;number&gt;;
  colShuttlePattern: Array&lt;number&gt;;
  
  //tracks stores row/col index with the system index
  rowSystemMapping: Array&lt;number&gt;;
  colSystemMapping: Array&lt;number&gt;;
  rowSystemPattern: Array&lt;number&gt;; //stores a pattern used for rows
  colSystemPattern: Array&lt;number&gt;; //stores a pattern of ids of cols

  visibleRows: Array&lt;number&gt;;

  patterns: Array&lt;Pattern&gt;; //the collection of smaller subpatterns from the pattern bar 
  masks: Array&lt;String&gt;; //associates a mask id with a name
  
  weft_systems: Array&lt;System&gt;; //weft-systems
  warp_systems: Array&lt;System&gt;; //warp-systems

  // rowMaterialMap: Array&lt;number&gt;;
  // colMaterialMap: Array&lt;number&gt;;


  connections: Array&lt;any&gt;;
  labels: Array&lt;any&gt;;
  
  wefts: number;
  warps: number;
  width: number;
  epi: number;
  units: string;
  loom: Loom;

  constructor({...params}) {
    this.id &#x3D; Date.now();

    this.name &#x3D; (params.name &#x3D;&#x3D;&#x3D; undefined) ?  &#x27;adacad-draft&#x27; : params.name;
    this.wefts &#x3D; (params.wefts &#x3D;&#x3D;&#x3D; undefined) ?  8 : params.wefts;
    this.warps &#x3D; (params.warps &#x3D;&#x3D;&#x3D; undefined) ? 8 : params.warps;
    this.epi &#x3D; (params.epi &#x3D;&#x3D;&#x3D; undefined) ? 10 : params.epi;
    this.units &#x3D; (params.units &#x3D;&#x3D;&#x3D; undefined) ? &quot;in&quot; : params.units;
    this.visibleRows &#x3D; (params.visibleRows &#x3D;&#x3D;&#x3D; undefined) ? [] : params.visibleRows;
    this.pattern &#x3D; (params.pattern &#x3D;&#x3D;&#x3D; undefined) ? [] : params.pattern;
    this.connections &#x3D; (params.connections &#x3D;&#x3D;&#x3D; undefined)? [] : params.connections;
    this.labels &#x3D; (params.labels &#x3D;&#x3D;&#x3D; undefined)? [] : params.labels;
    this.masks &#x3D; (params.masks &#x3D;&#x3D;&#x3D; undefined)? [] : params.masks;
    this.notes &#x3D; (params.notes &#x3D;&#x3D;&#x3D; undefined)? &quot;&quot; : params.notes;



    if(params.loom &#x3D;&#x3D;&#x3D; undefined) {
      this.loom &#x3D; new Loom(&#x27;frame&#x27;, this.wefts, this.warps, 8, 10);

    } else {

      this.loom &#x3D; new Loom(params.loom.type, this.wefts, this.warps, params.loom.num_frames, params.loom.num_treadles);
      if(params.loom.threading !&#x3D; undefined) this.loom.threading &#x3D; params.loom.threading;
      if(params.loom.tieup !&#x3D; undefined) this.loom.tieup &#x3D; params.loom.tieup;
      if(params.loom.treadling !&#x3D; undefined) this.loom.treadling &#x3D; params.loom.treadling;
    }

  

    //nothing has been added, load with 2 mateials and 1 shuttle on each material
    if(params.shuttles &#x3D;&#x3D;&#x3D; undefined){

      const randomColor &#x3D; Math.floor(Math.random()*16777215).toString(16);

      let s0 &#x3D; new Shuttle({id: 0, name: &#x27;Color 1&#x27;, type: 0,  thickness:50, color: &#x27;#333333&#x27;, visible: true, insert:false, notes: &quot;&quot;});
      let s1 &#x3D; new Shuttle({id: 1, name: &#x27;Color 2&#x27;, type: 0, thickness:50, color: &#x27;#&#x27;+randomColor, visible:true, insert:false, notes: &quot;&quot;});
      let s2 &#x3D; new Shuttle({id: 2, name: &#x27;Conductive&#x27;, type: 1, thickness:50, color: &#x27;#61c97d&#x27;, visible:true, insert:false, notes: &quot;&quot;});
      this.shuttles &#x3D; [s0, s1, s2];

    }else{

      var shuttles &#x3D; params.shuttles
      var sd &#x3D; [];
      for (var i in shuttles) {
        var s &#x3D; new Shuttle(shuttles[i]);
        sd.push(s);
      }
      this.shuttles &#x3D; sd;
    }


    //automatically create 4
    if(params.warp_systems &#x3D;&#x3D;&#x3D; undefined){

      let s0 &#x3D; new System({id: 0, name: &#x27;Warp System 1&#x27;, visible: true, notes: &quot;&quot;});
      let s1 &#x3D; new System({id: 1, name: &#x27;Warp System 2&#x27;, visible: true, notes: &quot;&quot;});
      let s2 &#x3D; new System({id: 2, name: &#x27;Warp System 3&#x27;, visible: true, notes: &quot;&quot;});
      let s3 &#x3D; new System({id: 3, name: &#x27;Warp System 4&#x27;, visible: true, notes: &quot;&quot;});
      this.warp_systems &#x3D; [s0, s1, s2, s3];
    }else{
      var systems &#x3D; params.warp_systems
          var sd &#x3D; [];
          for (var i in systems) {
            var sys &#x3D; new System(systems[i]);
            sd.push(sys);
          }
        this.warp_systems &#x3D; sd;
      
      while(this.warp_systems.length &lt; 4){
        this.warp_systems.push( new System({id: this.warp_systems.length, name: &#x27;Warp System &#x27;+this.warp_systems.length, visible: false, notes: &quot;&quot;}));
      }
    }

    this.colSystemPattern &#x3D; [];
    if(params.colSystemPattern &#x3D;&#x3D;&#x3D; undefined){
      for(let i &#x3D; 0; i &lt; this.warp_systems.length; i++){
        this.colSystemPattern.push(i);
      }
    }else{
      this.colSystemPattern &#x3D; params.colSystemPattern;
    }


    if(params.weft_systems &#x3D;&#x3D;&#x3D; undefined){
      let s0 &#x3D; new System({id: 0, name: &#x27;Weft System 1&#x27;, visible: true, notes: &quot;&quot;});
      let s1 &#x3D; new System({id: 1, name: &#x27;Weft System 2&#x27;, visible: true, notes: &quot;&quot;});
      let s2 &#x3D; new System({id: 2, name: &#x27;Weft System 3&#x27;, visible: true, notes: &quot;&quot;});
      let s3 &#x3D; new System({id: 3, name: &#x27;Weft System 4&#x27;, visible: true, notes: &quot;&quot;});
      this.weft_systems &#x3D; [s0, s1, s2, s3];
    }else{
      var systems &#x3D; params.weft_systems
      var sd &#x3D; [];
      for (var i in systems) {
        var sys &#x3D; new System(systems[i]);
        sd.push(sys);
      }
      this.weft_systems &#x3D; sd;

      while(this.weft_systems.length &lt; 4){
        this.weft_systems.push( new System({id: this.weft_systems.length, name: &#x27;Weft System &#x27;+this.weft_systems.length, visible: false, notes: &quot;&quot;}));
      }
    }

    this.rowSystemPattern &#x3D; [];
    if(params.rowSystemPattern &#x3D;&#x3D;&#x3D; undefined){
      for(let i &#x3D; 0; i &lt; this.weft_systems.length; i++){
        this.rowSystemPattern.push(i);
      }
    }else{
      this.rowSystemPattern &#x3D; params.rowSystemPattern;
    }

    if(params.rowSystemMapping &#x3D;&#x3D;&#x3D; undefined){
      this.rowSystemMapping &#x3D; [];
      for(var ii &#x3D; 0; ii &lt; this.wefts; ii++) {
          let repeat_id:number &#x3D; ii % this.rowSystemPattern.length;
          this.rowSystemMapping.push(this.rowSystemPattern[repeat_id]); 
      }
    }else{
        this.rowSystemMapping &#x3D; params.rowSystemMapping;
    }

    if(params.colSystemMapping &#x3D;&#x3D;&#x3D; undefined){
      this. colSystemMapping &#x3D; [];
    for(var ii &#x3D; 0; ii &lt; this.warps; ii++) {
          let repeat_id &#x3D; ii % this.colSystemPattern.length;
          this.colSystemMapping.push(this.colSystemPattern[repeat_id]);
        }
      }else{
        this.colSystemMapping &#x3D; params.colSystemMapping;
      }


    this.rowShuttlePattern &#x3D; [];
    if(params.rowShuttlePattern &#x3D;&#x3D;&#x3D; undefined){
      for(let i &#x3D; 0; i &lt; this.shuttles.length; i++){
        this.rowShuttlePattern.push(i);
      }
    }else{
      this.rowShuttlePattern &#x3D; params.rowShuttlePattern;
    }

    if(params.rowShuttleMapping &#x3D;&#x3D;&#x3D; undefined){
      this.rowShuttleMapping &#x3D; [];
      for(var ii &#x3D; 0; ii &lt; this.wefts; ii++) {
          let repeat_id:number &#x3D; ii % this.rowShuttlePattern.length;
          this.rowShuttleMapping.push(this.rowShuttlePattern[repeat_id]); 
          this.visibleRows.push(ii);
      }
    }else{
        this.rowShuttleMapping &#x3D; params.rowShuttleMapping;
    }


    this.colShuttlePattern &#x3D; [];
    if(params.colShuttlePattern &#x3D;&#x3D;&#x3D; undefined){
      for(let i &#x3D; 0; i &lt; this.shuttles.length; i++){
        this.colShuttlePattern.push(i);
      }
    }else{
      this.colShuttlePattern &#x3D; params.colShuttlePattern;
    }



    if(params.colShuttleMapping &#x3D;&#x3D;&#x3D; undefined){
      this. colShuttleMapping &#x3D; [];
    for(var ii &#x3D; 0; ii &lt; this.warps; ii++) {
          this.colShuttleMapping.push(0);
        }
      }else{
        this.colShuttleMapping &#x3D; params.colShuttleMapping;
      }

    if(params.patterns !&#x3D;&#x3D; undefined){
          var patterns &#x3D; params.patterns
          var pts &#x3D; [];
          for (i in patterns) {
            const single_pattern: Array&lt;Pattern&gt; &#x3D; patterns[i];
            const formatted: Pattern &#x3D; new Pattern(single_pattern); 
            pts.push(formatted);
          }
        this.patterns &#x3D; pts;
    }


    //turn this off for now
   // var fill_pattern &#x3D; this.makeRandomPattern(this.loom.num_frames, this.loom.num_treadles);

    this.pattern &#x3D; [];
    for(var ii &#x3D; 0; ii &lt; this.wefts; ii++) {
        this.pattern.push([]);

        for (var j &#x3D; 0; j &lt; this.warps; j++){
          if (params.pattern &#x3D;&#x3D;&#x3D; undefined) {
            this.pattern[ii].push(new Cell(null));
            
          }else{
            this.pattern[ii][j]&#x3D; new Cell(null);
            this.pattern[ii][j].reloadCell(params.pattern[ii][j]); //this takes a cell param and updates from there   

          }
        }
    }

    // if (params.masks &#x3D;&#x3D;&#x3D; undefined) {
    //   // this.masks &#x3D; [];
    //   // for(var ii &#x3D; 0; ii &lt; this.wefts; ii++) {
    //   //   this.masks.push([]);
    //   //   for (var j &#x3D; 0; j &lt; this.warps; j++)
    //   //     this.masks[ii].push(0);
    //   // }
    // }else{
    //   this.masks &#x3D; params.masks;
    // } 

    if(this.loom.type &#x3D;&#x3D; &quot;frame&quot;){
      this.recomputeLoom();
    }

    this.computeYarnPaths();
    this.recomputeWidth();

  }

/**
 * a method to import the parameters from one draft into another
 * used when we need to maintain the id of a parent draft, but load new values
 * @param param0 
 */
  reload({...params}) {

    console.log(&quot;within reload&quot;, params);

    //clear out any variables that were storing dynamic arrays linked to the draft
    this.visibleRows &#x3D; [];
    this.patterns &#x3D; [];

    this.name &#x3D; (params.name &#x3D;&#x3D;&#x3D; undefined) ?  &#x27;adacad-draft&#x27; : params.name;

    this.id &#x3D; (params.id &#x3D;&#x3D;&#x3D; undefined) ?  -1 : params.id;
    this.wefts &#x3D; (params.wefts &#x3D;&#x3D;&#x3D; undefined) ?  30 : params.wefts;
    this.warps &#x3D; (params.warps &#x3D;&#x3D;&#x3D; undefined) ? 40 : params.warps;
    this.epi &#x3D; (params.epi &#x3D;&#x3D;&#x3D; undefined) ? 10 : params.epi;
    this.units &#x3D; (params.units &#x3D;&#x3D;&#x3D; undefined) ? &quot;in&quot; : params.units;
    this.connections &#x3D; (params.connections &#x3D;&#x3D;&#x3D; undefined)? [] : params.connections;
    this.labels &#x3D; (params.labels &#x3D;&#x3D;&#x3D; undefined)? [] : params.labels;
    this.masks &#x3D; (params.masks &#x3D;&#x3D;&#x3D; undefined)? [] : params.masks;

    this.loom.loadNew(&#x27;frame&#x27;, this.wefts, this.warps, 8, 10);


    if(params.loom &#x3D;&#x3D;&#x3D; undefined) {
        this.loom.loadNew(&#x27;frame&#x27;, this.wefts, this.warps, 8, 10);
    } else {
        this.loom.loadNew(params.loom.type, this.wefts, this.warps, params.loom.num_frames, params.loom.num_treadles);
        if(params.loom.threading !&#x3D;&#x3D; undefined) this.loom.threading &#x3D; params.loom.threading;
        if(params.loom.tieup !&#x3D;&#x3D; undefined) this.loom.tieup &#x3D; params.loom.tieup;
        if(params.loom.treadling !&#x3D;&#x3D; undefined) this.loom.treadling &#x3D; params.loom.treadling;
    }

  

    //nothing has been added, load with 2 mateials and 1 shuttle on each material
    if(params.shuttles &#x3D;&#x3D;&#x3D; undefined){

      this.shuttles &#x3D; [];
      //this would have already been declared 
      const randomColor &#x3D; Math.floor(Math.random()*16777215).toString(16);

      let s0 &#x3D; new Shuttle({id: 0, name: &#x27;Color 1&#x27;, type: 0,  thickness:50, color: &#x27;#333333&#x27;, visible: true, insert:false, notes: &quot;&quot;});
      let s1 &#x3D; new Shuttle({id: 1, name: &#x27;Color 2&#x27;, type: 0, thickness:50, color: &#x27;#&#x27;+randomColor, visible:true, insert:false, notes: &quot;&quot;});
      let s2 &#x3D; new Shuttle({id: 2, name: &#x27;Conductive&#x27;, type: 1, thickness:50, color: &#x27;#61c97d&#x27;, visible:true, insert:false, notes: &quot;&quot;});
      this.shuttles &#x3D; [s0, s1, s2];

    }else{

      var shuttles &#x3D; params.shuttles
      var sd &#x3D; [];
      for (var i in shuttles) {
        var s &#x3D; new Shuttle(shuttles[i]);
        sd.push(s);
      }
      this.shuttles &#x3D; sd;
    }


    //automatically create 4
    if(params.warp_systems &#x3D;&#x3D;&#x3D; undefined){

      // let s0 &#x3D; new System({id: 0, name: &#x27;Warp System 1&#x27;, visible: true, notes: &quot;&quot;});
      // let s1 &#x3D; new System({id: 1, name: &#x27;Warp System 2&#x27;, visible: false, notes: &quot;&quot;});
      // let s2 &#x3D; new System({id: 2, name: &#x27;Warp System 3&#x27;, visible: false, notes: &quot;&quot;});
      // let s3 &#x3D; new System({id: 3, name: &#x27;Warp System 4&#x27;, visible: false, notes: &quot;&quot;});
      // this.warp_systems &#x3D; [s0, s1, s2, s3];
    
    }else{
      var systems &#x3D; params.warp_systems
          var sd &#x3D; [];
          for (var i in systems) {
            var sys &#x3D; new System(systems[i]);
            sd.push(sys);
          }
        this.warp_systems &#x3D; sd;
      
      while(this.warp_systems.length &lt; 4){
        this.warp_systems.push( new System({id: this.warp_systems.length, name: &#x27;Warp System &#x27;+this.warp_systems.length, visible: false, notes: &quot;&quot;}));
      }

    }


    if(params.weft_systems &#x3D;&#x3D;&#x3D; undefined){
      // let s0 &#x3D; new System({id: 0, name: &#x27;Weft System 1&#x27;, visible: true, notes: &quot;&quot;});
      // let s1 &#x3D; new System({id: 1, name: &#x27;Weft System 2&#x27;, visible: false, notes: &quot;&quot;});
      // let s2 &#x3D; new System({id: 2, name: &#x27;Weft System 3&#x27;, visible: false, notes: &quot;&quot;});
      // let s3 &#x3D; new System({id: 3, name: &#x27;Weft System 4&#x27;, visible: false, notes: &quot;&quot;});
      // this.weft_systems &#x3D; [s0, s1, s2, s3];
    }else{
      var systems &#x3D; params.weft_systems
      var sd &#x3D; [];
      for (var i in systems) {
        var sys &#x3D; new System(systems[i]);
        sd.push(sys);
      }
      this.weft_systems &#x3D; sd;

      while(this.weft_systems.length &lt; 4){
        this.weft_systems.push( new System({id: this.weft_systems.length, name: &#x27;Weft System &#x27;+this.weft_systems.length, visible: true, notes: &quot;&quot;}));
      }
    }

    if(params.rowSystemMapping &#x3D;&#x3D;&#x3D; undefined){
      this.rowSystemMapping &#x3D; [];
      for(var ii &#x3D; 0; ii &lt; this.wefts; ii++) {
          this.rowSystemMapping.push(0); 
      }
    }else{
        this.rowSystemMapping &#x3D; params.rowSystemMapping;
    }

    if(params.colSystemMapping &#x3D;&#x3D;&#x3D; undefined){
      this. colSystemMapping &#x3D; [];
    for(var ii &#x3D; 0; ii &lt; this.warps; ii++) {
          this.colSystemMapping.push(0);
        }
      }else{
        this.colSystemMapping &#x3D; params.colSystemMapping;
      }

    if(params.rowShuttleMapping &#x3D;&#x3D;&#x3D; undefined){
      this.rowShuttleMapping &#x3D; [];
      for(var ii &#x3D; 0; ii &lt; this.wefts; ii++) {
          this.rowShuttleMapping.push(1); 
          this.visibleRows.push(ii); //curious why this is here - LD 3/20
      }
    }else{
        this.rowShuttleMapping &#x3D; params.rowShuttleMapping;
    }

    if(params.colShuttleMapping &#x3D;&#x3D;&#x3D; undefined){
      this. colShuttleMapping &#x3D; [];
    for(var ii &#x3D; 0; ii &lt; this.warps; ii++) {
          this.colShuttleMapping.push(0);
        }
      }else{
        this.colShuttleMapping &#x3D; params.colShuttleMapping;
      }


    if(params.patterns !&#x3D;&#x3D; undefined){
          var patterns &#x3D; params.patterns
          var pts:Array&lt;Pattern&gt; &#x3D; [];
          for (i in patterns) {
            pts.push(new Pattern(patterns[i]));
          }
        this.patterns &#x3D; pts;
    } else if (params.loom.threading !&#x3D;&#x3D; undefined &amp;&amp; params.loom.treadling !&#x3D;&#x3D; undefined &amp;&amp; params.loom.tieup !&#x3D;&#x3D; undefined) {
      this.recalculateDraft(params.loom.tieup, params.loom.treadling, params.loom.threading);
    }



  
    this.pattern &#x3D; [];
    for(var ii &#x3D; 0; ii &lt; this.wefts; ii++) {
        this.pattern.push([]);

        for (var j &#x3D; 0; j &lt; this.warps; j++){
          if (params.pattern &#x3D;&#x3D;&#x3D; undefined) {
            this.pattern[ii].push(new Cell(false));
          }else{

            this.pattern[ii][j]&#x3D; new Cell(null);
            this.pattern[ii][j].reloadCell(params.pattern[ii][j]); //this takes a cell param and updates from there
          }
        }
    }
    // if (params.masks &#x3D;&#x3D;&#x3D; undefined) {
    //   // this.masks &#x3D; [];
    //   // for(var ii &#x3D; 0; ii &lt; this.wefts; ii++) {
    //   //   this.masks.push([]);
    //   //   for (var j &#x3D; 0; j &lt; this.warps; j++)
    //   //     this.masks[ii].push(0);
    //   // }
    // }else{
    //   this.masks &#x3D; params.masks;
    // } 

    //this is probably the case if we uploaded a wif, but need to add a variable to check the origin to be sure
    if(params.loom !&#x3D;&#x3D; undefined){
      this.recalculateDraft(this.loom.tieup, this.loom.treadling, this.loom.threading.reverse());
      this.colShuttleMapping &#x3D; this.colShuttleMapping.reverse(); //reverse these to match
      this.colSystemMapping &#x3D; this.colSystemMapping.reverse();
    }else if(this.loom.type &#x3D;&#x3D; &quot;frame&quot;){
      this.recomputeLoom();
    }

    this.computeYarnPaths();
    this.recomputeWidth();
    this.updateVisible();
  }


  /**
 * reload for mixer runs when updating drafts on moves and is scaled down to its most limited functionality
 * to ensure speed
 * @param param0 
 */
   reloadForMixer({...params}) {

    this.visibleRows &#x3D; [];

    this.name &#x3D; (params.name &#x3D;&#x3D;&#x3D; undefined) ?  &#x27;adacad-draft&#x27; : params.name;
    this.wefts &#x3D; (params.wefts &#x3D;&#x3D;&#x3D; undefined) ?  30 : params.wefts;
    this.warps &#x3D; (params.warps &#x3D;&#x3D;&#x3D; undefined) ? 40 : params.warps;
    this.pattern &#x3D; (params.pattern &#x3D;&#x3D;&#x3D; undefined) ? [] : params.pattern;

    this.pattern &#x3D; [];
    for(var ii &#x3D; 0; ii &lt; this.wefts; ii++) {
        this.pattern.push([]);

        for (var j &#x3D; 0; j &lt; this.warps; j++){
          if (params.pattern &#x3D;&#x3D;&#x3D; undefined) {
            this.pattern[ii].push(new Cell(null));
            this.pattern[ii][j].unsetHeddle();

          }else{

            this.pattern[ii][j]&#x3D; new Cell(null);

            if(params.pattern[ii][j].isUp()) this.pattern[ii][j].setHeddle(true);
            else this.pattern[ii][j].setHeddle(false);
            
            if(!params.pattern[ii][j].isSet()) this.pattern[ii][j].unsetHeddle();
          }
        }
    }

    for(var ii &#x3D; 0; ii &lt; this.wefts; ii++) {
      this.visibleRows.push(ii); 
    }
  
  }


  //this just makes a random pattern of a given size;
  makeRandomPattern(w: number, h: number){
      var random &#x3D; Array&lt;Array&lt;boolean&gt;&gt;();
      for(var i &#x3D; 0; i &lt; h; i++) {
         random.push([]);
        for(var j &#x3D; 0; j &lt; w; j++) {
          //random[i].push(Math.random()*10%2 &lt; 1);
          if(i &#x3D;&#x3D; j) random[i].push(true);
          else random[i].push(false);
        }
      }
      return random;
  }

  recomputeWidth(){
    this.width &#x3D; (this.units &#x3D;&#x3D;&#x3D; &#x27;in&#x27;) ? this.warps/this.epi : 10 * this.warps/this.epi;
  }

  //assumes i is the draft row
  hasCell(i:number, j:number) : boolean{
    //var row &#x3D; this.visibleRows[i];
    if(i &lt; 0 || i &gt;&#x3D; this.wefts) return false;
    if(j &lt; 0 || j &gt;&#x3D; this.warps) return false;
    return true;
  }
  //assumes i is the draft row
  isUp(i:number, j:number) : boolean{
    if ( i &gt; -1 &amp;&amp; i &lt; this.pattern.length &amp;&amp; j &gt; -1 &amp;&amp; j &lt; this.pattern[0].length) {
      return this.pattern[i][j].isUp();
    } else {
      return false;
    }
  }

    //assumes i is the draft row
    isSet(i:number, j:number) : boolean{
      if ( i &gt; -1 &amp;&amp; i &lt; this.pattern.length &amp;&amp; j &gt; -1 &amp;&amp; j &lt; this.pattern[0].length) {
        return this.pattern[i][j].isSet();
      } else {
        return false;
      }
    }

  // idFromString(s: string){
  //   console.log(&quot;id from string: &quot;, s);
  //   return s.charCodeAt(0)-97;
  // }

  //gets a string from interface and updates accordingly
  updateWarpSystemsFromPattern(pattern:Array&lt;number&gt;){

    //repopulate the system map
    this.colSystemPattern &#x3D; [];
    for(let i &#x3D; 0; i &lt; pattern.length; i++){
      this.colSystemPattern.push(pattern[i]);
    }

    //update the colSystemMapping
    for(let i &#x3D; 0; i &lt; this.colSystemMapping.length; i++){
      let ndx &#x3D; i % this.colSystemPattern.length;
      this.colSystemMapping[i] &#x3D; this.colSystemPattern[ndx];
    }
  }


  //gets a string from interface and updates accordingly
  updateWeftSystemsFromPattern(pattern:Array&lt;number&gt;){

    //repopulate the system map
    this.rowSystemPattern &#x3D; [];
    for(let i &#x3D; 0; i &lt; pattern.length; i++){
      this.rowSystemPattern.push(pattern[i]);
    }

    //update the rowSystemMapping
    for(let i &#x3D; 0; i &lt; this.rowSystemMapping.length; i++){
      let ndx &#x3D; i % this.rowSystemPattern.length;
      this.rowSystemMapping[i] &#x3D; this.rowSystemPattern[ndx];
    }
  }

    //any{id, name, color}
  updateWeftShuttlesFromPattern(pattern:Array&lt;number&gt;){

    //repopulate the system map
    this.rowShuttlePattern &#x3D; []
    for(let i &#x3D; 0; i &lt; pattern.length; i++){
      this.rowShuttlePattern.push(pattern[i]);
    }

    //update the rowShuttleMapping
    for(let i &#x3D; 0; i &lt; this.rowShuttleMapping.length; i++){
      let ndx &#x3D; i % this.rowShuttlePattern.length;
      this.rowShuttleMapping[i] &#x3D; this.rowShuttlePattern[ndx];
    }
  }

      //any{id, name, color}
  updateWarpShuttlesFromPattern(pattern:Array&lt;number&gt;){

    //repopulate the system map
    this.colShuttlePattern &#x3D; []
    for(let i &#x3D; 0; i &lt; pattern.length; i++){
      this.colShuttlePattern.push(pattern[i]);
    }

    //update the rowShuttleMapping
    for(let i &#x3D; 0; i &lt; this.colShuttleMapping.length; i++){
      let ndx &#x3D; i % this.colShuttlePattern.length;
      this.colShuttleMapping[i] &#x3D; this.colShuttlePattern[ndx];
    }
  }



  //assumes i is the draft row
  isMask(i:number, j:number) : boolean{
    // //var row &#x3D; this.visibleRows[i];
    // if ( i &gt; -1 &amp;&amp; i &lt; this.mask.length &amp;&amp; j &gt; -1 &amp;&amp; j &lt; this.mask[0].length) {
    //   return this.mask[i][j];
    // } else {
    //   return false;
    // }
    return false;
  }

  setMask(i:number, j:number, bool:boolean) {
    //var row &#x3D; this.visibleRows[i];
    //this.mask[i][j] &#x3D; bool;
  }  

  //everytime we set a heddle - update the poles 
  setHeddle(i:number, j:number, bool:boolean) {
    this.pattern[i][j].setHeddle(bool);
  }



  rowToSystem(screen_row: number) {
    let index &#x3D; this.visibleRows[screen_row];
    return this.rowSystemMapping[index];
  }

  rowToShuttle(screen_row: number) {
    let index &#x3D; this.visibleRows[screen_row];
    return this.rowShuttleMapping[index];
  }

  colToSystem(col: number){
     return this.colSystemMapping[col];
  }

  colToShuttle(col: number) {
    return this.colShuttleMapping[col];
  }

  updateVisible() {
    var i &#x3D; 0;
    var systems &#x3D; [];
    var visible &#x3D; [];


    for (i &#x3D; 0; i &lt; this.weft_systems.length; i++) {
      systems.push(this.weft_systems[i].visible);
    }

    for (i &#x3D; 0; i&lt; this.rowSystemMapping.length; i++) {
      var show &#x3D; systems[this.rowSystemMapping[i]];

      if (show) {
        visible.push(i);
      }
    }

    this.visibleRows &#x3D; visible;
  }

  addLabel(row: number, label: any) {

  }

  createConnection(shuttle: Shuttle, line: any) {

  }

  deleteConnection(lineId: number) {

  }



  /**
   * removes any boundary rows that are unset
   * @return returns true if it deleted all the rows
   */
  trimUnsetRows() : boolean{

    const rowmap: Array&lt;number&gt; &#x3D; [];
    const to_delete: Array&lt;number&gt; &#x3D; [];

    //make a list of rows that contains the number of set cells
    this.pattern.forEach(row &#x3D;&gt; {
      const active_cells: Array&lt;Cell&gt; &#x3D; row.filter(cell &#x3D;&gt; (cell.isSet()));
      rowmap.push(active_cells.length);
    });

    console.log(&quot;row map&quot;, rowmap);

    let delete_top: number &#x3D; 0;
    let top_hasvalue: boolean &#x3D; false;
    
    //scan from top and bottom to see how many rows we shoudl delete
    for(let ndx &#x3D; 0; ndx &lt; rowmap.length; ndx++){
        if(rowmap[ndx] &#x3D;&#x3D; 0 &amp;&amp; !top_hasvalue){
          delete_top++;
        }else{
          top_hasvalue &#x3D; true;
        }
    }
    console.log(&quot;delete top&quot;, delete_top);

    if(delete_top &#x3D;&#x3D; rowmap.length) return true; //this is empty now
   
    let delete_bottom: number &#x3D; 0;
    let bottom_hasvalue:boolean &#x3D; false;
    for(let ndx &#x3D; rowmap.length -1; ndx &gt;&#x3D; 0; ndx--){
      if(rowmap[ndx] &#x3D;&#x3D; 0 &amp;&amp; !bottom_hasvalue){
        delete_bottom++;
      }else{
        bottom_hasvalue &#x3D; true;
      }
    }

    return false;
  }
  /**
   * removes any boundary cols that are unset
   * @return returns true if it deleted all the cols
   */
  trimUnsetCols(){
    return false;
  }

  deleteNRowsFromFront(n: number) {
      this.wefts -&#x3D; n;
      this.rowShuttleMapping.splice(0, n);
      this.rowSystemMapping.splice(0, n);
      this.pattern.splice(0, n);
      //this.mask.splice(i, n);
      this.loom.treadling.splice(0,n);
      this.updateVisible();
  }

  deleteNRowsFromBack(n: number) {
    this.wefts -&#x3D; n;
    this.rowShuttleMapping.splice(-n, n);
    this.rowSystemMapping.splice(-n, n);
    this.pattern.splice(-n, n);
    //this.mask.splice(i, n);
    this.loom.treadling.splice(-n,n);
    this.updateVisible();
}
  

    //insert a number of rows after the one shown at screen index si
  insertRows(amount: number) {
    
    var row &#x3D; [];
    for(var i &#x3D; 0; i &lt; amount; i++){
      this.rowShuttleMapping.push(0);
      this.rowSystemMapping.push(0);
      this.loom.treadling.push(-1);
      //this.mask.splice(i,0,col);

      row &#x3D; [];
      for (var j &#x3D; 0; j &lt; this.warps; j++) {
          row.push(new Cell(null));
      }

      this.pattern.push(row);

    }
  
    this.wefts +&#x3D; amount;
    this.updateVisible();


  }

  insertRow(i: number, shuttleId: number, systemId:number) {
    

    var col &#x3D; [];

    for (var j &#x3D; 0; j &lt; this.warps; j++) {
      col.push(new Cell(false));
    }

    this.wefts +&#x3D; 1;

    this.rowShuttleMapping.splice(i,0,shuttleId);
    this.rowSystemMapping.splice(i,0,systemId);
    
    this.pattern.splice(i,0,col);
    //this.mask.splice(i,0,col);

    this.loom.treadling.splice(i, 0, -1);


    this.updateVisible();

  }

  //assumes i is the screen index
  cloneRow(i: number, c: number, shuttleId: number, systemId:number) {
    
    var row &#x3D; this.visibleRows[c];
    var col &#x3D; [];

    //copy the selected row
    for(var ndx &#x3D; 0; ndx &lt; this.warps; ndx++){
      col[ndx] &#x3D; new Cell(null);
      col[ndx].setHeddle(this.pattern[c][ndx].isUp());
    }

    this.wefts +&#x3D; 1;

    this.rowShuttleMapping.splice(i, 0, shuttleId);
    this.rowSystemMapping.splice(i, 0, systemId);
    this.pattern.splice(i, 0, col);
    //this.mask.splice(i, 0, col);
    this.loom.treadling.splice(i, 0, this.loom.treadling[i-1]);

    this.updateVisible();
  }

  //assumes i is the screen index
  deleteRow(i: number) {
    var row &#x3D; this.visibleRows[i];
    this.wefts -&#x3D; 1;
    this.rowShuttleMapping.splice(i, 1);
    this.rowSystemMapping.splice(i, 1);
    this.pattern.splice(i, 1);
    //this.mask.splice(i, 1);
    this.loom.treadling.splice(i,1);

    this.updateVisible();
  }


  //inserts a row after the one shown at screen index si
  insertSingleRow(si: number) {
    
    var i &#x3D; this.visibleRows[si];
    let shuttleId: number &#x3D; this.rowShuttleMapping[i];
    let systemId: number &#x3D; this.rowSystemMapping[i];
    var col &#x3D; [];

    for (var j &#x3D; 0; j &lt; this.warps; j++) {
      col.push(new Cell(null));
    }

    this.wefts +&#x3D; 1;

    this.pattern.splice(i,0,col);


    this.rowShuttleMapping.splice(i,0,shuttleId);
    this.rowSystemMapping.splice(i,0,systemId);
    
    //this.mask.splice(i,0,col);

    this.loom.treadling.splice(i, 0, -1);

    this.updateVisible();


  }

  //i is the pattern index row
  // cloneRow(si: number) {
    
  //   var col &#x3D; [];
  //   let i &#x3D; this.visibleRows[si];
  //   let shuttleId: number &#x3D; this.rowShuttleMapping[i];
  //   let systemId: number &#x3D; this.rowSystemMapping[i];

  //   //copy the selected row
  //   for(var ndx &#x3D; 0; ndx &lt; this.warps; ndx++){

  //     const is_set: boolean &#x3D; (this.pattern[i][ndx].isSet()) ? true : null;
  //     col[ndx] &#x3D; new Cell(is_set);
  //     col[ndx].setHeddle(this.pattern[i][ndx].isUp());
  //   }


  //   this.wefts +&#x3D; 1;

  //   this.rowShuttleMapping.splice(i, 0, shuttleId);
  //   this.rowSystemMapping.splice(i, 0, systemId);
  //   this.pattern.splice(i, 0, col);
  //   //this.mask.splice(i, 0, col);
  //   this.loom.treadling.splice(i, 0, this.loom.treadling[i]);
  //   this.updateVisible();


  // }

  //assumes i is the true index, si is the screen index
  deleteSingleRow(si: number) {
    let i &#x3D; this.visibleRows[si];
    this.wefts -&#x3D; 1;
    this.rowShuttleMapping.splice(i, 1);
    this.rowSystemMapping.splice(i, 1);
    this.pattern.splice(i, 1);
    //this.mask.splice(i, 1);
    this.loom.treadling.splice(i,1);
    this.updateVisible();


  }

    //assumes i is the true index
  deleteRows(amount: number) {
    let i &#x3D; this.wefts -1;
    this.wefts -&#x3D; amount;
    this.rowShuttleMapping.splice(i, amount);
    this.rowSystemMapping.splice(i, amount);
    this.pattern.splice(i, amount);
    //this.mask.splice(i, 1);
    this.loom.treadling.splice(i,amount);
    this.updateVisible();
  }

  // updateConnections(index: number, offset: number) {
  //   var i &#x3D; 0;

  //   for (i &#x3D; 0; i &lt; this.connections.length; i++) {
  //     var c &#x3D; this.connections[i];
  //     if (c.start.y &gt; index) {
  //       c.start.y +&#x3D; offset;
  //     }
  //     if (c.end.y &gt; index) {
  //       c.end.y +&#x3D; offset;
  //     }
  //   }
  // }



  // splicePatternCol(i: number, n:number, val:any){
  //   for(var i &#x3D; 0; i &lt; this.wefts; i++){
  //     this.pattern.splice(i,n,val);
  //   }
  // }


  insertCol(i: number, shuttleId: number, systemId:number) {
    
    for (var ndx &#x3D; 0; ndx &lt; this.wefts; ndx++) {
      this.pattern[ndx].splice(i,0, new Cell(null));
    }

    this.warps +&#x3D; 1;
    this.colShuttleMapping.splice(i,0,shuttleId);
    this.colSystemMapping.splice(i,0,systemId);
    this.loom.threading.splice(i, 0, -1);
  }


//assumes i is the screen index
  cloneCol(i: number, shuttleId: number, systemId: number) {
    
    var col &#x3D; [];

    //copy the selected column
    for(var ndx &#x3D; 0; ndx &lt; this.wefts; ndx++){
      const is_set: boolean &#x3D; (this.pattern[i][ndx].isSet()) ? true : null;
      var cell  &#x3D; new Cell(is_set);
      cell.setHeddle(this.pattern[ndx][i].isUp());
      col.push(cell);
    }


    for(var ndx &#x3D; 0; ndx &lt; this.wefts; ndx++){
      this.pattern[ndx].splice(i,0, col[ndx]);
    }
    
     this.warps +&#x3D; 1;
     this.colShuttleMapping.splice(i, 0, shuttleId);
     this.colSystemMapping.splice(i, 0, systemId);
     this.loom.threading.splice(i, 0, this.loom.threading[i]);

  }


  deleteCol(i: number) {
    var col &#x3D; i;

    //copy the selected column
    for(var ndx &#x3D; 0; ndx &lt; this.wefts; ndx++){
          this.pattern[ndx].splice(i, 1);
    }
    this.warps -&#x3D; 1;
    this.colShuttleMapping.splice(i, 1);
    this.colSystemMapping.splice(i, 1);
    this.loom.threading.splice(i,1);
  }

//always deletes from end
  // deleteCol(i: number) {

  //   this.warps -&#x3D; 1;

  //   //remove one from the end of each row
  //   for (var j &#x3D; 0; j &lt; this.wefts; j++) {
  //     this.pattern[j].splice(i, 1);
  //     // this.masks[j].splice(i, 1);
  //   }


  //   this.colShuttleMapping.splice(i, 1);
  //   this.loom.threading.splice(i, 1);
  // }


// addMaterial(material) {
//     material.setID(this.materials.length);
//     if (!material.thickness) {
//       material.setThickness(this.loom.epi);
//     }
//     this.materials.push(material);
// }


  addShuttle(shuttle) {
    shuttle.setID(this.shuttles.length);
    shuttle.setVisible(true);
    if (!shuttle.thickness) {
      shuttle.setThickness(this.loom.epi);
    }
    this.shuttles.push(shuttle);

    // if (shuttle.image) {
    //   this.insertImage(shuttle);
    // }

  }

  addWeftSystem(system) {
    system.setID(this.weft_systems.length);
    system.setVisible(true);
    this.weft_systems.push(system);
  }

  addWarpSystem(system) {
    system.setID(this.warp_systems.length);
    system.setVisible(true);
    this.warp_systems.push(system);
  }

  //image adds to mask
  // insertImage(shuttle) {
  //   var max &#x3D; this.rowShuttleMapping.length;
  //   var data &#x3D; shuttle.image;
  //   for (var i&#x3D;data.length; i &gt; 0; i--) {
  //     var idx &#x3D; Math.min(max, i);
  //     this.rowShuttleMapping.splice(idx,0,shuttle.id);
  //     this.mask.splice(idx,0,data[i - 1]);
  //   }
  // }


  getWeftSystemCode(index) {
    var row &#x3D; this.visibleRows[index];
    var id &#x3D; this.rowSystemMapping[row];
    var system &#x3D; this.weft_systems[id];

    return String.fromCharCode(97 + system.id);
  }

  getWarpSystemCode(index) {

     var col &#x3D; this.colSystemMapping[index];
     var system &#x3D; this.warp_systems[col];

    return  String.fromCharCode(97 + system.id);
  }


  getColor(index) {
    var row &#x3D; this.visibleRows[index];
    var id &#x3D; this.rowShuttleMapping[row];
    var shuttle &#x3D; this.shuttles[id];

    return shuttle.color;
  }

  getColorCol(index) {


    var col &#x3D; this.colShuttleMapping[index];
    var shuttle &#x3D; this.shuttles[col];

    return shuttle.color;
  }

/***
   * updates the draft based on changes that happened within the threading.
   * @param update{i: threading frame, j: threading warp, val: true or false for setting}
   * more than one update object may be sent in the case where a thread is switching from one frame to another
   * @returns (nothing) in the future - this can return the specific points to update on the draft
   */  
  updateDraftFromThreading(updates){

    for(var u in updates){

      if(updates[u].i !&#x3D;&#x3D; undefined){

        var idxs &#x3D; this.loom.getAffectedDrawdownPoints({warp: updates[u].j, frame: updates[u].i});
        var conflicts &#x3D; [];

        for(var i &#x3D; 0; i &lt; idxs.wefts.length; i++){
          for (var j &#x3D; 0; j &lt; idxs.warps.length; j++){
             this.pattern[idxs.wefts[i]][idxs.warps[j]].setHeddle(updates[u].val);
          }
        }

      }
    }
      //return idxs;
  }


/***
   * updates the draft based on changes that happened within the treadling.
   * @param update{i: weft pic frame, j: treadle, val: true or false for setting}
   * more than one update object may be sent in the case where a thread is switching from one treadle to another
   * @returns (nothing) in the future - this can return the specific points to update on the draft
   */  
  updateDraftFromTreadling(updates){

    for(var u in updates){
      
      if(updates[u].i !&#x3D;&#x3D; undefined){

        var idxs &#x3D; this.loom.getAffectedDrawdownPoints({weft: updates[u].i, treadle: updates[u].j});
        
        for(var i &#x3D; 0; i &lt; idxs.wefts.length; i++){
          for (var j &#x3D; 0; j &lt; idxs.warps.length; j++){
             this.pattern[idxs.wefts[i]][idxs.warps[j]].setHeddle(updates[u].val);
          }
        }
      }
    }

    //return idxs;
      
  }

/***
   * updates the draft based on changes that happened within the tie up.
   * @param i: the tieup frame, j: the tieup treadle, value: true or false
   * @returns (nothing) in the future - this can return the specific points to update on the draft
   */  
  updateDraftFromTieup(updates){

      for(var u in updates){
      
        if(updates[u].i !&#x3D;&#x3D; undefined){

          var idxs &#x3D; this.loom.getAffectedDrawdownPoints({frame: updates[u].i, treadle: updates[u].j});
       
          for(var wi &#x3D; 0; wi &lt; idxs.wefts.length; wi++){
            for (var wj &#x3D; 0; wj &lt; idxs.warps.length; wj++){
             this.pattern[idxs.wefts[wi]][idxs.warps[wj]].setHeddle(updates[u].val);
            }
          }
        }
      }

      return idxs;
  }

  
/***
   * recalculates all of drawdown from tieup, treadling, and threading.
   * @param i: the tieups array, j: the treadling array, the threading array
   * @returns (nothing) in the future - this can return the specific points to update on the draft
   */  
  recalculateDraft(tieup, treadling, threading) {
    for (var i &#x3D; 0; i &lt; treadling.length;i++) {
      var active_treadle &#x3D; treadling[i];
      if (active_treadle !&#x3D; -1) {
        for (var j &#x3D; 0; j &lt; tieup.length; j++) {
          if (tieup[j][active_treadle]) {
            for (var k &#x3D; 0; k &lt; threading.length;k++) {
              if (threading[k] &#x3D;&#x3D; j) {
                this.pattern[i][k].setHeddle(true);
              }
            }
          }
        }
      }
    }
  }



  getDirection(neighbors:number, is_up:boolean) : string{

    var is_up_dirs &#x3D;     [&quot;ew&quot;,&quot;ew&quot;, &quot;ns&quot;, &quot;sw&quot;, &quot;ew&quot;, &quot;ew&quot;, &quot;se&quot;, &quot;ew&quot;, &quot;ns&quot;, &quot;nw&quot;, &quot;ns&quot;, &quot;ew&quot;, &quot;ne&quot;, &quot;ew&quot;, &quot;ew&quot;, &quot;ew&quot;];
    var not_is_up_dirs &#x3D; [&quot;x&quot;, &quot;x&quot;, &quot;x&quot;,  &quot;sw&quot;, &quot;x&quot;,  &quot;ew&quot;, &quot;se&quot;, &quot;ew&quot;, &quot;x&quot;,  &quot;nw&quot;, &quot;ns&quot;, &quot;sw&quot;, &quot;ne&quot;, &quot;ew&quot;, &quot;sw&quot;, &quot;ew&quot;];
    
    if(is_up) return is_up_dirs[neighbors];
    else return not_is_up_dirs[neighbors];

  }


  updatePoles(i: number, j: number){


  }

/***
   * determines the directionality of the yarn at this particular point in the cell
   * it considers each draft cell having four poles (NESW) and determines which of those are active
   * @param i: the draft row, j: the draft column
   * @returns a bit string value created by adding a 1 on the string n,e,s,w where the direction is true
   */ 

  pingNeighbors(i:number, j:number): number{

    let cell:Cell &#x3D; new Cell(null);
    let shuttle_id: number &#x3D; this.rowShuttleMapping[i];


    if(this.hasNorthNeighbor(i,j,shuttle_id)) cell.setNorth(); 
    if(this.hasEastNeighbor(i,j)) cell.setEast();             
    if(this.hasSouthNeighbor(i,j,shuttle_id)) cell.setSouth(); 
    if(this.hasWestNeighbor(i,j)) cell.setWest();            

    return cell.getPoles();
  }

  //searches to the west (on this row only) for an interlacement
  hasWestNeighbor(i:number, j:number): boolean{

      for(var ndx &#x3D; j-1; ndx &gt;&#x3D; 0; ndx--){
        if(this.pattern[i][ndx].isUp()) return true;
      }
      return false;
  }


  /***
  If this doesn&#x27;t have east set, then there is nothing to the west
  */
  setWestNeighbors(i:number, j:number){

      for(var ndx &#x3D; j-1; ndx &gt;&#x3D; 0; ndx--){
        this.pattern[i][ndx].setEast();
        if(this.pattern[i][ndx].isUp()) return;
      }

      return;
  }

  unsetWestNeighbors(i:number, j:number){

      //there is something else for the western cells to reference
      if(this.hasEastNeighbor(i,j)) return; 

      //unset until you find the next set cell
      for(var ndx &#x3D; j-1; ndx &gt;&#x3D; 0; ndx--){
        this.pattern[i][ndx].unsetEast(); 
        if(this.pattern[i][ndx].isUp()) return;
      }

      return;
  }


  //searches to the east (on this row only) for an interlacement
  hasEastNeighbor(i:number, j:number): boolean{
      
      for(var ndx &#x3D; j+1; ndx &lt; this.warps; ndx++){
        if(this.pattern[i][ndx].isUp()) return true;
      }
      return false;
  }


  //walks to the east until it hits another set cell, adds &quot;west&quot; to each 
  setEastNeighbors(i:number, j:number){

      for(var ndx &#x3D; j+1; ndx &lt; this.warps; ndx++){
        this.pattern[i][ndx].setWest();
        if(this.pattern[i][ndx].isUp()) return;
      }

      return;
  }

  unsetEastNeighbors(i:number, j:number){

      //there is something else for the western cells to reference
      if(this.hasWestNeighbor(i,j)) return; 

      //unset until you find the next set cell
       for(var ndx &#x3D; j+1; ndx &lt; this.warps; ndx++){
        this.pattern[i][ndx].unsetWest(); 
        if(this.pattern[i][ndx].isUp()) return;
      }

      return;
  }

  //searches rows to the north for any interlacement on the same shuttle
  hasNorthNeighbor(i:number, j:number, shuttle_id: number): boolean{
      for(var ndx &#x3D; i-1; ndx &gt;&#x3D; 0; ndx--){
        if(this.rowShuttleMapping[ndx] &#x3D;&#x3D;&#x3D; shuttle_id){
          if(this.pattern[ndx][j].isUp()) return true;
          if(this.hasWestNeighbor(ndx,j)) return true;
          if(this.hasEastNeighbor(ndx,j)) return true;
        }
      }
      return false;
  }

  //searches rows to the north for any interlacement on the same shuttle
  setNorthNeighbors(i:number, j:number, shuttle_id: number): boolean{
      var c: Cell;

      for(var ndx &#x3D; i-1; ndx &gt;&#x3D; 0; ndx--){
        if(this.rowShuttleMapping[ndx] &#x3D;&#x3D;&#x3D; shuttle_id){
          
             

          for(var col &#x3D; 0; col &lt; this.warps; col++){
            
          }

          if(this.pattern[ndx][j].isUp()) return true;
          if(this.hasWestNeighbor(ndx,j)) return true;
          if(this.hasEastNeighbor(ndx,j)) return true;
        }
      }
      return false;
  }

  //searches rows to the south for any interlacement on the same shuttle
  hasSouthNeighbor(i:number, j:number, shuttle_id:number): boolean{
      for(var ndx &#x3D; i+1; ndx &lt; this.wefts; ndx++){
        if(this.rowShuttleMapping[ndx] &#x3D;&#x3D;&#x3D; shuttle_id){
          if(this.pattern[ndx][j].isUp()) return true;
          if(this.hasWestNeighbor(ndx,j)) return true;
          if(this.hasEastNeighbor(ndx,j)) return true;
        }
      }
      return false;
  }


  //this recomputes the state of the frames, treadles and threading from the draft
  recomputeLoom(){

    let mock &#x3D; [];

    this.loom.clearAllData(this.warps, this.wefts);

    //pretendd that we are computing the values as though they were added one by one
    for (var i &#x3D; 0; i &lt; this.pattern.length; i++) {
        mock.push([]);
      for(var j &#x3D; 0; j &lt; this.pattern[0].length; j++){
        mock[i].push(new Cell(null));
      }
    }

    //compute full rows and for speed
    for (var i &#x3D; 0; i &lt; this.pattern.length; i++) {
      for(var j &#x3D; 0; j &lt; this.pattern[0].length; j++){
            
          if(this.pattern[i][j].isUp()){
              mock[i][j].setHeddle(this.pattern[i][j].isUp());
              this.loom.updateFromDrawdown({i:i,j:j, si:-1}, mock);
              var u_threading &#x3D; this.loom.updateUnused(this.loom.threading, this.loom.min_frames, this.loom.num_frames, &quot;threading&quot;);
              var u_treadling &#x3D; this.loom.updateUnused(this.loom.treadling, this.loom.min_treadles, this.loom.num_treadles, &quot;treadling&quot;);
          }
      }
    }
  }


  //checks system assignments and updates visibility of systems that are being used
  updateSystemVisibility(type:string){

    var mapping;
    var systems;

    if(type &#x3D;&#x3D; &quot;weft&quot;){
      mapping &#x3D; this.rowSystemMapping;
      systems &#x3D; this.weft_systems;
    } else {
      mapping &#x3D; this.colSystemMapping;
      systems &#x3D; this.warp_systems;
    }


    for(var i &#x3D;0; i &lt; systems.length; i++){
      systems[i].setVisible(mapping.includes(systems[i].id));
    }

    if(type &#x3D;&#x3D; &quot;weft&quot;) this.updateVisible();

  }





setNorthSouth(row:number, i:number){

  if(i &gt; 0 &amp;&amp; i &lt; this.warps){
    this.pattern[row][i].setNorthSouth();
  }
}

setEastWest(row:number, i:number){
  if(i &gt; 0 &amp;&amp; i &lt; this.warps){
    this.pattern[row][i].setEastWest();
  }
}

setSouth(row:number, i:number){
  if(i &gt; 0 &amp;&amp; i &lt; this.warps){
    this.pattern[row][i].setSouth();
  }
}

setNorth(row:number, i:number){
  if(i &gt; 0 &amp;&amp; i &lt; this.warps){
    this.pattern[row][i].setNorth();
  }
}

setEast(row:number, i:number){
  if(i &gt; 0 &amp;&amp; i &lt; this.warps){
    this.pattern[row][i].setEast();
  }
}

setWest(row:number, i:number){
  if(i &gt; 0 &amp;&amp; i &lt; this.warps){
    this.pattern[row][i].setWest();
  }
}

getNextPath(paths, i){
  if(i+1 &lt; paths.length){
    return paths[i+1];
  }

  return {
    row: -1,
    overs: []
  }

}

computeYarnPaths(){

    //unset_all
    for(let i &#x3D; 0; i &lt; this.pattern.length; i++){
      for(let j &#x3D; 0; j &lt; this.pattern[i].length; j++){
        this.pattern[i][j].unsetPoles();
      }
    }


    for (var l &#x3D; 0; l &lt; this.shuttles.length; l++) {

      // Draw each shuttle on by one.
      var shuttle &#x3D; this.shuttles[l];

      //acc is an array of row_ids that are assigned to this shuttle
      const acc &#x3D; this.rowShuttleMapping.reduce((acc, v, idx) &#x3D;&gt; v &#x3D;&#x3D;&#x3D; shuttle.id ? acc.concat([idx]) : acc, []);

      //screen rows are reversed to go from bottom to top
      //[row index] -&gt; (indexes where there is interlacement)
      let path &#x3D; [];
      for (var i &#x3D; 0; i &lt; acc.length ; i++) {
       
        const row_values &#x3D; this.pattern[acc[i]];
        const overs &#x3D; row_values.reduce((overs, v, idx) &#x3D;&gt; v.isUp() ? overs.concat([idx]) : overs, []);

        //only push the rows with at least one interlacement     
        if(overs.length &gt; 0 &amp;&amp; overs.length &lt; row_values.length){
          path.push({row: acc[i], overs:overs});
        }
      
      }

      var started &#x3D; false;
      var last &#x3D; {
        row: 0,
        ndx: 0
      };

      path &#x3D; path.reverse();


      for(let k &#x3D; 0; k &lt; path.length; k++){

        let row:number &#x3D; parseInt(path[k].row); 
        let overs:Array&lt;number&gt; &#x3D; path[k].overs; 

        let next_path &#x3D; this.getNextPath(path, k);

        let min_ndx:number &#x3D; overs.shift();
        let max_ndx:number &#x3D; overs.pop();
        
        let next_min_ndx:number;
        let next_max_ndx:number;
        
        if(next_path.row !&#x3D;&#x3D; -1 ){
         
          next_max_ndx &#x3D; next_path.overs[next_path.overs.length-1];
          next_min_ndx &#x3D; next_path.overs[0];

        }else{
          next_min_ndx &#x3D; min_ndx;
          next_max_ndx &#x3D; max_ndx;
        }  



        let moving_left:boolean &#x3D; (k%2 &#x3D;&#x3D;&#x3D; 0 &amp;&amp; shuttle.insert) || (k%2 !&#x3D;&#x3D; 0 &amp;&amp; !shuttle.insert);

        if(moving_left){
          if(started) max_ndx &#x3D; Math.max(max_ndx, last.ndx);
          min_ndx &#x3D; Math.min(min_ndx, next_min_ndx);
        } else {
          max_ndx &#x3D; Math.max(max_ndx, next_max_ndx);
          if(started) min_ndx &#x3D; Math.min(min_ndx, last.ndx);

        }
       
        //draw upwards if required
        if(started){

          
         // console.log(&quot;row/last.row&quot;, row, last.row);
          // for(let j &#x3D; last.row-1; j &gt; row; j--){
          //  if(moving_left) this.setNorthSouth(j, last.ndx+1);
          //  else this.setNorthSouth(j, last.ndx-1);
          // }
        }

        //set by lookiing at the ends ends
        if(moving_left){

          if(started){
             this.setSouth(row,max_ndx+1); //set where it came from
          } 
          
          this.setWest(row, max_ndx+1);

          this.setNorth(row, min_ndx-1);
          this.setEast(row, min_ndx-1);

          last.ndx &#x3D; min_ndx;

        }else{

          if(started){
            this.setSouth(row, min_ndx-1);
          }

          this.setEast(row, min_ndx-1);
          
          this.setNorth(row, max_ndx+1);
          this.setWest(row, max_ndx+1);
          
          last.ndx &#x3D; max_ndx;

        } 

        //set in between
        for(i &#x3D; min_ndx; i &lt;&#x3D; max_ndx; i++){
           this.setEastWest(row, i); 
        }

        started &#x3D; true;
        last.row &#x3D; row;
       
      } 
    }
        

  }


  /**
   * Fills in selected area of canvas. Updates the pattern within selection.
   * @extends WeaveDirective
   * @param {Selection} selection - defined user selected area to fill.
   * @param {Array&lt;Array&lt;boolean&gt;&gt;} - the pattern used to fill the area.
   * @param {string} - the type of logic used to fill selected area.
   * @returns {void}
   */
  public fillArea(
    selection: Selection, 
    pattern: Pattern, 
    type: string
  ) {

    console.log(&quot;fill area called&quot;);
    console.log(selection, pattern, type);

    var updates &#x3D; [];
    
    var screen_i &#x3D; Math.min(selection.start.si, selection.end.si)
    const draft_j &#x3D; Math.min(selection.start.j, selection.end.j);
  
    const rows &#x3D; pattern.height;
    const cols &#x3D; pattern.width;

    var w,h;

    w &#x3D; Math.ceil(selection.width);
    h &#x3D; Math.ceil(selection.height);


    if(selection.target.id &#x3D;&#x3D;&#x3D; &quot;warp-systems&quot;){
      h &#x3D; pattern.height;
      screen_i &#x3D; 0;
    } 
    if(selection.target.id &#x3D;&#x3D;&#x3D; &quot;weft-systems&quot;){
      w &#x3D; pattern.width;
    } 

    if(selection.target.id &#x3D;&#x3D;&#x3D; &quot;warp-materials&quot;){
       h &#x3D; pattern.height;
       screen_i &#x3D; 0;
    }
    if(selection.target.id &#x3D;&#x3D;&#x3D; &quot;weft-materials&quot;){
      w &#x3D; pattern.width;
    } 

    //cycle through each visible row/column of the selection
    for (var i &#x3D; 0; i &lt; h; i++ ) {
      for (var j &#x3D; 0; j &lt; w; j++ ) {

        var row &#x3D; i + screen_i;
        var col &#x3D; j + draft_j;


        let temp:Cell &#x3D; pattern.pattern[i % rows][j % cols];
       
        var prev:boolean &#x3D; false; 
        switch(selection.target.id){

          case &#x27;drawdown&#x27;:
              var draft_row &#x3D; this.visibleRows[row];
              prev &#x3D; this.pattern[draft_row][col].isUp();

          break;
          case &#x27;threading&#x27;:

              var frame &#x3D; this.loom.frame_mapping[row];
              prev &#x3D; this.loom.isInFrame(col, frame);
          
          break;
          case &#x27;treadling&#x27;:
              var draft_row &#x3D; this.visibleRows[row];
              prev &#x3D; (this.loom.isInTreadle(draft_row, col)); 
          break;
          case &#x27;tieups&#x27;:
              var frame &#x3D; this.loom.frame_mapping[row];
              prev &#x3D; this.loom.hasTieup({i:frame,j:col, si:-1}); 
          
          break;
          default:
          break;
        }

        if (prev !&#x3D;&#x3D; null){

          var val &#x3D; false;
          switch (type) {
            case &#x27;invert&#x27;:
             val &#x3D; !temp.isUp();
              break;
            case &#x27;mask&#x27;:
             val &#x3D; temp &amp;&amp; prev;
              break;
            case &#x27;mirrorX&#x27;:
              val &#x3D; pattern.pattern[(h - i - 1) % rows][j % cols].isUp();
              break;
            case &#x27;mirrorY&#x27;:
              val &#x3D; pattern.pattern[i % rows][(w - j - 1) % cols].isUp();
              break;
            case &#x27;shiftUp&#x27;:
              val &#x3D; pattern.pattern[(i+1) % rows][j].isUp();
              break;
            case &#x27;shiftLeft&#x27;:
              val &#x3D; pattern.pattern[i][(j+1) % cols].isUp();
              break;
            default:
              val &#x3D; temp.isUp();
              break;
          }


          var updates &#x3D; [];

          switch(selection.target.id){
           
           case &#x27;drawdown&#x27;:
           var draft_row &#x3D; this.visibleRows[row];

            if(this.hasCell(draft_row,col)){

                let p:Interlacement &#x3D; {i: this.visibleRows[row], j: col, si: row};     
                this.setHeddle(p.i,p.j,val);
              }

            break;
            
            case &#x27;threading&#x27;:
            var frame &#x3D; this.loom.frame_mapping[row];


              if(this.loom.inThreadingRange({i:frame,j:col,si:-1})){ 
                updates &#x3D; this.loom.updateThreading({i:frame, j:col, val:val});
                this.updateDraftFromThreading(updates); 
              }
            break;

            case &#x27;treadling&#x27;:
              
             var draft_row &#x3D; this.visibleRows[row];
             if(this.loom.inTreadlingRange({i:draft_row,j:col, si: -1})){ 
                updates &#x3D; this.loom.updateTreadling({i: draft_row, j:col, val:val});
                this.updateDraftFromTreadling(updates);
              }
            break;
            case &#x27;tieups&#x27;:
              var frame &#x3D; this.loom.frame_mapping[row];

              if(this.loom.inTieupRange({i:frame, j:col, si: -1})){
                updates &#x3D; this.loom.updateTieup({i:frame, j:col, val:val});
                this.updateDraftFromTieup(updates);
              }
            break; 
            case &#x27;weft-systems&#x27;:
              var draft_row &#x3D; this.visibleRows[row];
              val &#x3D; pattern[i % rows][j % cols].isUp();
              if(val &amp;&amp; col &lt; this.weft_systems.length) this.rowSystemMapping[draft_row] &#x3D; col;
            
            break;
            case &#x27;warp-systems&#x27;:
              val &#x3D; pattern[i % rows][j % cols].isUp();
              if(val &amp;&amp; row &lt; this.warp_systems.length){
                  this.colSystemMapping[col] &#x3D; row;
              }
            break;
            case &#x27;weft-materials&#x27;:
              var draft_row &#x3D; this.visibleRows[row];
              val &#x3D; pattern[i % rows][j % cols].isUp();
              if(val &amp;&amp; col &lt; this.shuttles.length) this.rowShuttleMapping[draft_row] &#x3D; col;
            
            break;
            case &#x27;warp-materials&#x27;:
              val &#x3D; pattern[i % rows][j % cols].isUp();
              if(val &amp;&amp; row &lt; this.shuttles.length){
                  this.colShuttleMapping[col] &#x3D; row;
              }
            break;
            default:
            break;
          }
        }


      }
    }

    var u_threading &#x3D; this.loom.updateUnused(this.loom.threading, this.loom.min_frames, this.loom.num_frames, &quot;threading&quot;);
    var u_treadling &#x3D; this.loom.updateUnused(this.loom.treadling, this.loom.min_treadles, this.loom.num_treadles, &quot;treadling&quot;);



  }


   /**
   * Fills in the entire draft
   * @param {Array&lt;Array&lt;Cell&gt;&gt;} - the pattern used to fill the area.
   * @param {string} - the type of logic used to fill selected area.
   * @returns {void}
   */
    public fill(
      pattern: Array&lt;Array&lt;Cell&gt;&gt;, 
      type: string
    ) {
  
      
      const rows &#x3D; pattern.length;
      const cols &#x3D; pattern[0].length;
      const store: Array&lt;Array&lt;Cell&gt;&gt; &#x3D; [];
  
      var w,h;
  
      w &#x3D; this.warps;
      h &#x3D; this.wefts;
  
  
      //cycle through each visible row/column of the draft
      for (var i &#x3D; 0; i &lt; h; i++ ) {
        store.push([]);
        for (var j &#x3D; 0; j &lt; w; j++ ) {
          store[i].push(new Cell(null));
          var row &#x3D; i;
          var col &#x3D; j;
  
          let temp:Cell &#x3D; pattern[i % rows][j % cols];
          var draft_row &#x3D; this.visibleRows[row];
          
          let prev_set: boolean &#x3D; this.pattern[draft_row][col].isSet();
          let prev_heddle: boolean &#x3D; this.pattern[draft_row][col].isUp();
  
          let new_set &#x3D; false;
          let new_heddle &#x3D; true;
           
          switch (type) {
              case &#x27;clear&#x27;:
               new_set &#x3D; true; 
               new_heddle &#x3D; true;
                break;
              case &#x27;invert&#x27;:
               new_set &#x3D; prev_set; 
               new_heddle &#x3D; !prev_heddle;
                break;
              case &#x27;reset&#x27;:
                new_set &#x3D; prev_set; 
                new_heddle &#x3D; true;
                  break;
              case &#x27;mask&#x27;:
               new_set &#x3D; prev_set; 
               new_heddle &#x3D; temp.isUp() &amp;&amp; prev_heddle;
                break;
              case &#x27;mirrorX&#x27;:
                new_set &#x3D; pattern[(h - i - 1) % rows][j % cols].isSet();
                new_heddle &#x3D; pattern[(h - i - 1) % rows][j % cols].isUp();
                break;
              case &#x27;mirrorY&#x27;:
                new_set &#x3D; pattern[i % rows][(w - j - 1) % cols].isSet();
                new_heddle &#x3D; pattern[i % rows][(w - j - 1) % cols].isUp();
                break;
              case &#x27;shiftUp&#x27;:
                new_set &#x3D; pattern[(i+1) % rows][j].isSet();
                new_heddle &#x3D; pattern[(i+1) % rows][j].isUp();
                break;
              case &#x27;shiftLeft&#x27;:
                new_set &#x3D; pattern[i][(j+1) % cols].isSet();
                new_heddle &#x3D; pattern[i][(j+1) % cols].isUp();
                break;
              default:
                new_set &#x3D; temp.isSet();
                new_heddle &#x3D; temp.isUp();
                break;
            }

            if(new_set){
              store[i][j].setHeddle(new_heddle);
            }
        }
      }

      store.forEach((row, i) &#x3D;&gt;{
        row.forEach((cell,j) &#x3D;&gt;{
          if(this.hasCell(i,j)){
            if(cell.isSet) this.pattern[i][j].setHeddle(cell.getHeddle());
          }
        });
      });     
    
  
  }

  /***
   This function takes a point added to the draft and updates and redraws the loom states
   It takes current position of a point on the currently visible draft
   ***/
   private updateLoomFromDraft(currentPos):boolean{


    var updates &#x3D; this.loom.updateFromDrawdown({i:currentPos.i,j:currentPos.j,si:currentPos.si}, this.pattern);
    var u_threading &#x3D; this.loom.updateUnused(this.loom.threading, this.loom.min_frames, this.loom.num_frames, &quot;threading&quot;);
    var u_treadling &#x3D; this.loom.updateUnused(this.loom.treadling, this.loom.min_treadles, this.loom.num_treadles, &quot;treadling&quot;);

    return true;
      
   }

}
</code></pre>
    </div>
</div>





                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
           </div>
       </div>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/search/search.js"></script>
       <script src="../js/search/lunr.min.js"></script>
       <script src="../js/search/search-lunr.js"></script>

       <script src="../js/menu.js"></script>
       <script src="../js/libs/highlight.pack.js"></script>
       <script src="../js/libs/highlightjs-line-numbers.min.js"></script>
       <script src="../js/search/search_index.js"></script>
       <script>
            document.addEventListener('DOMContentLoaded', function() {
                hljs.initHighlightingOnLoad();
                hljs.initLineNumbersOnLoad();
            });
       </script>

    </body>
</html>
